import{a as R,c as q}from"./chunk-FAZ3ZKHQ.js";import{a as S}from"./chunk-X7MC7YUB.js";import{$ as A,A as U,B as s,E as g,I as x,K as c,M as L,N as n,Na as B,O as e,P as h,Q as w,Qa as $,R as I,Ra as P,S as F,Sa as z,T as b,U as i,V as u,W as O,X as N,_ as j,da as v,ga as C,ha as M,i as D,ia as y,m as E,p as l,x as k}from"./chunk-Q365JZA6.js";var m=class a{firestore=l(R);getUltimaTransaccion(o){let t=B(this.firestore,`usuarios/${o}/transacciones`),r=$(t,P("fecha","desc"),z(1));return q(r,{idField:"id"}).pipe(D(p=>p[0]||null))}static \u0275fac=function(t){return new(t||a)};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})};function Q(a,o){if(a&1&&(w(0),n(1,"p",4),i(2),e(),n(3,"p",5),i(4),e(),n(5,"p",6),i(6),j(7,"date"),e(),I()),a&2){let t,r,p,f,_,d=b();s(2),u((t=d.transaction())==null?null:t.descripcion),s(),L("text-green-600",((r=d.transaction())==null?null:r.tipo)==="ingreso")("text-red-600",((p=d.transaction())==null?null:p.tipo)==="gasto"),s(),N(" ",((f=d.transaction())==null?null:f.tipo)==="ingreso"?"+":"-"," $",(f=d.transaction())==null?null:f.monto," "),s(2),u(A(7,8,(_=d.transaction())==null||_.fecha==null?null:_.fecha.toDate(),"medium"))}}function V(a,o){a&1&&(w(0),n(1,"p",7),i(2,"No hay transacciones a\xFAn."),e(),I())}var T=class a{transaction=k();transactionEffect=v(()=>{console.log("Transaction effect triggered",this.transaction())});authSvc=l(S);dashboardService=l(m);ngOnInit(){}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=g({type:a,selectors:[["app-last-transaction-card"]],inputs:{transaction:[1,"transaction"]},decls:6,vars:2,consts:[["data-aos","fade-up","data-aos-delay","400",1,"mb-6"],[1,"p-4","rounded-2xl","shadow-md","bg-white","text-black"],[1,"text-lg","font-semibold","mb-2"],[4,"ngIf"],[1,"text-sm"],[1,"text-xl","font-bold"],[1,"text-xs","text-gray-500"],[1,"text-sm","text-gray-400"]],template:function(t,r){t&1&&(n(0,"section",0)(1,"div",1)(2,"h3",2),i(3,"\xDAltima transacci\xF3n"),e(),x(4,Q,8,11,"ng-container",3)(5,V,3,0,"ng-container",3),e()()),t&2&&(s(4),c("ngIf",r.transaction),s(),c("ngIf",!0))},dependencies:[y,C,M],encapsulation:2})};function W(a,o){if(a&1&&h(0,"img",17),a&2){let t=b();c("src",t.user.photoURL,U)}}var H=class a{loadUser=v(()=>{if(this.user=this.authService.user()||{},this.user.uid!==void 0){let o=this.user.uid;this.getLastTransaction(o)}});user={};authService=l(S);lastTransaction=null;dashboardService=l(m);ngOnInit(){}getLastTransaction(o){this.dashboardService.getUltimaTransaccion(o).subscribe(t=>{this.lastTransaction=t})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=g({type:a,selectors:[["app-dashboard"]],decls:31,vars:4,consts:[[1,"py-4","min-h-[100dvh]","flex","items-center","justify-center","bg-background","dark:bg-zinc-900","text-text","dark:text-white","px-4","transition-all","duration-300"],["data-aos","fade-up",1,"max-w-xl","mx-auto","p-6","rounded-2xl","shadow-xl",2,"background-color","var(--main-color)","color","white"],[1,"flex","items-center","gap-4","mb-6"],["alt","Foto de perfil","class","w-16 h-16 rounded-full shadow-lg",3,"src",4,"ngIf"],[1,"text-2xl","font-bold"],[1,"text-sm","opacity-80"],["data-aos","fade-up","data-aos-delay","200",1,"absolute","top-4","right-4","mt-6","text-end"],[1,"px-4","py-2","rounded-xl","font-semibold","shadow-lg","transition-all","text-white","bg-white/10","hover:bg-white/20","border","border-white","border-opacity-30","backdrop-blur-sm",3,"click"],[1,"fa-solid","fa-right-from-bracket"],[1,"text-lg","mt-4"],["data-aos","fade-up","data-aos-delay","300",1,"mt-10","grid","grid-cols-1","sm:grid-cols-3","gap-6"],[1,"rounded-xl","p-6","shadow-lg","text-white","bg-gradient-to-tr","from-pink-500","to-fuchsia-600","ring-1","ring-white/20"],[1,"text-lg","font-semibold"],[1,"text-3xl","mt-2","font-bold"],[1,"rounded-xl","p-6","shadow-lg","text-white","bg-[var(--secondary-color)]"],[1,"rounded-xl","p-6","shadow-lg","text-[var(--text-color)]","bg-white","border","border-[var(--border-color)]"],[3,"transaction"],["alt","Foto de perfil",1,"w-16","h-16","rounded-full","shadow-lg",3,"src"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),x(3,W,1,1,"img",3),n(4,"div")(5,"h2",4),i(6),e(),n(7,"p",5),i(8),e()(),n(9,"div",6)(10,"button",7),F("click",function(){return r.authService.logout()}),h(11,"i",8),e()()(),n(12,"p",9),i(13," Bienvenido a tu panel de control. Ac\xE1 vas a poder ver el resumen de tus finanzas. "),e(),n(14,"div",10)(15,"div",11)(16,"p",12),i(17,"Ingresos"),e(),n(18,"p",13),i(19,"$95.000"),e()(),n(20,"div",14)(21,"p",12),i(22,"Gastos"),e(),n(23,"p",13),i(24,"$73.500"),e()(),n(25,"div",15)(26,"p",12),i(27,"Balance"),e(),n(28,"p",13),i(29,"$21.500"),e()()()(),h(30,"app-last-transaction-card",16),e()),t&2&&(s(3),c("ngIf",r.user==null?null:r.user.photoURL),s(3),O(" \xA1Hola ",r.user.displayName||"Usuario","! \u{1F44B} "),s(2),u(r.user.email),s(22),c("transaction",r.lastTransaction))},dependencies:[y,C,T],encapsulation:2})};export{H as DashboardComponent};
