var QN=Object.create;var jf=Object.defineProperty,YN=Object.defineProperties,ZN=Object.getOwnPropertyDescriptor,JN=Object.getOwnPropertyDescriptors,XN=Object.getOwnPropertyNames,MI=Object.getOwnPropertySymbols,xI=Object.getPrototypeOf,kI=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,tM=Reflect.get;var PI=(t,e,n)=>e in t?jf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})kI.call(e,n)&&PI(t,n,e[n]);if(MI)for(var n of MI(e))eM.call(e,n)&&PI(t,n,e[n]);return t},ge=(t,e)=>YN(t,JN(e));var B4=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var nM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of XN(e))!kI.call(t,i)&&i!==n&&jf(t,i,{get:()=>e[i],enumerable:!(r=ZN(e,i))||r.enumerable});return t};var $4=(t,e,n)=>(n=t!=null?QN(xI(t)):{},nM(e||!t||!t.__esModule?jf(n,"default",{value:t,enumerable:!0}):n,t));var pr=(t,e,n)=>tM(xI(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function Hf(t,e){return Object.is(t,e)}var Be=null,ou=!1,zf=1,qt=Symbol("SIGNAL");function se(t){let e=Be;return Be=t,e}function qf(){return Be}var Ji={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qs(t){if(ou)throw new Error("");if(Be===null)return;Be.consumerOnSignalRead(t);let e=Be.nextProducerIndex++;if(lu(Be),e<Be.producerNode.length&&Be.producerNode[e]!==t&&Ks(Be)){let n=Be.producerNode[e];uu(n,Be.producerIndexOfThis[e])}Be.producerNode[e]!==t&&(Be.producerNode[e]=t,Be.producerIndexOfThis[e]=Ks(Be)?LI(t,Be,e):0),Be.producerLastReadVersion[e]=t.version}function OI(){zf++}function Wf(t){if(!(Ks(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zf)){if(!t.producerMustRecompute(t)&&!cu(t)){$f(t);return}t.producerRecomputeValue(t),$f(t)}}function Gf(t){if(t.liveConsumerNode===void 0)return;let e=ou;ou=!0;try{for(let n of t.liveConsumerNode)n.dirty||rM(n)}finally{ou=e}}function Kf(){return Be?.consumerAllowSignalWrites!==!1}function rM(t){t.dirty=!0,Gf(t),t.consumerMarkedDirty?.(t)}function $f(t){t.dirty=!1,t.lastCleanEpoch=zf}function Ys(t){return t&&(t.nextProducerIndex=0),se(t)}function au(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ks(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)uu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function cu(t){lu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Wf(n),r!==n.version))return!0}return!1}function Zs(t){if(lu(t),Ks(t))for(let e=0;e<t.producerNode.length;e++)uu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function LI(t,e,n){if(FI(t),t.liveConsumerNode.length===0&&VI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=LI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function uu(t,e){if(FI(t),t.liveConsumerNode.length===1&&VI(t))for(let r=0;r<t.producerNode.length;r++)uu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];lu(i),i.producerIndexOfThis[r]=e}}function Ks(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function FI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function VI(t){return t.producerNode!==void 0}function Qf(t,e){let n=Object.create(iM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Wf(n),Qs(n),n.value===su)throw n.error;return n.value};return r[qt]=n,r}var Uf=Symbol("UNSET"),Bf=Symbol("COMPUTING"),su=Symbol("ERRORED"),iM=ge(L({},Ji),{value:Uf,dirty:!0,error:null,equal:Hf,kind:"computed",producerMustRecompute(t){return t.value===Uf||t.value===Bf},producerRecomputeValue(t){if(t.value===Bf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Bf;let n=Ys(t),r,i=!1;try{r=t.computation(),se(null),i=e!==Uf&&e!==su&&r!==su&&t.equal(e,r)}catch(o){r=su,t.error=o}finally{au(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function oM(){throw new Error}var jI=oM;function UI(t){jI(t)}function Yf(t){jI=t}var sM=null;function Zf(t,e){let n=Object.create(du);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Qs(n),n.value);return r[qt]=n,r}function Js(t,e){Kf()||UI(t),t.equal(t.value,e)||(t.value=e,aM(t))}function Jf(t,e){Kf()||UI(t),Js(t,e(t.value))}var du=ge(L({},Ji),{equal:Hf,value:void 0,kind:"signal"});function aM(t){t.version++,OI(),Gf(t),sM?.()}function Xf(t){let e=se(null);try{return t()}finally{se(e)}}var ep;function Xs(){return ep}function Nn(t){let e=ep;return ep=t,e}var hu=Symbol("NotFound");function Y(t){return typeof t=="function"}function Xi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var fu=Xi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Qr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof fu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{BI(o)}catch(s){e=e??[],s instanceof fu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new fu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)BI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Qr(n,e)}remove(e){let{_finalizers:n}=this;n&&Qr(n,e),e instanceof t&&e._removeParent(this)}};Ne.EMPTY=(()=>{let t=new Ne;return t.closed=!0,t})();var tp=Ne.EMPTY;function pu(t){return t instanceof Ne||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function BI(t){Y(t)?t():t.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var eo={setTimeout(t,e,...n){let{delegate:r}=eo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=eo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function gu(t){eo.setTimeout(()=>{let{onUnhandledError:e}=Wt;if(e)e(t);else throw t})}function ea(){}var $I=np("C",void 0,void 0);function HI(t){return np("E",void 0,t)}function zI(t){return np("N",t,void 0)}function np(t,e,n){return{kind:t,value:e,error:n}}var Yr=null;function to(t){if(Wt.useDeprecatedSynchronousErrorHandling){let e=!Yr;if(e&&(Yr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Yr;if(Yr=null,n)throw r}}else t()}function qI(t){Wt.useDeprecatedSynchronousErrorHandling&&Yr&&(Yr.errorThrown=!0,Yr.error=t)}var Zr=class extends Ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pu(e)&&e.add(this)):this.destination=fM}static create(e,n,r){return new no(e,n,r)}next(e){this.isStopped?ip(zI(e),this):this._next(e)}error(e){this.isStopped?ip(HI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ip($I,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dM=Function.prototype.bind;function rp(t,e){return dM.call(t,e)}var op=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){mu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){mu(r)}else mu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){mu(n)}}},no=class extends Zr{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Wt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rp(e.next,o),error:e.error&&rp(e.error,o),complete:e.complete&&rp(e.complete,o)}):i=e}this.destination=new op(i)}};function mu(t){Wt.useDeprecatedSynchronousErrorHandling?qI(t):gu(t)}function hM(t){throw t}function ip(t,e){let{onStoppedNotification:n}=Wt;n&&eo.setTimeout(()=>n(t,e))}var fM={closed:!0,next:ea,error:hM,complete:ea};var ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(t){return t}function sp(...t){return ap(t)}function ap(t){return t.length===0?At:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=gM(n)?n:new no(n,r,i);return to(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=WI(r),new r((i,o)=>{let s=new no({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ro](){return this}pipe(...n){return ap(n)(this)}toPromise(n){return n=WI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function WI(t){var e;return(e=t??Wt.Promise)!==null&&e!==void 0?e:Promise}function pM(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function gM(t){return t&&t instanceof Zr||pM(t)&&pu(t)}function cp(t){return Y(t?.lift)}function he(t){return e=>{if(cp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new up(t,e,n,r,i)}var up=class extends Zr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function io(){return he((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var oo=class extends ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ne;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ne.EMPTY)}return e}refCount(){return io()(this)}};var GI=Xi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class t extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new yu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new GI}next(n){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?tp:(this.currentObservers=null,o.push(n),new Ne(()=>{this.currentObservers=null,Qr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return t.create=(e,n)=>new yu(e,n),t})(),yu=class extends He{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:tp}};var Je=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var lp={now(){return(lp.delegate||Date).now()},delegate:void 0};var vu=class extends Ne{constructor(e,n){super()}schedule(e,n=0){return this}};var ta={setInterval(t,e,...n){let{delegate:r}=ta;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ta;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var so=class extends vu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ta.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ta.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Qr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ao=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ao.now=lp.now;var co=class extends ao{constructor(e,n=ao.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var dp=new co(so);var _u=class extends so{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Eu=class extends co{};var hp=new Eu(_u);var vt=new ee(t=>t.complete());function KI(t){return t&&Y(t.schedule)}function QI(t){return t[t.length-1]}function Iu(t){return Y(QI(t))?t.pop():void 0}function gr(t){return KI(QI(t))?t.pop():void 0}function wu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ZI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function YI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jr(t){return this instanceof Jr?(this.v=t,this):new Jr(t)}function JI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(D){return Promise.resolve(D).then(m,p)}}function a(m,D){r[m]&&(i[m]=function(N){return new Promise(function(R,O){o.push([m,N,R,O])>1||u(m,N)})},D&&(i[m]=D(i[m])))}function u(m,D){try{l(r[m](D))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof Jr?Promise.resolve(m.value.v).then(h,p):y(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,D){m(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function XI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YI=="function"?YI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Tu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Du(t){return Y(t?.then)}function bu(t){return Y(t[ro])}function Cu(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Su(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Au=mM();function Ru(t){return Y(t?.[Au])}function Nu(t){return JI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Jr(n.read());if(i)return yield Jr(void 0);yield yield Jr(r)}}finally{n.releaseLock()}})}function Mu(t){return Y(t?.getReader)}function xe(t){if(t instanceof ee)return t;if(t!=null){if(bu(t))return yM(t);if(Tu(t))return vM(t);if(Du(t))return _M(t);if(Cu(t))return ew(t);if(Ru(t))return EM(t);if(Mu(t))return IM(t)}throw Su(t)}function yM(t){return new ee(e=>{let n=t[ro]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vM(t){return new ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _M(t){return new ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,gu)})}function EM(t){return new ee(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ew(t){return new ee(e=>{wM(t,e).catch(n=>e.error(n))})}function IM(t){return ew(Nu(t))}function wM(t,e){var n,r,i,o;return ZI(this,void 0,void 0,function*(){try{for(n=XI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function _t(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mr(t,e=0){return he((n,r)=>{n.subscribe(ae(r,i=>_t(r,t,()=>r.next(i),e),()=>_t(r,t,()=>r.complete(),e),i=>_t(r,t,()=>r.error(i),e)))})}function yr(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function tw(t,e){return xe(t).pipe(yr(e),mr(e))}function nw(t,e){return xe(t).pipe(yr(e),mr(e))}function rw(t,e){return new ee(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function iw(t,e){return new ee(n=>{let r;return _t(n,e,()=>{r=t[Au](),_t(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function Pu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ee(n=>{_t(n,e,()=>{let r=t[Symbol.asyncIterator]();_t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ow(t,e){return Pu(Nu(t),e)}function sw(t,e){if(t!=null){if(bu(t))return tw(t,e);if(Tu(t))return rw(t,e);if(Du(t))return nw(t,e);if(Cu(t))return Pu(t,e);if(Ru(t))return iw(t,e);if(Mu(t))return ow(t,e)}throw Su(t)}function Se(t,e){return e?sw(t,e):xe(t)}function G(...t){let e=gr(t);return Se(t,e)}function uo(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new ee(e?i=>e.schedule(r,0,i):r)}function fp(t){return!!t&&(t instanceof ee||Y(t.lift)&&Y(t.subscribe))}var Mn=Xi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return he((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:TM}=Array;function DM(t,e){return TM(e)?t(...e):t(e)}function xu(t){return ne(e=>DM(t,e))}var{isArray:bM}=Array,{getPrototypeOf:CM,prototype:SM,keys:AM}=Object;function ku(t){if(t.length===1){let e=t[0];if(bM(e))return{args:e,keys:null};if(RM(e)){let n=AM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function RM(t){return t&&typeof t=="object"&&CM(t)===SM}function Ou(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Lu(...t){let e=gr(t),n=Iu(t),{args:r,keys:i}=ku(t);if(r.length===0)return Se([],e);let o=new ee(NM(r,e,i?s=>Ou(i,s):At));return n?o.pipe(xu(n)):o}function NM(t,e,n=At){return r=>{aw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)aw(e,()=>{let l=Se(t[u],e),h=!1;l.subscribe(ae(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function aw(t,e,n){t?_t(n,t,e):e()}function cw(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?D(N):u.push(N),D=N=>{o&&e.next(N),l++;let R=!1;xe(n(N,h++)).subscribe(ae(e,O=>{i?.(O),o?m(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?_t(e,s,()=>D(O)):D(O)}y()}catch(O){e.error(O)}}))};return t.subscribe(ae(e,m,()=>{p=!0,y()})),()=>{a?.()}}function $e(t,e,n=1/0){return Y(e)?$e((r,i)=>ne((o,s)=>e(r,o,i,s))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>cw(r,i,t,n)))}function uw(t=1/0){return $e(At,t)}function lw(){return uw(1)}function lo(...t){return lw()(Se(t,gr(t)))}function Fu(t){return new ee(e=>{xe(t()).subscribe(e)})}function MM(...t){let e=Iu(t),{args:n,keys:r}=ku(t),i=new ee(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;xe(n[h]).subscribe(ae(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ou(r,a):a),o.complete())}))}});return e?i.pipe(xu(e)):i}function Rt(t,e){return he((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function vr(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ae(n,void 0,void 0,s=>{o=xe(t(s,vr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function dw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ae(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function _r(t,e){return Y(e)?$e(t,e,1):$e(t,1)}function Er(t){return he((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>vt:he((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Vu(t=PM){return he((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function PM(){return new Mn}function Xr(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function xn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((i,o)=>t(i,o,r)):At,Pn(1),n?Er(e):Vu(()=>new Mn))}function ho(t){return t<=0?()=>vt:he((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function pp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((i,o)=>t(i,o,r)):At,ho(1),n?Er(e):Vu(()=>new Mn))}function gp(t,e){return he(dw(t,e,arguments.length>=2,!0))}function mp(...t){let e=gr(t);return he((n,r)=>{(e?lo(t,n,e):lo(t,n)).subscribe(r)})}function Nt(t,e){return he((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;xe(t(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function yp(t){return he((e,n)=>{xe(t).subscribe(ae(n,()=>n.complete(),ea)),!n.closed&&e.subscribe(n)})}function Xe(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}var Yw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(kM(e,n)),this.code=e}};function xM(t){return`NG0${Math.abs(t)}`}function kM(t,e){return`${xM(t)}${e?": "+e:""}`}var Zw=Symbol("InputSignalNode#UNSET"),OM=ge(L({},du),{transformFn:void 0,applyValueToInputSignal(t,e){Js(t,e)}});function Jw(t,e){let n=Object.create(OM);n.value=t,n.transformFn=e?.transform;function r(){if(Qs(n),n.value===Zw){let i=null;throw new j(-950,i)}return n.value}return r[qt]=n,r}function pa(t){return{toString:t}.toString()}var ju="__parameters__";function LM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function FM(t,e,n){return pa(()=>{let r=LM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(ju)?u[ju]:Object.defineProperty(u,ju,{value:[]})[ju];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ti=globalThis;function Ie(t){for(let e in t)if(t[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function VM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function wt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(wt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function hw(t,e){return t?e?`${t} ${e}`:t:e||""}var jM=Ie({__forward_ref__:Ie});function Xw(t){return t.__forward_ref__=Xw,t.toString=function(){return wt(this())},t}function ht(t){return eT(t)?t():t}function eT(t){return typeof t=="function"&&t.hasOwnProperty(jM)&&t.__forward_ref__===Xw}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ao(t){return{providers:t.providers||[],imports:t.imports||[]}}function vl(t){return fw(t,nT)||fw(t,rT)}function tT(t){return vl(t)!==null}function fw(t,e){return t.hasOwnProperty(e)?t[e]:null}function UM(t){let e=t&&(t[nT]||t[rT]);return e||null}function pw(t){return t&&(t.hasOwnProperty(gw)||t.hasOwnProperty(BM))?t[gw]:null}var nT=Ie({\u0275prov:Ie}),gw=Ie({\u0275inj:Ie}),rT=Ie({ngInjectableDef:Ie}),BM=Ie({ngInjectorDef:Ie}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function iT(t){return t&&!!t.\u0275providers}var $M=Ie({\u0275cmp:Ie}),HM=Ie({\u0275dir:Ie}),zM=Ie({\u0275pipe:Ie}),qM=Ie({\u0275mod:Ie}),Gu=Ie({\u0275fac:Ie}),oa=Ie({__NG_ELEMENT_ID__:Ie}),mw=Ie({__NG_ENV_ID__:Ie});function yo(t){return typeof t=="string"?t:t==null?"":String(t)}function WM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():yo(t)}function oT(t,e){throw new j(-200,t)}function mg(t,e){throw new j(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),xp;function sT(){return xp}function Et(t){let e=xp;return xp=t,e}function aT(t,e,n){let r=vl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;mg(t,"Injector")}var GM={},ni=GM,kp="__NG_DI_FLAG__",Ku=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?hu:ni,r)}},Qu="ngTempTokenPath",KM="ngTokenPath",QM=/\n/gm,YM="\u0275",yw="__source";function ZM(t,e=te.Default){if(Xs()===void 0)throw new j(-203,!1);if(Xs()===null)return aT(t,void 0,e);{let n=Xs(),r;return n instanceof Ku?r=n.injector:r=n,r.get(t,e&te.Optional?null:void 0,e)}}function K(t,e=te.Default){return(sT()||ZM)(ht(t),e)}function x(t,e=te.Default){return K(t,_l(e))}function _l(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Op(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],u=XM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function JM(t,e){return t[kp]=e,t.prototype[kp]=e,t}function XM(t){return t[kp]}function eP(t,e,n,r){let i=t[Qu];throw e[yw]&&i.unshift(e[yw]),t.message=tP(`
`+t.message,i,n,r),t[KM]=i,t[Qu]=null,t}function tP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==YM?t.slice(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):wt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(QM,`
  `)}`}var gi=JM(FM("Optional"),8);function ii(t,e){let n=t.hasOwnProperty(Gu);return n?t[Gu]:null}function yg(t,e){t.forEach(n=>Array.isArray(n)?yg(n,e):e(n))}function cT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function rP(t,e,n){let r=ga(t,e);return r>=0?t[r|1]=n:(r=~r,nP(t,r,e,n)),r}function vp(t,e){let n=ga(t,e);if(n>=0)return t[n|1]}function ga(t,e){return iP(t,e,1)}function iP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var oi={},Lt=[],sa=new B(""),uT=new B("",-1),lT=new B(""),Zu=class{get(e,n=ni){if(n===ni){let r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}};function dT(t,e){let n=t[qM]||null;if(!n&&e===!0)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function vo(t){return t[$M]||null}function oP(t){return t[HM]||null}function sP(t){return t[zM]||null}function Fn(t){return{\u0275providers:t}}function aP(...t){return{\u0275providers:hT(!0,t),\u0275fromNgModule:!0}}function hT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return yg(e,s=>{let a=s;Lp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fT(i,o),n}function fT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];vg(i,o=>{e(o,r)})}}function Lp(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,o=pw(t),s=!o&&vo(t);if(!o&&!s){let u=t.ngModule;if(o=pw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Lp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{yg(o.imports,h=>{Lp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&fT(l,e)}if(!a){let l=ii(i)||(()=>new i);e({provide:i,useFactory:l,deps:Lt},i),e({provide:lT,useValue:i,multi:!0},i),e({provide:sa,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;vg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function vg(t,e){for(let n of t)iT(n)&&(n=n.\u0275providers),Array.isArray(n)?vg(n,e):e(n)}var cP=Ie({provide:String,useValue:Ie});function pT(t){return t!==null&&typeof t=="object"&&cP in t}function uP(t){return!!(t&&t.useExisting)}function lP(t){return!!(t&&t.useFactory)}function _o(t){return typeof t=="function"}function dP(t){return!!t.useClass}var El=new B(""),$u={},vw={},_p;function _g(){return _p===void 0&&(_p=new Zu),_p}var et=class{},aa=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Vp(e,s=>this.processProvider(s)),this.records.set(uT,fo(void 0,this)),i.has("environment")&&this.records.set(et,fo(void 0,this));let o=this.records.get(El);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lT,Lt,te.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?hu:ni,r)}destroy(){ra(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return ra(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ra(this);let n=Nn(this),r=Et(void 0),i;try{return e()}finally{Nn(n),Et(r)}}get(e,n=ni,r=te.Default){if(ra(this),e.hasOwnProperty(mw))return e[mw](this);r=_l(r);let i,o=Nn(this),s=Et(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=mP(e)&&vl(e);l&&this.injectableDefInScope(l)?u=fo(Fp(e),$u):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&te.Self?_g():this.parent;return n=r&te.Optional&&n===ni?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Qu]=a[Qu]||[]).unshift(wt(e)),o)throw a;return eP(a,e,"R3InjectorError",this.source)}else throw a}finally{Et(s),Nn(o)}}resolveInjectorInitializers(){let e=se(null),n=Nn(this),r=Et(void 0),i;try{let o=this.get(sa,Lt,te.Self);for(let s of o)s()}finally{Nn(n),Et(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let n=_o(e)?e:ht(e&&e.provide),r=fP(e);if(!_o(e)&&e.multi===!0){let i=this.records.get(n);i||(i=fo(void 0,$u,!0),i.factory=()=>Op(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=se(null);try{return n.value===vw?oT(wt(e)):n.value===$u&&(n.value=vw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&gP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Fp(t){let e=vl(t),n=e!==null?e.factory:ii(t);if(n!==null)return n;if(t instanceof B)throw new j(204,!1);if(t instanceof Function)return hP(t);throw new j(204,!1)}function hP(t){if(t.length>0)throw new j(204,!1);let n=UM(t);return n!==null?()=>n.factory(t):()=>new t}function fP(t){if(pT(t))return fo(void 0,t.useValue);{let e=gT(t);return fo(e,$u)}}function gT(t,e,n){let r;if(_o(t)){let i=ht(t);return ii(i)||Fp(i)}else if(pT(t))r=()=>ht(t.useValue);else if(lP(t))r=()=>t.useFactory(...Op(t.deps||[]));else if(uP(t))r=(i,o)=>K(ht(t.useExisting),o!==void 0&&o&te.Optional?te.Optional:void 0);else{let i=ht(t&&(t.useClass||t.provide));if(pP(t))r=()=>new i(...Op(t.deps));else return ii(i)||Fp(i)}return r}function ra(t){if(t.destroyed)throw new j(205,!1)}function fo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function pP(t){return!!t.deps}function gP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function mP(t){return typeof t=="function"||typeof t=="object"&&t instanceof B}function Vp(t,e){for(let n of t)Array.isArray(n)?Vp(n,e):n&&iT(n)?Vp(n.\u0275providers,e):e(n)}function tt(t,e){let n;t instanceof aa?(ra(t),n=t):n=new Ku(t);let r,i=Nn(n),o=Et(void 0);try{return e()}finally{Nn(i),Et(o)}}function mT(){return sT()!==void 0||Xs()!=null}function Eg(t){if(!mT())throw new j(-203,!1)}function yP(t){return typeof t=="function"}var Vn=0,le=1,Z=2,ft=3,Kt=4,Qt=5,Ju=6,Xu=7,Mt=8,Eo=9,kn=10,ze=11,ca=12,_w=13,Ro=14,an=15,Io=16,po=17,wo=18,Il=19,yT=20,Ir=21,Ep=22,si=23,Ft=24,Ip=25,jt=26,vT=1;var ai=7,el=8,tl=9,Vt=10;function wr(t){return Array.isArray(t)&&typeof t[vT]=="object"}function jn(t){return Array.isArray(t)&&t[vT]===!0}function Ig(t){return(t.flags&4)!==0}function No(t){return t.componentOffset>-1}function wl(t){return(t.flags&1)===1}function cn(t){return!!t.template}function nl(t){return(t[Z]&512)!==0}function Mo(t){return(t[Z]&256)===256}var jp=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function _T(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ma=(()=>{let t=()=>ET;return t.ngInherit=!0,t})();function ET(t){return t.type.prototype.ngOnChanges&&(t.setInput=_P),vP}function vP(){let t=wT(this),e=t?.current;if(e){let n=t.previous;if(n===oi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function _P(t,e,n,r,i){let o=this.declaredInputs[r],s=wT(t)||EP(t,{previous:oi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new jp(l&&l.currentValue,n,u===oi),_T(t,e,i,n)}var IT="__ngSimpleChanges__";function wT(t){return t[IT]||null}function EP(t,e){return t[IT]=e}var Ew=null;var Te=function(t,e=null,n){Ew?.(t,e,n)},IP="svg",wP="math";function un(t){for(;Array.isArray(t);)t=t[Vn];return t}function TT(t,e){return un(e[t])}function hn(t,e){return un(e[t.index])}function DT(t,e){return t.data[e]}function TP(t,e){return t[e]}function DP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ln(t,e){let n=e[t];return wr(n)?n:n[Vn]}function wg(t){return(t[Z]&128)===128}function bP(t){return jn(t[ft])}function To(t,e){return e==null?null:t[e]}function bT(t){t[po]=0}function CT(t){t[Z]&1024||(t[Z]|=1024,wg(t)&&ya(t))}function CP(t,e){for(;t>0;)e=e[Ro],t--;return e}function Tl(t){return!!(t[Z]&9216||t[Ft]?.dirty)}function Up(t){t[kn].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),Tl(t)&&ya(t)}function ya(t){t[kn].changeDetectionScheduler?.notify(0);let e=ci(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!wg(e)));)e=ci(e)}function ST(t,e){if(Mo(t))throw new j(911,!1);t[Ir]===null&&(t[Ir]=[]),t[Ir].push(e)}function SP(t,e){if(t[Ir]===null)return;let n=t[Ir].indexOf(e);n!==-1&&t[Ir].splice(n,1)}function ci(t){let e=t[ft];return jn(e)?e[ft]:e}function AT(t){return t[Xu]??=[]}function RT(t){return t.cleanup??=[]}var ce={lFrame:VT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Bp=!1;function AP(){return ce.lFrame.elementDepthCount}function RP(){ce.lFrame.elementDepthCount++}function NP(){ce.lFrame.elementDepthCount--}function Tg(){return ce.bindingsEnabled}function MP(){return ce.skipHydrationRootTNode!==null}function PP(t){return ce.skipHydrationRootTNode===t}function xP(){ce.skipHydrationRootTNode=null}function we(){return ce.lFrame.lView}function Tt(){return ce.lFrame.tView}function Dt(){let t=NT();for(;t!==null&&t.type===64;)t=t.parent;return t}function NT(){return ce.lFrame.currentTNode}function kP(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function mi(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function Dg(){return ce.lFrame.isParent}function MT(){ce.lFrame.isParent=!1}function PT(){return Bp}function rl(t){let e=Bp;return Bp=t,e}function xT(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function OP(){return ce.lFrame.bindingIndex}function LP(t){return ce.lFrame.bindingIndex=t}function bg(){return ce.lFrame.bindingIndex++}function kT(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function FP(){return ce.lFrame.inI18n}function VP(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,$p(e)}function jP(){return ce.lFrame.currentDirectiveIndex}function $p(t){ce.lFrame.currentDirectiveIndex=t}function UP(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function OT(t){ce.lFrame.currentQueryIndex=t}function BP(t){let e=t[le];return e.type===2?e.declTNode:e.type===1?t[Qt]:null}function LT(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=BP(o),i===null||(o=o[Ro],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ce.lFrame=FT();return r.currentTNode=e,r.lView=t,!0}function Cg(t){let e=FT(),n=t[le];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function FT(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?VT(t):e}function VT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jT(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var UT=jT;function Sg(){let t=jT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $P(t){return(ce.lFrame.contextLView=CP(t,ce.lFrame.contextLView))[Mt]}function yi(){return ce.lFrame.selectedIndex}function ui(t){ce.lFrame.selectedIndex=t}function BT(){let t=ce.lFrame;return DT(t.tView,t.selectedIndex)}function HP(){return ce.lFrame.currentNamespace}var $T=!0;function Dl(){return $T}function bl(t){$T=t}function zP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ET(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Ag(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Hu(t,e,n){HT(t,e,3,n)}function zu(t,e,n,r){(t[Z]&3)===n&&HT(t,e,n,r)}function wp(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function HT(t,e,n,r){let i=r!==void 0?t[po]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[po]+=65536),(a<o||o==-1)&&(qP(t,n,e,u),t[po]=(t[po]&4294901760)+u+2),u++}function Iw(t,e){Te(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Te(5,t,e)}}function qP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Z]>>14<t[po]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,Iw(a,o)):Iw(a,o)}var mo=-1,li=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function WP(t){return(t.flags&8)!==0}function GP(t){return(t.flags&16)!==0}function KP(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];QP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function zT(t){return t===3||t===4||t===6}function QP(t){return t.charCodeAt(0)===64}function Do(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ww(t,n,i,null,e[++r]):ww(t,n,i,null,null))}}return t}function ww(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function qT(t){return t!==mo}function il(t){return t&32767}function YP(t){return t>>16}function ol(t,e){let n=YP(t),r=e;for(;n>0;)r=r[Ro],n--;return r}var Hp=!0;function sl(t){let e=Hp;return Hp=t,e}var ZP=256,WT=ZP-1,GT=5,JP=0,sn={};function XP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(oa)&&(r=n[oa]),r==null&&(r=n[oa]=JP++);let i=r&WT,o=1<<i;e.data[t+(i>>GT)]|=o}function al(t,e){let n=KT(t,e);if(n!==-1)return n;let r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,Tp(r.data,t),Tp(e,null),Tp(r.blueprint,null));let i=Rg(t,e),o=t.injectorIndex;if(qT(i)){let s=il(i),a=ol(i,e),u=a[le].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Tp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function KT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Rg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=XT(i),r===null)return mo;if(n++,i=i[Ro],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return mo}function zp(t,e,n){XP(t,e,n)}function ex(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(zT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function QT(t,e,n){if(n&te.Optional||t!==void 0)return t;mg(e,"NodeInjector")}function YT(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),(n&(te.Self|te.Host))===0){let i=t[Eo],o=Et(void 0);try{return i?i.get(e,r,n&te.Optional):aT(e,r,n&te.Optional)}finally{Et(o)}}return QT(r,e,n)}function ZT(t,e,n,r=te.Default,i){if(t!==null){if(e[Z]&2048&&!(r&te.Self)){let s=ox(t,e,n,r,sn);if(s!==sn)return s}let o=JT(t,e,n,r,sn);if(o!==sn)return o}return YT(e,n,r,i)}function JT(t,e,n,r,i){let o=rx(n);if(typeof o=="function"){if(!LT(e,t,r))return r&te.Host?QT(i,n,r):YT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))mg(n);else return s}finally{UT()}}else if(typeof o=="number"){let s=null,a=KT(t,e),u=mo,l=r&te.Host?e[an][Qt]:null;for((a===-1||r&te.SkipSelf)&&(u=a===-1?Rg(t,e):e[a+8],u===mo||!Dw(r,!1)?a=-1:(s=e[le],a=il(u),e=ol(u,e)));a!==-1;){let h=e[le];if(Tw(o,a,h.data)){let p=tx(a,e,n,s,r,l);if(p!==sn)return p}u=e[a+8],u!==mo&&Dw(r,e[le].data[a+8]===l)&&Tw(o,a,e)?(s=h,a=il(u),e=ol(u,e)):a=-1}}return i}function tx(t,e,n,r,i,o){let s=e[le],a=s.data[t+8],u=r==null?No(a)&&Hp:r!=s&&(a.type&3)!==0,l=i&te.Host&&o===a,h=nx(a,s,n,u,l);return h!==null?cl(e,s,h,a,i):sn}function nx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let m=p;m<y;m++){let D=s[m];if(m<u&&n===D||m>=u&&D.type===n)return m}if(i){let m=s[u];if(m&&cn(m)&&m.type===n)return u}return null}function cl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof li){let a=o;a.resolving&&oT(WM(s[n]));let u=sl(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?Et(a.injectImpl):null,p=LT(t,r,te.Default);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&zP(n,s[n],e)}finally{h!==null&&Et(h),sl(u),a.resolving=!1,UT()}}return o}function rx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(oa)?t[oa]:void 0;return typeof e=="number"?e>=0?e&WT:ix:e}function Tw(t,e,n){let r=1<<t;return!!(n[e+(t>>GT)]&r)}function Dw(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var ri=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ZT(this._tNode,this._lView,e,_l(r),n)}};function ix(){return new ri(Dt(),we())}function Ng(t){return pa(()=>{let e=t.prototype.constructor,n=e[Gu]||qp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Gu]||qp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qp(t){return eT(t)?()=>{let e=qp(ht(t));return e&&e()}:ii(t)}function ox(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!nl(s);){let a=JT(o,s,n,r|te.Self,sn);if(a!==sn)return a;let u=o.parent;if(!u){let l=s[yT];if(l){let h=l.get(n,sn,r);if(h!==sn)return h}u=XT(s),s=s[Ro]}o=u}return i}function XT(t){let e=t[le],n=e.type;return n===2?e.declTNode:n===1?t[Qt]:null}function Mg(t){return ex(Dt(),t)}function bw(t,e=null,n=null,r){let i=eD(t,e,n,r);return i.resolveInjectorInitializers(),i}function eD(t,e=null,n=null,r,i=new Set){let o=[n||Lt,aP(t)];return r=r||(typeof t=="object"?void 0:wt(t)),new aa(o,e||_g(),r||null,i)}var pt=class t{static THROW_IF_NOT_FOUND=ni;static NULL=new Zu;static create(e,n){if(Array.isArray(e))return bw({name:""},n,e,"");{let r=e.name??"";return bw({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>K(uT)});static __NG_ELEMENT_ID__=-1};var sx=new B("");sx.__NG_ELEMENT_ID__=t=>{let e=Dt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new j(204,!1)};var tD=!1,Tr=(()=>{class t{static __NG_ELEMENT_ID__=ax;static __NG_ENV_ID__=n=>n}return t})(),ul=class extends Tr{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return Mo(n)?(e(),()=>{}):(ST(n,e),()=>SP(n,e))}};function ax(){return new ul(we())}var di=class{},Pg=new B("",{providedIn:"root",factory:()=>!1});var nD=new B(""),rD=new B(""),Un=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Je(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Cl=(()=>{class t{internalPendingTasks=x(Un);scheduler=x(di);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return _(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wp=class extends He{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,mT()&&(this.destroyRef=x(Tr,{optional:!0})??void 0,this.pendingTasks=x(Un,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ne&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},It=Wp;function ua(...t){}function iD(t){let e,n;function r(){t=ua;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Cw(t){return queueMicrotask(()=>t()),()=>{t=ua}}var xg="isAngularZone",ll=xg+"_ID",cx=0,ve=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new It(!1);onMicrotaskEmpty=new It(!1);onStable=new It(!1);onError=new It(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=tD}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,dx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ux,ua,ua);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ux={};function kg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function lx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){iD(()=>{t.callbackScheduled=!1,Gp(t),t.isCheckStableRunning=!0,kg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Gp(t)}function dx(t){let e=()=>{lx(t)},n=cx++;t._inner=t._inner.fork({name:"angular",properties:{[xg]:!0,[ll]:n,[ll+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(hx(u))return r.invokeTask(o,s,a,u);try{return Sw(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Aw(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Sw(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!fx(u)&&e(),Aw(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Gp(t),kg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Gp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Sw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Aw(t){t._nesting--,kg(t)}var Kp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new It;onMicrotaskEmpty=new It;onStable=new It;onError=new It;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function hx(t){return oD(t,"__ignore_ng_zone__")}function fx(t){return oD(t,"__scheduler_tick__")}function oD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var On=class{_console=console;handleError(e){this._console.error("ERROR",e)}},px=new B("",{providedIn:"root",factory:()=>{let t=x(ve),e=x(On);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function Rw(t,e){return Jw(t,e)}function gx(t){return Jw(Zw,t)}var sD=(Rw.required=gx,Rw);function mx(){return Sl(Dt(),we())}function Sl(t,e){return new va(hn(t,e))}var va=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=mx}return t})();function yx(t,e){let n=Zf(t,e?.equal),r=n[qt];return n.set=i=>Js(r,i),n.update=i=>Jf(r,i),n.asReadonly=vx.bind(n),n}function vx(){let t=this[qt];if(t.readonlyFn===void 0){let e=()=>this();e[qt]=t,t.readonlyFn=e}return t.readonlyFn}function aD(t){return(t.flags&128)===128}var cD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(cD||{}),uD=new Map,_x=0;function Ex(){return _x++}function Ix(t){uD.set(t[Il],t)}function Qp(t){uD.delete(t[Il])}var Nw="__ngContext__";function Po(t,e){wr(e)?(t[Nw]=e[Il],Ix(e)):t[Nw]=e}function lD(t){return hD(t[ca])}function dD(t){return hD(t[Kt])}function hD(t){for(;t!==null&&!jn(t);)t=t[Kt];return t}var Yp;function fD(t){Yp=t}function wx(){if(Yp!==void 0)return Yp;if(typeof document<"u")return document;throw new j(210,!1)}var Og=new B("",{providedIn:"root",factory:()=>Tx}),Tx="ng",Lg=new B(""),vi=new B("",{providedIn:"platform",factory:()=>"unknown"});var Fg=new B("",{providedIn:"root",factory:()=>wx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Dx="h",bx="b";var pD=!1,Cx=new B("",{providedIn:"root",factory:()=>pD});var gD=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(gD||{}),Al=new B(""),Mw=new Set;function Vg(t){Mw.has(t)||(Mw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var mD=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Sx}return t})();function Sx(){return new mD(we(),Dt())}var Ax=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();var Rx=(t,e,n,r)=>{};function Nx(t,e,n,r){Rx(t,e,n,r)}var Mx=()=>null;function yD(t,e,n=!1){return Mx(t,e,n)}function vD(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];OT(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function Zp(t,e,n){OT(0);let r=se(null);try{e(t,n)}finally{se(r)}}function jg(t,e,n){if(Ig(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var dn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(dn||{});var Uu;function Px(){if(Uu===void 0&&(Uu=null,ti.trustedTypes))try{Uu=ti.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Uu}function Pw(t){return Px()?.createScriptURL(t)||t}var dl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yw})`}};function Ug(t){return t instanceof dl?t.changingThisBreaksApplicationSecurity:t}function _D(t,e){let n=xx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Yw})`)}return n===e}function xx(t){return t instanceof dl&&t.getTypeName()||null}var kx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ox(t){return t=String(t),t.match(kx)?t:"unsafe:"+t}var Bg=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Bg||{});function Lx(t){let e=ID();return e?e.sanitize(Bg.URL,t)||"":_D(t,"URL")?Ug(t):Ox(yo(t))}function Fx(t){let e=ID();if(e)return Pw(e.sanitize(Bg.RESOURCE_URL,t)||"");if(_D(t,"ResourceURL"))return Pw(Ug(t));throw new j(904,!1)}function Vx(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Fx:Lx}function ED(t,e,n){return Vx(e,n)(t)}function ID(){let t=we();return t&&t[kn].sanitizer}var jx=/^>|^->|<!--|-->|--!>|<!-$/g,Ux=/(<|>)/g,Bx="\u200B$1\u200B";function $x(t){return t.replace(jx,e=>e.replace(Ux,Bx))}function wD(t){return t instanceof Function?t():t}function Hx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var TD="ng-template";function zx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Hx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if($g(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function $g(t){return t.type===4&&t.value!==TD}function qx(t,e,n){let r=t.type===4&&!n?TD:t.value;return e===r}function Wx(t,e,n){let r=4,i=t.attrs,o=i!==null?Qx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Gt(r)&&!Gt(u))return!1;if(s&&Gt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!qx(t,u,n)||u===""&&e.length===1){if(Gt(r))return!1;s=!0}}else if(r&8){if(i===null||!zx(t,i,u,n)){if(Gt(r))return!1;s=!0}}else{let l=e[++a],h=Gx(u,i,$g(t),n);if(h===-1){if(Gt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Gt(r))return!1;s=!0}}}}return Gt(r)||s}function Gt(t){return(t&1)===0}function Gx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Yx(e,t)}function Kx(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wx(t,e[r],n))return!0;return!1}function Qx(t){for(let e=0;e<t.length;e++){let n=t[e];if(zT(n))return e}return t.length}function Yx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function xw(t,e){return t?":not("+e.trim()+")":e}function Zx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gt(s)&&(e+=xw(o,i),i=""),r=s,o=o||!Gt(r);n++}return i!==""&&(e+=xw(o,i)),e}function Jx(t){return t.map(Zx).join(",")}function Xx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Gt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Bn={};function ek(t,e){return t.createText(e)}function tk(t,e,n){t.setValue(e,n)}function nk(t,e){return t.createComment($x(e))}function DD(t,e,n){return t.createElement(e,n)}function hl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function bD(t,e,n){t.appendChild(e,n)}function kw(t,e,n,r,i){r!==null?hl(t,e,n,r,i):bD(t,e,n)}function rk(t,e,n){t.removeChild(null,e,n)}function ik(t,e,n){t.setAttribute(e,"style",n)}function ok(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function CD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&KP(t,e,r),i!==null&&ok(t,e,i),o!==null&&ik(t,e,o)}function Hg(t,e,n,r,i,o,s,a,u,l,h){let p=jt+r,y=p+i,m=sk(p,y),D=typeof l=="function"?l():l;return m[le]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function sk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Bn);return n}function ak(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Hg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function zg(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Vn]=i,p[Z]=r|4|128|8|64|1024,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),bT(p),p[ft]=p[Ro]=t,p[Mt]=n,p[kn]=s||t&&t[kn],p[ze]=a||t&&t[ze],p[Eo]=u||t&&t[Eo]||null,p[Qt]=o,p[Il]=Ex(),p[Ju]=h,p[yT]=l,p[an]=e.type==2?t[an]:p,p}function ck(t,e,n){let r=hn(e,t),i=ak(n),o=t[kn].rendererFactory,s=qg(t,zg(t,i,null,SD(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function SD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function AD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function qg(t,e){return t[ca]?t[_w][Kt]=e:t[ca]=e,t[_w]=e,e}function g5(t=1){RD(Tt(),we(),yi()+t,!1)}function RD(t,e,n,r){if(!r)if((e[Z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Hu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&zu(e,o,0,n)}ui(n)}var Rl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Rl||{});function Jp(t,e,n,r){let i=se(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Rl.SignalBased)!==0&&(u=e[o][qt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):_T(e,u,o,r)}finally{se(i)}}function ND(t,e,n,r,i){let o=yi(),s=r&2;try{ui(-1),s&&e.length>jt&&RD(t,e,jt,!1),Te(s?2:0,i),n(r,i)}finally{ui(o),Te(s?3:1,i)}}function Nl(t,e,n){gk(t,e,n),(n.flags&64)===64&&mk(t,e,n)}function Wg(t,e,n=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function uk(t,e,n,r){let o=r.get(Cx,pD)||n===dn.ShadowDom,s=t.selectRootElement(e,o);return lk(s),s}function lk(t){dk(t)}var dk=()=>null;function hk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function fk(t,e,n,r,i,o,s,a){if(!a&&Kg(e,t,n,r,i)){No(e)&&pk(n,e.index);return}if(e.type&3){let u=hn(e,n);r=hk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function pk(t,e){let n=ln(e,t);n[Z]&16||(n[Z]|=64)}function gk(t,e,n){let r=n.directiveStart,i=n.directiveEnd;No(n)&&ck(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||al(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=cl(e,t,s,n);if(Po(u,e),o!==null&&Ek(e,s-r,u,a,n,o),cn(a)){let l=ln(n.index,e);l[Mt]=cl(e,t,s,n)}}}function mk(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=jP();try{ui(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];$p(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&yk(u,l)}}finally{ui(-1),$p(s)}}function yk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Gg(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Kx(e,o.selectors,!1)&&(r??=[],cn(o)?r.unshift(o):r.push(o))}return r}function vk(t,e,n,r,i,o){let s=hn(t,e);_k(e[ze],s,o,t.value,n,r,i)}function _k(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?yo(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Ek(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Jp(r,n,u,l)}}function Ik(t,e){let n=t[Eo],r=n?n.get(On,null):null;r&&r.handleError(e)}function Kg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Jp(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Jp(h,l,r,i),a=!0}return a}function wk(t,e){let n=ln(e,t),r=n[le];Tk(r,n);let i=n[Vn];i!==null&&n[Ju]===null&&(n[Ju]=yD(i,n[Eo])),Te(18),Qg(r,n,n[Mt]),Te(19,n[Mt])}function Tk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Qg(t,e,n){Cg(e);try{let r=t.viewQuery;r!==null&&Zp(1,r,n);let i=t.template;i!==null&&ND(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[wo]?.finishViewCreation(t),t.staticContentQueries&&vD(t,e),t.staticViewQueries&&Zp(2,t.viewQuery,n);let o=t.components;o!==null&&Dk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,Sg()}}function Dk(t,e){for(let n=0;n<e.length;n++)wk(t,e[n])}function bk(t,e,n,r){let i=se(null);try{let o=e.tView,a=t[Z]&4096?4096:16,u=zg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Io]=l;let h=t[wo];return h!==null&&(u[wo]=h.createEmbeddedView(o)),Qg(o,u,n),u}finally{se(i)}}function Ow(t,e){return!e||e.firstChild===null||aD(t)}var Ck;function Yg(t,e){return Ck(t,e)}var Ln=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ln||{});function MD(t){return(t.flags&32)===32}function go(t,e,n,r,i){if(r!=null){let o,s=!1;jn(r)?o=r:wr(r)&&(s=!0,r=r[Vn]);let a=un(r);t===0&&n!==null?i==null?bD(e,n,a):hl(e,n,a,i||null,!0):t===1&&n!==null?hl(e,n,a,i||null,!0):t===2?rk(e,a,s):t===3&&e.destroyNode(a),o!=null&&Vk(e,t,o,n,i)}}function Sk(t,e){PD(t,e),e[Vn]=null,e[Qt]=null}function Ak(t,e,n,r,i,o){r[Vn]=i,r[Qt]=e,Pl(t,r,n,1,i,o)}function PD(t,e){e[kn].changeDetectionScheduler?.notify(9),Pl(t,e,e[ze],2,null,null)}function Rk(t){let e=t[ca];if(!e)return Dp(t[le],t);for(;e;){let n=null;if(wr(e))n=e[ca];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[Kt]&&e!==t;)wr(e)&&Dp(e[le],e),e=e[ft];e===null&&(e=t),wr(e)&&Dp(e[le],e),n=e&&e[Kt]}e=n}}function Zg(t,e){let n=t[tl],r=n.indexOf(e);n.splice(r,1)}function xD(t,e){if(Mo(e))return;let n=e[ze];n.destroyNode&&Pl(t,e,n,3,null,null),Rk(e)}function Dp(t,e){if(Mo(e))return;let n=se(null);try{e[Z]&=-129,e[Z]|=256,e[Ft]&&Zs(e[Ft]),Mk(t,e),Nk(t,e),e[le].type===1&&e[ze].destroy();let r=e[Io];if(r!==null&&jn(e[ft])){r!==e[ft]&&Zg(r,e);let i=e[wo];i!==null&&i.detachView(t)}Qp(e)}finally{se(n)}}function Nk(t,e){let n=t.cleanup,r=e[Xu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Xu]=null);let i=e[Ir];if(i!==null){e[Ir]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[si];if(o!==null){e[si]=null;for(let s of o)s.destroy()}}function Mk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof li)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Te(4,a,u);try{u.call(a)}finally{Te(5,a,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function Pk(t,e,n){return xk(t,e.parent,n)}function xk(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Vn];if(No(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===dn.None||i===dn.Emulated)return null}return hn(r,n)}function kk(t,e,n){return Lk(t,e,n)}function Ok(t,e,n){return t.type&40?hn(t,n):null}var Lk=Ok,Lw;function Ml(t,e,n,r){let i=Pk(t,r,e),o=e[ze],s=r.parent||e[Qt],a=kk(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)kw(o,i,n[u],a,!1);else kw(o,i,n,a,!1);Lw!==void 0&&Lw(o,r,e,n,i)}function ia(t,e){if(e!==null){let n=e.type;if(n&3)return hn(e,t);if(n&4)return Xp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ia(t,r);{let i=t[e.index];return jn(i)?Xp(-1,i):un(i)}}else{if(n&128)return ia(t,e.next);if(n&32)return Yg(e,t)()||un(t[e.index]);{let r=kD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ci(t[an]);return ia(i,r)}else return ia(t,e.next)}}}return null}function kD(t,e){if(e!==null){let r=t[an][Qt],i=e.projection;return r.projection[i]}return null}function Xp(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[le].firstChild;if(i!==null)return ia(r,i)}return e[ai]}function Jg(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Po(un(a),r),n.flags|=2),!MD(n))if(u&8)Jg(t,e,n.child,r,i,o,!1),go(e,t,i,a,o);else if(u&32){let l=Yg(n,r),h;for(;h=l();)go(e,t,i,h,o);go(e,t,i,a,o)}else u&16?Fk(t,e,r,n,i,o):go(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Pl(t,e,n,r,i,o){Jg(n,r,t.firstChild,e,i,o,!1)}function Fk(t,e,n,r,i,o){let s=n[an],u=s[Qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];go(e,t,i,h,o)}else{let l=u,h=s[ft];aD(r)&&(l.flags|=128),Jg(t,e,l,h,i,o,!0)}}function Vk(t,e,n,r,i){let o=n[ai],s=un(n);o!==s&&go(e,t,r,o,i);for(let a=Vt;a<n.length;a++){let u=n[a];Pl(u[le],u,t,e,r,o)}}function jk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ln.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ln.Important),t.setStyle(n,r,i,o))}}function fl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(un(o)),jn(o)&&Uk(o,r);let s=n.type;if(s&8)fl(t,e,n.child,r);else if(s&32){let a=Yg(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=kD(e,n);if(Array.isArray(a))r.push(...a);else{let u=ci(e[an]);fl(u[le],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Uk(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[le].firstChild;i!==null&&fl(r[le],r,i,e)}t[ai]!==t[Vn]&&e.push(t[ai])}function OD(t){if(t[Ip]!==null){for(let e of t[Ip])e.impl.addSequence(e);t[Ip].length=0}}var LD=[];function Bk(t){return t[Ft]??$k(t)}function $k(t){let e=LD.pop()??Object.create(zk);return e.lView=t,e}function Hk(t){t.lView[Ft]!==t&&(t.lView=null,LD.push(t))}var zk=ge(L({},Ji),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ya(t.lView)},consumerOnSignalRead(){this.lView[Ft]=this}});function qk(t){let e=t[Ft]??Object.create(Wk);return e.lView=t,e}var Wk=ge(L({},Ji),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ci(t.lView);for(;e&&!FD(e[le]);)e=ci(e);e&&CT(e)},consumerOnSignalRead(){this.lView[Ft]=this}});function FD(t){return t.type!==2}function VD(t){if(t[si]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[si])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Z]&8192)}}var Gk=100;function jD(t,e=!0,n=0){let i=t[kn].rendererFactory,o=!1;o||i.begin?.();try{Kk(t,n)}catch(s){throw e&&Ik(t,s),s}finally{o||i.end?.()}}function Kk(t,e){let n=PT();try{rl(!0),eg(t,e);let r=0;for(;Tl(t);){if(r===Gk)throw new j(103,!1);r++,eg(t,1)}}finally{rl(n)}}function Qk(t,e,n,r){if(Mo(e))return;let i=e[Z],o=!1,s=!1;Cg(e);let a=!0,u=null,l=null;o||(FD(t)?(l=Bk(e),u=Ys(l)):qf()===null?(a=!1,l=qk(e),u=Ys(l)):e[Ft]&&(Zs(e[Ft]),e[Ft]=null));try{bT(e),LP(t.bindingStartIndex),n!==null&&ND(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let m=t.preOrderCheckHooks;m!==null&&Hu(e,m,null)}else{let m=t.preOrderHooks;m!==null&&zu(e,m,0,null),wp(e,0)}if(s||Yk(e),VD(e),UD(e,0),t.contentQueries!==null&&vD(t,e),!o)if(h){let m=t.contentCheckHooks;m!==null&&Hu(e,m)}else{let m=t.contentHooks;m!==null&&zu(e,m,1),wp(e,1)}Jk(t,e);let p=t.components;p!==null&&$D(e,p,0);let y=t.viewQuery;if(y!==null&&Zp(2,y,r),!o)if(h){let m=t.viewCheckHooks;m!==null&&Hu(e,m)}else{let m=t.viewHooks;m!==null&&zu(e,m,2),wp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ep]){for(let m of e[Ep])m();e[Ep]=null}o||(OD(e),e[Z]&=-73)}catch(h){throw o||ya(e),h}finally{l!==null&&(au(l,u),a&&Hk(l)),Sg()}}function UD(t,e){for(let n=lD(t);n!==null;n=dD(n))for(let r=Vt;r<n.length;r++){let i=n[r];BD(i,e)}}function Yk(t){for(let e=lD(t);e!==null;e=dD(e)){if(!(e[Z]&2))continue;let n=e[tl];for(let r=0;r<n.length;r++){let i=n[r];CT(i)}}}function Zk(t,e,n){Te(18);let r=ln(e,t);BD(r,n),Te(19,r[Mt])}function BD(t,e){wg(t)&&eg(t,e)}function eg(t,e){let r=t[le],i=t[Z],o=t[Ft],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&cu(o)),s||=!1,o&&(o.dirty=!1),t[Z]&=-9217,s)Qk(r,t,r.template,t[Mt]);else if(i&8192){VD(t),UD(t,1);let a=r.components;a!==null&&$D(t,a,1),OD(t)}}function $D(t,e,n){for(let r=0;r<e.length;r++)Zk(t,e[r],n)}function Jk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ui(~i);else{let o=i,s=n[++r],a=n[++r];VP(s,o);let u=e[o];Te(24,u),a(2,u),Te(25,u)}}}finally{ui(-1)}}function Xg(t,e){let n=PT()?64:1088;for(t[kn].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=ci(t);if(nl(t)&&!r)return t;t=r}return null}function HD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Xk(t,e,n,r=!0){let i=e[le];if(eO(i,e,t,n),r){let s=Xp(n,t),a=e[ze],u=a.parentNode(t[ai]);u!==null&&Ak(i,t[Qt],a,e,u,s)}let o=e[Ju];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function tg(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[Io];i!==null&&i!==t&&Zg(i,r),e>0&&(t[n-1][Kt]=r[Kt]);let o=Yu(t,Vt+e);Sk(r[le],r);let s=o[wo];s!==null&&s.detachView(o[le]),r[ft]=null,r[Kt]=null,r[Z]&=-129}return r}function eO(t,e,n,r){let i=Vt+r,o=n.length;r>0&&(n[i-1][Kt]=e),r<o-Vt?(e[Kt]=n[i],cT(n,Vt+r,e)):(n.push(e),e[Kt]=null),e[ft]=n;let s=e[Io];s!==null&&n!==s&&zD(s,e);let a=e[wo];a!==null&&a.insertView(t),Up(e),e[Z]|=128}function zD(t,e){let n=t[tl],r=e[ft];if(wr(r))t[Z]|=2;else{let i=r[ft][an];e[an]!==i&&(t[Z]|=2)}n===null?t[tl]=[e]:n.push(e)}var la=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[le];return fl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Mt]}set context(e){this._lView[Mt]=e}get destroyed(){return Mo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(jn(e)){let n=e[el],r=n?n.indexOf(this):-1;r>-1&&(tg(e,r),Yu(n,r))}this._attachedToViewContainer=!1}xD(this._lView[le],this._lView)}onDestroy(e){ST(this._lView,e)}markForCheck(){Xg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){Up(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,jD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nl(this._lView),n=this._lView[Io];n!==null&&!e&&Zg(n,this._lView),PD(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=nl(this._lView),r=this._lView[Io];r!==null&&!n&&zD(r,this._lView),Up(this._lView)}};var em=(()=>{class t{static __NG_ELEMENT_ID__=rO}return t})(),tO=em,nO=class extends tO{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=bk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new la(i)}};function rO(){return iO(Dt(),we())}function iO(t,e){return t.type&4?new nO(e,t,Sl(t,e)):null}function xl(t,e,n,r,i){let o=t.data[e];if(o===null)o=oO(t,e,n,r,i),FP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=kP();o.injectorIndex=s===null?-1:s.injectorIndex}return mi(o,!0),o}function oO(t,e,n,r,i){let o=NT(),s=Dg(),a=s?o:o&&o.parent,u=t.data[e]=aO(t,a,n,e,r,i);return sO(t,u,o,s),u}function sO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function aO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return MP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var v5=new RegExp(`^(\\d+)*(${bx}|${Dx})*(.*)`);var cO=()=>null;function Fw(t,e){return cO(t,e)}var uO=class{},qD=class{},ng=class{resolveComponentFactory(e){throw Error(`No component factory found for ${wt(e)}.`)}},kl=class{static NULL=new ng},bo=class{},Ol=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>lO()}return t})();function lO(){let t=we(),e=Dt(),n=ln(e.index,t);return(wr(n)?n:t)[ze]}var dO=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var bp={},rg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=_l(r);let i=this.injector.get(e,bp,r);return i!==bp||n===bp?i:this.parentInjector.get(e,n,r)}};function ig(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=hw(i,a);else if(o==2){let u=a,l=e[++s];r=hw(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function qe(t,e=te.Default){let n=we();if(n===null)return K(t,e);let r=Dt();return ZT(r,n,ht(t),e)}function tm(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=fO(s);h===null?a=s:[a,u,l]=h,mO(t,e,n,a,o,u,l)}o!==null&&r!==null&&hO(n,r,o)}function hO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function fO(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&cn(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,pO(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function pO(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function gO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let y=0;y<a;y++){let m=r[y];!u&&cn(m)&&(u=!0,gO(t,n,y)),zp(al(n,e),t,m.type)}wO(n,t.data.length,a);for(let y=0;y<a;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=AD(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let y=0;y<a;y++){let m=r[y];if(n.mergedAttrs=Do(n.mergedAttrs,m.hostAttrs),vO(t,n,e,p,m),IO(p,m,i),s!==null&&s.has(m)){let[N,R]=s.get(m);n.directiveToIndex.set(m.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(m))&&n.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let D=m.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}yO(t,n,o)}function yO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Vw(0,e,i,r),Vw(1,e,i,r),Uw(e,r,!1);else{let o=n.get(i);jw(0,e,o,r),jw(1,e,o,r),Uw(e,r,!0)}}}function Vw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),WD(e,o)}}function jw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),WD(e,s)}}function WD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Uw(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||$g(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function vO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ii(i.type,!0)),s=new li(o,cn(i),qe);t.blueprint[r]=s,n[r]=s,_O(t,e,r,AD(t,n,i.hostVars,Bn),i)}function _O(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;EO(s)!=a&&s.push(a),s.push(n,r,o)}}function EO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;cn(e)&&(n[""]=t)}}function wO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function GD(t,e,n,r,i,o,s,a){let u=e.consts,l=To(u,s),h=xl(e,t,2,r,l);return o&&tm(e,n,h,To(u,a),i),h.mergedAttrs=Do(h.mergedAttrs,h.attrs),h.attrs!==null&&ig(h,h.attrs,!1),h.mergedAttrs!==null&&ig(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function KD(t,e){Ag(t,e),Ig(e)&&t.queries.elementEnd(e)}var pl=class extends kl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vo(e);return new da(n,this.ngModule)}};function TO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Rl.SignalBased)!==0};return i&&(o.transform=i),o})}function DO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function bO(t,e,n){let r=e instanceof et?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new rg(n,r):n}function CO(t){let e=t.get(bo,null);if(e===null)throw new j(407,!1);let n=t.get(dO,null),r=t.get(di,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function SO(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return DD(e,n,n==="svg"?IP:n==="math"?wP:null)}var da=class extends qD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=TO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=DO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Jx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){Te(22);let o=se(null);try{let s=this.componentDef,a=r?["ng-version","19.2.14"]:Xx(this.componentDef.selectors[0]),u=Hg(0,null,null,1,0,null,null,null,null,[a],null),l=bO(s,i||this.ngModule,e),h=CO(l),p=h.rendererFactory.createRenderer(null,s),y=r?uk(p,r,s.encapsulation,l):SO(s,p),m=zg(null,u,null,512|SD(s),null,null,h,p,l,null,yD(y,l,!0));m[jt]=y,Cg(m);let D=null;try{let N=GD(jt,u,m,"#host",()=>[this.componentDef],!0,0);y&&(CD(p,y,N),Po(y,m)),Nl(u,m,N),jg(u,N,m),KD(u,N),n!==void 0&&AO(N,this.ngContentSelectors,n),D=ln(N.index,m),m[Mt]=D[Mt],Qg(u,m,null)}catch(N){throw D!==null&&Qp(D),Qp(m),N}finally{Te(23),Sg()}return new og(this.componentType,m)}finally{se(o)}}},og=class extends uO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=DT(n[le],jt),this.location=Sl(this._tNode,n),this.instance=ln(this._tNode.index,n)[Mt],this.hostView=this.changeDetectorRef=new la(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Kg(r,i[le],i,e,n);this.previousInputValues.set(e,n);let s=ln(r.index,i);Xg(s,1)}get injector(){return new ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var _a=(()=>{class t{static __NG_ELEMENT_ID__=RO}return t})();function RO(){let t=Dt();return MO(t,we())}var NO=_a,QD=class extends NO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Sl(this._hostTNode,this._hostLView)}get injector(){return new ri(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rg(this._hostTNode,this._hostLView);if(qT(e)){let n=ol(e,this._hostLView),r=il(e),i=n[le].data[r+8];return new ri(i,n)}else return new ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Bw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Fw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ow(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!yP(e),a;if(s)a=n;else{let D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new da(vo(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(et,null);N&&(o=N)}let h=vo(u.componentType??{}),p=Fw(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,a,Ow(this._hostTNode,p)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ft],l=new QD(u,u[Qt],u[ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Xk(s,i,o,r),e.attachToViewContainerRef(),cT(Cp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Bw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=tg(this._lContainer,n);r&&(Yu(Cp(this._lContainer),n),xD(r[le],r))}detach(e){let n=this._adjustIndex(e,-1),r=tg(this._lContainer,n);return r&&Yu(Cp(this._lContainer),n)!=null?new la(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Bw(t){return t[el]}function Cp(t){return t[el]||(t[el]=[])}function MO(t,e){let n,r=e[t.index];return jn(r)?n=r:(n=HD(r,e,null,t),e[t.index]=n,qg(e,n)),xO(n,e,t,r),new QD(n,t,e)}function PO(t,e){let n=t[ze],r=n.createComment(""),i=hn(e,t),o=n.parentNode(i);return hl(n,o,r,n.nextSibling(i),!1),r}var xO=LO,kO=()=>!1;function OO(t,e,n){return kO(t,e,n)}function LO(t,e,n,r){if(t[ai])return;let i;n.type&8?i=un(r):i=PO(e,n),t[ai]=i}var Co=class{},nm=class{};var sg=class extends Co{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new pl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=dT(e);this._bootstrapComponents=wD(o.bootstrap),this._r3Injector=eD(e,n,[{provide:Co,useValue:this},{provide:kl,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ag=class extends nm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new sg(this.moduleType,e,[])}};var gl=class extends Co{injector;componentFactoryResolver=new pl(this);instance=null;constructor(e){super();let n=new aa([...e.providers,{provide:Co,useValue:this},{provide:kl,useValue:this.componentFactoryResolver}],e.parent||_g(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ll(t,e,n=null){return new gl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var FO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=hT(!1,n.type),i=r.length>0?Ll([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(K(et))})}return t})();function YD(t){return pa(()=>{let e=JD(t),n=ge(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(FO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||dn.Emulated,styles:t.styles||Lt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Vg("NgStandalone"),XD(n);let r=t.dependencies;return n.directiveDefs=$w(r,!1),n.pipeDefs=$w(r,!0),n.id=$O(n),n})}function VO(t){return vo(t)||oP(t)}function jO(t){return t!==null}function xo(t){return pa(()=>({type:t.type,bootstrap:t.bootstrap||Lt,declarations:t.declarations||Lt,imports:t.imports||Lt,exports:t.exports||Lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function UO(t,e){if(t==null)return oi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Rl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function BO(t){if(t==null)return oi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function _i(t){return pa(()=>{let e=JD(t);return XD(e),e})}function ZD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function JD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||oi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:UO(t.inputs,e),outputs:BO(t.outputs),debugInfo:null}}function XD(t){t.features?.forEach(e=>e(t))}function $w(t,e){if(!t)return null;let n=e?sP:VO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(jO)}function $O(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function HO(t){return Object.getPrototypeOf(t.prototype).constructor}function zO(t){let e=HO(t.type),n=!0,r=[t];for(;e;){let i;if(cn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Sp(t.inputs),s.declaredInputs=Sp(t.declaredInputs),s.outputs=Sp(t.outputs);let a=i.hostBindings;a&&QO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&GO(t,u),l&&KO(t,l),qO(t,i),VM(t.outputs,i.outputs),cn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===zO&&(n=!1)}}e=Object.getPrototypeOf(e)}WO(r)}function qO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function WO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Do(i.hostAttrs,n=Do(n,i.hostAttrs))}}function Sp(t){return t===oi?{}:t===Lt?[]:t}function GO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function KO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function QO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function eb(t,e,n){return t[e]=n}function hi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function tb(t,e,n,r){let i=hi(t,e,n);return hi(t,e+1,r)||i}function YO(t,e,n,r,i,o,s,a,u){let l=e.consts,h=xl(e,t,4,s||null,a||null);Tg()&&tm(e,n,h,To(l,u),Gg),h.mergedAttrs=Do(h.mergedAttrs,h.attrs),Ag(e,h);let p=h.tView=Hg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function ZO(t,e,n,r,i,o,s,a,u,l){let h=n+jt,p=e.firstCreatePass?YO(h,e,t,r,i,o,s,a,u):e.data[h];mi(p,!1);let y=XO(e,t,p,n);Dl()&&Ml(e,t,y,p),Po(y,t);let m=HD(y,t,y,p);return t[h]=m,qg(t,m),OO(m,p,t),wl(p)&&Nl(e,t,p),u!=null&&Wg(t,p,l),p}function JO(t,e,n,r,i,o,s,a){let u=we(),l=Tt(),h=To(l.consts,o);return ZO(u,l,t,e,n,r,i,h,s,a),JO}var XO=e1;function e1(t,e,n,r){return bl(!0),e[ze].createComment("")}var nb=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var rb=new B("");var ib=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new cg})}return t})(),cg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function Ea(t){return!!t&&typeof t.then=="function"}function ob(t){return!!t&&typeof t.subscribe=="function"}var t1=new B("");var sb=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(t1,{optional:!0})??[];injector=x(pt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=tt(this.injector,i);if(Ea(o))n.push(o);else if(ob(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rm=new B("");function n1(){Yf(()=>{throw new j(600,!1)})}function r1(t){return t.isBoundToModule}var i1=10;var fi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(px);afterRenderManager=x(Ax);zonelessEnabled=x(Pg);rootEffectScheduler=x(ib);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new He;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=x(Un).hasPendingTasks.pipe(ne(n=>!n));constructor(){x(Al,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=pt.NULL){Te(10);let o=n instanceof qD;if(!this._injector.get(sb).done){let m="";throw new j(405,m)}let a;o?a=n:a=this._injector.get(kl).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=r1(a)?void 0:this._injector.get(Co),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,y=h.injector.get(rb,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),qu(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),Te(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(gD.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(n),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<i1;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)o1(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Tl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;qu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(rm,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function o1(t,e,n,r){if(!n&&!Tl(t))return;jD(t,e,n&&!r?0:1)}function im(t,e,n,r){let i=we(),o=bg();if(hi(i,o,e)){let s=Tt(),a=BT();vk(a,i,t,e,n,r)}return im}function s1(t,e,n,r){return hi(t,bg(),n)?e+yo(n)+r:Bn}function a1(t,e,n,r,i,o){let s=OP(),a=tb(t,s,n,i);return kT(2),a?e+yo(n)+r+yo(i)+o:Bn}function Bu(t,e){return t<<17|e<<2}function pi(t){return t>>17&32767}function c1(t){return(t&2)==2}function u1(t,e){return t&131071|e<<17}function ug(t){return t|2}function So(t){return(t&131068)>>2}function Ap(t,e){return t&-131069|e<<2}function l1(t){return(t&1)===1}function lg(t){return t|1}function d1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pi(s),u=So(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ga(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=pi(t[a+1]);t[r+1]=Bu(y,a),y!==0&&(t[y+1]=Ap(t[y+1],r)),t[a+1]=u1(t[a+1],r)}else t[r+1]=Bu(a,0),a!==0&&(t[a+1]=Ap(t[a+1],r)),a=r;else t[r+1]=Bu(u,0),a===0?a=r:t[u+1]=Ap(t[u+1],r),u=r;l&&(t[r+1]=ug(t[r+1])),Hw(t,h,r,!0),Hw(t,h,r,!1),h1(e,h,t,r,o),s=Bu(a,u),o?e.classBindings=s:e.styleBindings=s}function h1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ga(o,e)>=0&&(n[r+1]=lg(n[r+1]))}function Hw(t,e,n,r){let i=t[n+1],o=e===null,s=r?pi(i):So(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];f1(u,e)&&(a=!0,t[s+1]=r?lg(l):ug(l)),s=r?pi(l):So(l)}a&&(t[n+1]=r?ug(i):lg(i))}function f1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ga(t,e)>=0:!1}function p1(t,e,n){let r=we(),i=bg();if(hi(r,i,e)){let o=Tt(),s=BT();fk(o,s,r,t,e,r[ze],n,!1)}return p1}function zw(t,e,n,r,i){Kg(e,t,n,i?"class":"style",r)}function g1(t,e,n){return ab(t,e,n,!1),g1}function m1(t,e){return ab(t,e,null,!0),m1}function ab(t,e,n,r){let i=we(),o=Tt(),s=kT(2);if(o.firstUpdatePass&&v1(o,t,s,r),e!==Bn&&hi(i,s,e)){let a=o.data[yi()];T1(o,a,i,i[ze],t,i[s+1]=D1(e,n),r,s)}}function y1(t,e){return e>=t.expandoStartIndex}function v1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[yi()],s=y1(t,n);b1(o,r)&&e===null&&!s&&(e=!1),e=_1(i,o,e,r),d1(i,o,e,n,s,r)}}function _1(t,e,n,r){let i=UP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Rp(null,t,e,n,r),n=ha(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Rp(i,t,e,n,r),o===null){let u=E1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Rp(null,t,e,u[1],r),u=ha(u,e.attrs,r),I1(t,e,r,u))}else o=w1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function E1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(So(r)!==0)return t[pi(r)]}function I1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[pi(i)]=r}function w1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ha(r,s,n)}return ha(r,e.attrs,n)}function Rp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ha(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ha(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rP(t,s,n?!0:e[++o]))}return t===void 0?null:t}function T1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=l1(l)?qw(u,e,n,i,So(l),s):void 0;if(!ml(h)){ml(o)||c1(l)&&(o=qw(u,null,n,i,a,s));let p=TT(yi(),n);jk(r,s,p,i,o)}}function qw(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===Bn&&(y=p?Lt:void 0);let m=p?vp(y,r):h===r?y:void 0;if(l&&!ml(m)&&(m=vp(u,r)),ml(m)&&(a=m,s))return a;let D=t[i+1];i=s?pi(D):So(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=vp(u,r))}return a}function ml(t){return t!==void 0}function D1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=wt(Ug(t)))),t}function b1(t,e){return(t.flags&(e?8:16))!==0}function cb(t,e,n,r){let i=we(),o=Tt(),s=jt+t,a=i[ze],u=o.firstCreatePass?GD(s,o,i,e,Gg,Tg(),n,r):o.data[s],l=C1(o,i,u,a,e,t);i[s]=l;let h=wl(u);return mi(u,!0),CD(a,l,u),!MD(u)&&Dl()&&Ml(o,i,l,u),(AP()===0||h)&&Po(l,i),RP(),h&&(Nl(o,i,u),jg(o,u,i)),r!==null&&Wg(i,u),cb}function ub(){let t=Dt();Dg()?MT():(t=t.parent,mi(t,!1));let e=t;PP(e)&&xP(),NP();let n=Tt();return n.firstCreatePass&&KD(n,e),e.classesWithoutHost!=null&&WP(e)&&zw(n,e,we(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&GP(e)&&zw(n,e,we(),e.stylesWithoutHost,!1),ub}function om(t,e,n,r){return cb(t,e,n,r),ub(),om}var C1=(t,e,n,r,i,o)=>(bl(!0),DD(r,i,HP()));function S1(t,e,n,r,i){let o=e.consts,s=To(o,r),a=xl(e,t,8,"ng-container",s);s!==null&&ig(a,s,!0);let u=To(o,i);return Tg()&&tm(e,n,a,u,Gg),a.mergedAttrs=Do(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function A1(t,e,n){let r=we(),i=Tt(),o=t+jt,s=i.firstCreatePass?S1(o,i,r,e,n):i.data[o];mi(s,!0);let a=N1(i,r,s,t);return r[o]=a,Dl()&&Ml(i,r,a,s),Po(a,r),wl(s)&&(Nl(i,r,s),jg(i,s,r)),n!=null&&Wg(r,s),A1}function R1(){let t=Dt(),e=Tt();return Dg()?MT():(t=t.parent,mi(t,!1)),e.firstCreatePass&&(Ag(e,t),Ig(t)&&e.queries.elementEnd(t)),R1}var N1=(t,e,n,r)=>(bl(!0),nk(e[ze],""));var ei=void 0;function M1(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var P1=["en",[["a","p"],["AM","PM"],ei],[["AM","PM"],ei,ei],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ei,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ei,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ei,"{1} 'at' {0}",ei],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",M1],Np={};function Ut(t){let e=x1(t),n=Ww(e);if(n)return n;let r=e.split("-")[0];if(n=Ww(r),n)return n;if(r==="en")return P1;throw new j(701,!1)}function Ww(t){return t in Np||(Np[t]=ti.ng&&ti.ng.common&&ti.ng.common.locales&&ti.ng.common.locales[t]),Np[t]}var Pe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Pe||{});function x1(t){return t.toLowerCase().replace(/_/g,"-")}var yl="en-US";var k1=yl;function O1(t){typeof t=="string"&&(k1=t.toLowerCase().replace(/_/g,"-"))}function Gw(t,e,n){return function r(i){if(i===Function)return n;let o=No(t)?ln(t.index,e):e;Xg(o,5);let s=e[Mt],a=Kw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=Kw(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Kw(t,e,n,r){let i=se(null);try{return Te(6,e,n),n(r)!==!1}catch(o){return L1(t,o),!1}finally{Te(7,e,n),se(i)}}function L1(t,e){let n=t[Eo],r=n?n.get(On,null):null;r&&r.handleError(e)}function Qw(t,e,n,r,i,o){let s=e[n],a=e[le],l=a.data[n].outputs[r],h=s[l],p=a.firstCreatePass?RT(a):null,y=AT(e),m=h.subscribe(o),D=y.length;y.push(o,m),p&&p.push(i,t.index,D,-(D+1))}function sm(t,e,n,r){let i=we(),o=Tt(),s=Dt();return V1(o,i,i[ze],s,t,e,r),sm}function F1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Xu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function V1(t,e,n,r,i,o,s){let a=wl(r),l=t.firstCreatePass?RT(t):null,h=AT(e),p=!0;if(r.type&3||s){let y=hn(r,e),m=s?s(y):y,D=h.length,N=s?O=>s(un(O[r.index])):r.index,R=null;if(!s&&a&&(R=F1(t,e,i,r.index)),R!==null){let O=R.__ngLastListenerFn__||R;O.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,p=!1}else{o=Gw(r,e,o),Nx(e,m,i,o);let O=n.listen(m,i,o);h.push(o,O),l&&l.push(i,N,D,D+1)}}else o=Gw(r,e,o);if(p){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let D=0;D<m.length;D+=2){let N=m[D],R=m[D+1];Qw(r,e,N,R,i,o)}if(y&&y.length)for(let D of y)Qw(r,e,D,i,i,o)}}function b5(t=1){return $P(t)}function C5(t,e=""){let n=we(),r=Tt(),i=t+jt,o=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],s=j1(r,n,o,e,t);n[i]=s,Dl()&&Ml(r,n,s,o),mi(o,!1)}var j1=(t,e,n,r,i)=>(bl(!0),ek(e[ze],r));function U1(t){return lb("",t,""),U1}function lb(t,e,n){let r=we(),i=s1(r,t,e,n);return i!==Bn&&db(r,yi(),i),lb}function B1(t,e,n,r,i){let o=we(),s=a1(o,t,e,n,r,i);return s!==Bn&&db(o,yi(),s),B1}function db(t,e,n){let r=TT(e,t);tk(t[ze],r,n)}function $1(t,e,n){let r=Tt();if(r.firstCreatePass){let i=cn(t);dg(n,r.data,r.blueprint,i,!0),dg(e,r.data,r.blueprint,i,!1)}}function dg(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let o=0;o<t.length;o++)dg(t[o],e,n,r,i);else{let o=Tt(),s=we(),a=Dt(),u=_o(t)?t:ht(t.provide),l=gT(t),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(_o(t)||!t.multi){let m=new li(l,i,qe),D=Pp(u,e,i?h:h+y,p);D===-1?(zp(al(a,s),o,u),Mp(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[D]=m,s[D]=m)}else{let m=Pp(u,e,h+y,p),D=Pp(u,e,h,h+y),N=m>=0&&n[m],R=D>=0&&n[D];if(i&&!R||!i&&!N){zp(al(a,s),o,u);let O=q1(i?z1:H1,n.length,i,r,l);!i&&R&&(n[D].providerFactory=O),Mp(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=hb(n[i?D:m],l,!i&&r);Mp(o,t,m>-1?m:D,O)}!i&&r&&R&&n[D].componentProviders++}}}function Mp(t,e,n,r){let i=_o(e),o=dP(e);if(i||o){let u=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function hb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Pp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function H1(t,e,n,r,i){return hg(this.multi,[])}function z1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=cl(r,r[le],this.providerFactory.index,i);s=u.slice(0,a),hg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],hg(o,s);return s}function hg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function q1(t,e,n,r,i){let o=new li(t,n,qe);return o.multi=[],o.index=e,o.componentProviders=0,hb(o,i,r&&!n),o}function S5(t,e=[]){return n=>{n.providersResolver=(r,i)=>$1(r,i?i(t):t,e)}}function A5(t,e,n,r){return W1(we(),xT(),t,e,n,r)}function fb(t,e){let n=t[e];return n===Bn?void 0:n}function W1(t,e,n,r,i,o){let s=e+n;return hi(t,s,i)?eb(t,s+1,o?r.call(o,i):r(i)):fb(t,s+1)}function G1(t,e,n,r,i,o,s){let a=e+n;return tb(t,a,i,o)?eb(t,a+2,s?r.call(s,i,o):r(i,o)):fb(t,a+2)}function R5(t,e){let n=Tt(),r,i=t+jt;n.firstCreatePass?(r=K1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ii(r.type,!0)),s,a=Et(qe);try{let u=sl(!1),l=o();return sl(u),DP(n,we(),i,l),l}finally{Et(a)}}function K1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function N5(t,e,n,r){let i=t+jt,o=we(),s=TP(o,i);return Q1(o,i)?G1(o,xT(),e,s.transform,n,r,s):s.transform(n,r)}function Q1(t,e){return t[le].data[e].pure}var fa=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},pb=new fa("19.2.14"),fg=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},gb=(()=>{class t{compileModuleSync(n){return new ag(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=dT(n),o=wD(i.declarations).reduce((s,a)=>{let u=vo(a);return u&&s.push(new da(u)),s},[]);return new fg(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Y1=(()=>{class t{zone=x(ve);changeDetectionScheduler=x(di);applicationRef=x(fi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Z1=new B("",{factory:()=>!1});function mb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(ge(L({},yb()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:sa,multi:!0,useFactory:()=>{let r=x(Y1,{optional:!0});return()=>r.initialize()}},{provide:sa,multi:!0,useFactory:()=>{let r=x(J1);return()=>{r.initialize()}}},e===!0?{provide:nD,useValue:!0}:[],{provide:rD,useValue:n??tD}]}function M5(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=mb({ngZoneFactory:()=>{let i=yb(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Vg("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Fn([{provide:Z1,useValue:!0},{provide:Pg,useValue:!1},r])}function yb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var J1=(()=>{class t{subscription=new Ne;initialized=!1;zone=x(ve);pendingTasks=x(Un);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var X1=(()=>{class t{appRef=x(fi);taskService=x(Un);ngZone=x(ve);zonelessEnabled=x(Pg);tracing=x(Al,{optional:!0});disableScheduling=x(nD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ne;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ll):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(rD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Cw:iD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ll+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Cw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eL(){return typeof $localize<"u"&&$localize.locale||yl}var Fl=new B("",{providedIn:"root",factory:()=>x(Fl,te.Optional|te.SkipSelf)||eL()});var pg=new B(""),tL=new B("");function na(t){return!t.moduleRef}function nL(t){let e=na(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{na(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(On,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),na(t)){let o=()=>e.destroy(),s=t.platformInjector.get(pg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(pg);s.add(o),t.moduleRef.onDestroy(()=>{qu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return iL(r,n,()=>{let o=e.get(sb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Fl,yl);if(O1(s||yl),!e.get(tL,!0))return na(t)?e.get(fi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(na(t)){let u=e.get(fi);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return rL(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function rL(t,e){let n=t.injector.get(fi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}function iL(t,e,n){try{let r=n();return Ea(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wu=null;function oL(t=[],e){return pt.create({name:e,providers:[{provide:El,useValue:"platform"},{provide:pg,useValue:new Set([()=>Wu=null])},...t]})}function sL(t=[]){if(Wu)return Wu;let e=oL(t);return Wu=e,n1(),aL(e),e}function aL(t){let e=t.get(Lg,null);tt(t,()=>{e?.forEach(n=>n())})}function am(){return!1}var Vl=(()=>{class t{static __NG_ELEMENT_ID__=cL}return t})();function cL(t){return uL(Dt(),we(),(t&16)===16)}function uL(t,e,n){if(No(t)&&!n){let r=ln(t.index,e);return new la(r,r)}else if(t.type&175){let r=e[an];return new la(r,e)}return null}function vb(t){Te(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=sL(r),o=[mb({}),{provide:di,useExisting:X1},...n||[]],s=new gl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return nL({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Te(9)}}function jl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function _b(t){return Xf(t)}function lL(t,e){return Qf(t,e?.equal)}var gg=class{[qt];constructor(e){this[qt]=e}destroy(){this[qt].destroy()}};function Eb(t,e){!e?.injector&&Eg(Eb);let n=e?.injector??x(pt),r=e?.manualCleanup!==!0?n.get(Tr):null,i,o=n.get(mD,null,{optional:!0}),s=n.get(di);return o!==null&&!e?.forceRoot?(i=fL(o.view,s,t),r instanceof ul&&r._lView===o.view&&(r=null)):i=pL(t,n.get(ib),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new gg(i)}var Ib=ge(L({},Ji),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ua,run(){if(this.dirty=!1,this.hasRun&&!cu(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=Ys(this),n=rl(!1);try{this.maybeCleanup(),this.fn(t)}finally{rl(n),au(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),dL=ge(L({},Ib),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Zs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),hL=ge(L({},Ib),{consumerMarkedDirty(){this.view[Z]|=8192,ya(this.view),this.notifier.notify(13)},destroy(){Zs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[si]?.delete(this)}});function fL(t,e,n){let r=Object.create(hL);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[si]??=new Set,t[si].add(r),r.consumerMarkedDirty(r),r}function pL(t,e,n){let r=Object.create(dL);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var We=new B("");var Db=null;function Hn(){return Db}function cm(t){Db??=t}var Ia=class{},um=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(bb),providedIn:"platform"})}return t})();var bb=(()=>{class t extends um{_location;_history;_doc=x(We);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hn().getBaseHref(this._doc)}onPopState(n){let r=Hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Cb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function wb(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Dr(t){return t&&t[0]!=="?"?`?${t}`:t}var ko=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(Ab),providedIn:"root"})}return t})(),Sb=new B(""),Ab=(()=>{class t extends ko{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Cb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Dr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Dr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(K(um),K(Sb,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Oo=(()=>{class t{_subject=new He;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yL(wb(Tb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Dr(r))}normalize(n){return t.stripTrailingSlash(mL(this._basePath,Tb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Dr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Dr;static joinWithSlash=Cb;static stripTrailingSlash=wb;static \u0275fac=function(r){return new(r||t)(K(ko))};static \u0275prov=$({token:t,factory:()=>gL(),providedIn:"root"})}return t})();function gL(){return new Oo(K(ko))}function mL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Tb(t){return t.replace(/\/index.html$/,"")}function yL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var at=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(at||{}),_e=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(_e||{}),bt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(bt||{}),qn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Pb(t){return Ut(t)[Pe.LocaleId]}function xb(t,e,n){let r=Ut(t),i=[r[Pe.DayPeriodsFormat],r[Pe.DayPeriodsStandalone]],o=Bt(i,e);return Bt(o,n)}function kb(t,e,n){let r=Ut(t),i=[r[Pe.DaysFormat],r[Pe.DaysStandalone]],o=Bt(i,e);return Bt(o,n)}function Ob(t,e,n){let r=Ut(t),i=[r[Pe.MonthsFormat],r[Pe.MonthsStandalone]],o=Bt(i,e);return Bt(o,n)}function Lb(t,e){let r=Ut(t)[Pe.Eras];return Bt(r,e)}function wa(t,e){let n=Ut(t);return Bt(n[Pe.DateFormat],e)}function Ta(t,e){let n=Ut(t);return Bt(n[Pe.TimeFormat],e)}function Da(t,e){let r=Ut(t)[Pe.DateTimeFormat];return Bt(r,e)}function ba(t,e){let n=Ut(t),r=n[Pe.NumberSymbols][e];if(typeof r>"u"){if(e===qn.CurrencyDecimal)return n[Pe.NumberSymbols][qn.Decimal];if(e===qn.CurrencyGroup)return n[Pe.NumberSymbols][qn.Group]}return r}function Fb(t){if(!t[Pe.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Pe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Vb(t){let e=Ut(t);return Fb(e),(e[Pe.ExtraData][2]||[]).map(r=>typeof r=="string"?lm(r):[lm(r[0]),lm(r[1])])}function jb(t,e,n){let r=Ut(t);Fb(r);let i=[r[Pe.ExtraData][0],r[Pe.ExtraData][1]],o=Bt(i,e)||[];return Bt(o,n)||[]}function Bt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function lm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var vL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ul={},_L=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Ub(t,e,n,r){let i=AL(t);e=zn(n,e)||e;let s=[],a;for(;e;)if(a=_L.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=$b(r,u),i=SL(i,r));let l="";return s.forEach(h=>{let p=bL(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ql(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function zn(t,e){let n=Pb(t);if(Ul[n]??={},Ul[n][e])return Ul[n][e];let r="";switch(e){case"shortDate":r=wa(t,bt.Short);break;case"mediumDate":r=wa(t,bt.Medium);break;case"longDate":r=wa(t,bt.Long);break;case"fullDate":r=wa(t,bt.Full);break;case"shortTime":r=Ta(t,bt.Short);break;case"mediumTime":r=Ta(t,bt.Medium);break;case"longTime":r=Ta(t,bt.Long);break;case"fullTime":r=Ta(t,bt.Full);break;case"short":let i=zn(t,"shortTime"),o=zn(t,"shortDate");r=Bl(Da(t,bt.Short),[i,o]);break;case"medium":let s=zn(t,"mediumTime"),a=zn(t,"mediumDate");r=Bl(Da(t,bt.Medium),[s,a]);break;case"long":let u=zn(t,"longTime"),l=zn(t,"longDate");r=Bl(Da(t,bt.Long),[u,l]);break;case"full":let h=zn(t,"fullTime"),p=zn(t,"fullDate");r=Bl(Da(t,bt.Full),[h,p]);break}return r&&(Ul[n][e]=r),r}function Bl(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Yt(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function EL(t,e){return Yt(t,3).substring(0,e)}function ke(t,e,n=0,r=!1,i=!1){return function(o,s){let a=IL(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return EL(a,e);let u=ba(s,qn.MinusSign);return Yt(a,e,u,r,i)}}function IL(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function De(t,e,n=at.Format,r=!1){return function(i,o){return wL(i,o,t,e,n,r)}}function wL(t,e,n,r,i,o){switch(n){case 2:return Ob(e,i,r)[t.getMonth()];case 1:return kb(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=Vb(e),h=jb(e,i,r),p=l.findIndex(y=>{if(Array.isArray(y)){let[m,D]=y,N=s>=m.hours&&a>=m.minutes,R=s<D.hours||s===D.hours&&a<D.minutes;if(m.hours<D.hours){if(N&&R)return!0}else if(N||R)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return xb(e,i,r)[s<12?0:1];case 3:return Lb(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function $l(t){return function(e,n,r){let i=-1*r,o=ba(n,qn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Yt(s,2,o)+Yt(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Yt(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Yt(s,2,o)+":"+Yt(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Yt(s,2,o)+":"+Yt(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var TL=0,zl=4;function DL(t){let e=ql(t,TL,1).getDay();return ql(t,0,1+(e<=zl?zl:zl+7)-e)}function Bb(t){let e=t.getDay(),n=e===0?-3:zl-e;return ql(t.getFullYear(),t.getMonth(),t.getDate()+n)}function dm(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=Bb(n),s=DL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Yt(i,t,ba(r,qn.MinusSign))}}function Hl(t,e=!1){return function(n,r){let o=Bb(n).getFullYear();return Yt(o,t,ba(r,qn.MinusSign),e)}}var hm={};function bL(t){if(hm[t])return hm[t];let e;switch(t){case"G":case"GG":case"GGG":e=De(3,_e.Abbreviated);break;case"GGGG":e=De(3,_e.Wide);break;case"GGGGG":e=De(3,_e.Narrow);break;case"y":e=ke(0,1,0,!1,!0);break;case"yy":e=ke(0,2,0,!0,!0);break;case"yyy":e=ke(0,3,0,!1,!0);break;case"yyyy":e=ke(0,4,0,!1,!0);break;case"Y":e=Hl(1);break;case"YY":e=Hl(2,!0);break;case"YYY":e=Hl(3);break;case"YYYY":e=Hl(4);break;case"M":case"L":e=ke(1,1,1);break;case"MM":case"LL":e=ke(1,2,1);break;case"MMM":e=De(2,_e.Abbreviated);break;case"MMMM":e=De(2,_e.Wide);break;case"MMMMM":e=De(2,_e.Narrow);break;case"LLL":e=De(2,_e.Abbreviated,at.Standalone);break;case"LLLL":e=De(2,_e.Wide,at.Standalone);break;case"LLLLL":e=De(2,_e.Narrow,at.Standalone);break;case"w":e=dm(1);break;case"ww":e=dm(2);break;case"W":e=dm(1,!0);break;case"d":e=ke(2,1);break;case"dd":e=ke(2,2);break;case"c":case"cc":e=ke(7,1);break;case"ccc":e=De(1,_e.Abbreviated,at.Standalone);break;case"cccc":e=De(1,_e.Wide,at.Standalone);break;case"ccccc":e=De(1,_e.Narrow,at.Standalone);break;case"cccccc":e=De(1,_e.Short,at.Standalone);break;case"E":case"EE":case"EEE":e=De(1,_e.Abbreviated);break;case"EEEE":e=De(1,_e.Wide);break;case"EEEEE":e=De(1,_e.Narrow);break;case"EEEEEE":e=De(1,_e.Short);break;case"a":case"aa":case"aaa":e=De(0,_e.Abbreviated);break;case"aaaa":e=De(0,_e.Wide);break;case"aaaaa":e=De(0,_e.Narrow);break;case"b":case"bb":case"bbb":e=De(0,_e.Abbreviated,at.Standalone,!0);break;case"bbbb":e=De(0,_e.Wide,at.Standalone,!0);break;case"bbbbb":e=De(0,_e.Narrow,at.Standalone,!0);break;case"B":case"BB":case"BBB":e=De(0,_e.Abbreviated,at.Format,!0);break;case"BBBB":e=De(0,_e.Wide,at.Format,!0);break;case"BBBBB":e=De(0,_e.Narrow,at.Format,!0);break;case"h":e=ke(3,1,-12);break;case"hh":e=ke(3,2,-12);break;case"H":e=ke(3,1);break;case"HH":e=ke(3,2);break;case"m":e=ke(4,1);break;case"mm":e=ke(4,2);break;case"s":e=ke(5,1);break;case"ss":e=ke(5,2);break;case"S":e=ke(6,1);break;case"SS":e=ke(6,2);break;case"SSS":e=ke(6,3);break;case"Z":case"ZZ":case"ZZZ":e=$l(0);break;case"ZZZZZ":e=$l(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=$l(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=$l(2);break;default:return null}return hm[t]=e,e}function $b(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function CL(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function SL(t,e,n){let i=t.getTimezoneOffset(),o=$b(e,i);return CL(t,-1*(o-i))}function AL(t){if(Rb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return ql(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(vL))return RL(r)}let e=new Date(t);if(!Rb(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function RL(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function Rb(t){return t instanceof Date&&!isNaN(t.valueOf())}var fm=/\s+/,Nb=[],NL=(()=>{class t{_ngEl;_renderer;initialClasses=Nb;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(fm):Nb}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(fm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(fm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(qe(va),qe(Ol))};static \u0275dir=_i({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var ML=(()=>{class t{_viewContainer;_context=new Wl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Mb(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Mb(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(qe(_a),qe(em))};static \u0275dir=_i({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Wl=class{$implicit=null;ngIf=null};function Mb(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}function PL(t,e){return new j(2100,!1)}var xL="mediumDate",Hb=new B(""),zb=new B(""),kL=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??xL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Ub(n,s,o||this.locale,a)}catch(s){throw PL(t,s.message)}}static \u0275fac=function(r){return new(r||t)(qe(Fl,16),qe(Hb,24),qe(zb,24))};static \u0275pipe=ZD({name:"date",type:t,pure:!0})}return t})();var qb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=xo({type:t});static \u0275inj=Ao({})}return t})();function Ca(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pm="browser",Wb="server";function Gl(t){return t===Wb}var Ei=class{};var Yl=new B(""),vm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(K(Yl),K(ve))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Sa=class{_doc;constructor(e){this._doc=e}manager},Kl="ng-app-id";function Gb(t){for(let e of t)e.remove()}function Kb(t,e){let n=e.createElement("style");return n.textContent=t,n}function FL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Kl}="${e}"],link[${Kl}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Kl),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function mm(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var _m=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=Gl(o),FL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Kb);r?.forEach(i=>this.addUsage(i,this.external,mm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Gb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Gb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Kb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,mm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Kl,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(K(We),K(Og),K(Fg,8),K(vi))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),gm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Em=/%COMP%/g;var Yb="%COMP%",VL=`_nghost-${Yb}`,jL=`_ngcontent-${Yb}`,UL=!0,BL=new B("",{providedIn:"root",factory:()=>UL});function $L(t){return jL.replace(Em,t)}function HL(t){return VL.replace(Em,t)}function Zb(t,e){return e.map(n=>n.replace(Em,t))}var Im=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Gl(a),this.defaultRenderer=new Aa(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===dn.ShadowDom&&(r=ge(L({},r),{encapsulation:dn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Ql?i.applyToHost(n):i instanceof Ra&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case dn.Emulated:o=new Ql(u,l,r,this.appId,h,s,a,p,y);break;case dn.ShadowDom:return new ym(u,l,n,r,s,a,this.nonce,p,y);default:o=new Ra(u,l,r,h,s,a,p,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(K(vm),K(_m),K(Og),K(BL),K(We),K(vi),K(ve),K(Fg),K(Al,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Aa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(gm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Qb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Qb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=gm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=gm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ln.DashCase|Ln.Important)?e.style.setProperty(n,r,i&Ln.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ln.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Hn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Qb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ym=class extends Aa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Zb(i.id,h);for(let y of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=y,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let y of p){let m=mm(y,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ra=class extends Aa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?Zb(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ql=class extends Ra{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=$L(h),this.hostAttr=HL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Zl=class t extends Ia{supportsDOMEvents=!0;static makeCurrent(){cm(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=zL();return n==null?null:qL(n)}resetBaseElement(){Na=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ca(document.cookie,e)}},Na=null;function zL(){return Na=Na||document.head.querySelector("base"),Na?Na.getAttribute("href"):null}function qL(t){return new URL(t,document.baseURI).pathname}var WL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Xb=(()=>{class t extends Sa{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(K(We))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Jb=["alt","control","meta","shift"],GL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},eC=(()=>{class t extends Sa{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Jb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=GL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Jb.forEach(s=>{if(s!==i){let a=KL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(K(We))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function QL(t,e){return vb(L({rootComponent:t},YL(e)))}function YL(t){return{appProviders:[...tF,...t?.providers??[]],platformProviders:eF}}function ZL(){Zl.makeCurrent()}function JL(){return new On}function XL(){return fD(document),document}var eF=[{provide:vi,useValue:pm},{provide:Lg,useValue:ZL,multi:!0},{provide:We,useFactory:XL}];var tF=[{provide:El,useValue:"root"},{provide:On,useFactory:JL},{provide:Yl,useClass:Xb,multi:!0,deps:[We]},{provide:Yl,useClass:eC,multi:!0,deps:[We]},Im,_m,vm,{provide:bo,useExisting:Im},{provide:Ei,useClass:WL},[]];var Lo=class{},Fo=class{},Wn=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var ed=class{encodeKey(e){return tC(e)}encodeValue(e){return tC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var rF=/%(\d[a-f0-9])/gi,iF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tC(t){return encodeURIComponent(t).replace(rF,(e,n)=>iF[n]??e)}function Jl(t){return`${t}`}var Cr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new ed,e.fromString){if(e.fromObject)throw new j(2805,!1);this.map=nF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Jl):[Jl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Jl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Jl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var td=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function oF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function nC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function rC(t){return typeof Blob<"u"&&t instanceof Blob}function iC(t){return typeof FormData<"u"&&t instanceof FormData}function sF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ma="Content-Type",nd="Accept",Cm="X-Request-URL",sC="text/plain",aC="application/json",cC=`${aC}, ${sC}, */*`,Pa=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(oF(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Wn,this.context??=new td,!this.params)this.params=new Cr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||nC(this.body)||rC(this.body)||iC(this.body)||sF(this.body)?this.body:this.body instanceof Cr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||iC(this.body)?null:rC(this.body)?this.body.type||null:nC(this.body)?null:typeof this.body=="string"?sC:this.body instanceof Cr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?aC:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,m)=>y.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,m)=>y.set(m,e.setParams[m]),h)),new t(n,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Sr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Sr||{}),Vo=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Wn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},xa=class t extends Vo{constructor(e={}){super(e)}type=Sr.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ka=class t extends Vo{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Sr.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},br=class extends Vo{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},uC=200,aF=204;function wm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var cF=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Pa)o=n;else{let u;i.headers instanceof Wn?u=i.headers:u=new Wn(i.headers);let l;i.params&&(i.params instanceof Cr?l=i.params:l=new Cr({fromObject:i.params})),o=new Pa(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=G(o).pipe(_r(u=>this.handler.handle(u)));if(n instanceof Pa||i.observe==="events")return s;let a=s.pipe(Rt(u=>u instanceof ka));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new j(2806,!1);return u.body}));case"blob":return a.pipe(ne(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new j(2807,!1);return u.body}));case"text":return a.pipe(ne(u=>{if(u.body!==null&&typeof u.body!="string")throw new j(2808,!1);return u.body}));case"json":default:return a.pipe(ne(u=>u.body))}case"response":return a;default:throw new j(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Cr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,wm(i,r))}post(n,r,i={}){return this.request("POST",n,wm(i,r))}put(n,r,i={}){return this.request("PUT",n,wm(i,r))}static \u0275fac=function(r){return new(r||t)(K(Lo))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),uF=/^\)\]\}',?\n/;function oC(t){if(t.url)return t.url;let e=Cm.toLocaleLowerCase();return t.headers.get(e)}var lC=new B(""),Xl=(()=>{class t{fetchImpl=x(Tm,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n));ngZone=x(ve);destroyRef=x(Tr);destroyed=!1;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0})}handle(n){return new ee(r=>{let i=new AbortController;return this.doRequest(n,i.signal,r).then(Dm,o=>r.error(new br({error:o}))),()=>i.abort()})}doRequest(n,r,i){return _(this,null,function*(){let o=this.createRequestInit(n),s;try{let m=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,L({signal:r},o)));lF(m),i.next({type:Sr.Sent}),s=yield m}catch(m){i.error(new br({error:m,status:m.status??0,statusText:m.statusText,url:n.urlWithParams,headers:m.headers}));return}let a=new Wn(s.headers),u=s.statusText,l=oC(s)??n.urlWithParams,h=s.status,p=null;if(n.reportProgress&&i.next(new xa({headers:a,status:h,statusText:u,url:l})),s.body){let m=s.headers.get("content-length"),D=[],N=s.body.getReader(),R=0,O,H,U=typeof Zone<"u"&&Zone.current,de=!1;if(yield this.ngZone.runOutsideAngular(()=>_(this,null,function*(){for(;;){if(this.destroyed){yield N.cancel(),de=!0;break}let{done:ie,value:T}=yield N.read();if(ie)break;if(D.push(T),R+=T.length,n.reportProgress){H=n.responseType==="text"?(H??"")+(O??=new TextDecoder).decode(T,{stream:!0}):void 0;let v=()=>i.next({type:Sr.DownloadProgress,total:m?+m:void 0,loaded:R,partialText:H});U?U.run(v):v()}}})),de){i.complete();return}let Ue=this.concatChunks(D,R);try{let ie=s.headers.get(Ma)??"";p=this.parseBody(n,Ue,ie)}catch(ie){i.error(new br({error:ie,headers:new Wn(s.headers),status:s.status,statusText:s.statusText,url:oC(s)??n.urlWithParams}));return}}h===0&&(h=p?uC:0),h>=200&&h<300?(i.next(new ka({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new br({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(n,r,i){switch(n.responseType){case"json":let o=new TextDecoder().decode(r).replace(uF,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((o,s)=>r[o]=s.join(",")),n.headers.has(nd)||(r[nd]=cC),!n.headers.has(Ma)){let o=n.detectContentTypeHeader();o!==null&&(r[Ma]=o)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){let i=new Uint8Array(r),o=0;for(let s of n)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Tm=class{};function Dm(){}function lF(t){t.then(Dm,Dm)}function dF(t,e){return e(t)}function hF(t,e,n){return(r,i)=>tt(n,()=>e(r,o=>t(o,i)))}var dC=new B(""),fF=new B(""),hC=new B("",{providedIn:"root",factory:()=>!0});var rd=(()=>{class t extends Lo{backend;injector;chain=null;pendingTasks=x(Un);contributeToStability=x(hC);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(dC),...this.injector.get(fF,[])]));this.chain=r.reduceRight((i,o)=>hF(i,o,this.injector),dF)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Xr(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(K(Fo),K(et))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();var pF=/^\)\]\}',?\n/,gF=RegExp(`^${Cm}:`,"m");function mF(t){return"responseURL"in t&&t.responseURL?t.responseURL:gF.test(t.getAllResponseHeaders())?t.getResponseHeader(Cm):null}var bm=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new j(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Se(r.\u0275loadImpl()):G(null)).pipe(Nt(()=>new ee(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((N,R)=>s.setRequestHeader(N,R.join(","))),n.headers.has(nd)||s.setRequestHeader(nd,cC),!n.headers.has(Ma)){let N=n.detectContentTypeHeader();N!==null&&s.setRequestHeader(Ma,N)}if(n.responseType){let N=n.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",R=new Wn(s.getAllResponseHeaders()),O=mF(s)||n.url;return u=new xa({headers:R,status:s.status,statusText:N,url:O}),u},h=()=>{let{headers:N,status:R,statusText:O,url:H}=l(),U=null;R!==aF&&(U=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=U?uC:0);let de=R>=200&&R<300;if(n.responseType==="json"&&typeof U=="string"){let Ue=U;U=U.replace(pF,"");try{U=U!==""?JSON.parse(U):null}catch(ie){U=Ue,de&&(de=!1,U={error:ie,text:U})}}de?(o.next(new ka({body:U,headers:N,status:R,statusText:O,url:H||void 0})),o.complete()):o.error(new br({error:U,headers:N,status:R,statusText:O,url:H||void 0}))},p=N=>{let{url:R}=l(),O=new br({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(O)},y=!1,m=N=>{y||(o.next(l()),y=!0);let R={type:Sr.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),n.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},D=N=>{let R={type:Sr.UploadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:Sr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),n.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(K(Ei))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),fC=new B(""),yF="XSRF-TOKEN",vF=new B("",{providedIn:"root",factory:()=>yF}),_F="X-XSRF-TOKEN",EF=new B("",{providedIn:"root",factory:()=>_F}),Oa=class{},IF=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ca(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(K(We),K(vF))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function wF(t,e){let n=t.url.toLowerCase();if(!x(fC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=x(Oa).getToken(),i=x(EF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Sm=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Sm||{});function TF(t,e){return{\u0275kind:t,\u0275providers:e}}function DF(...t){let e=[cF,bm,rd,{provide:Lo,useExisting:rd},{provide:Fo,useFactory:()=>x(lC,{optional:!0})??x(bm)},{provide:dC,useValue:wF,multi:!0},{provide:fC,useValue:!0},{provide:Oa,useClass:IF}];for(let n of t)e.push(...n.\u0275providers);return Fn(e)}function bF(){return TF(Sm.Fetch,[Xl,{provide:lC,useExisting:Xl},{provide:Fo,useExisting:Xl}])}var pC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(K(We))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var X="primary",Qa=Symbol("RouteTitle"),Pm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ti(t){return new Pm(t)}function wC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function SF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fn(t[n],e[n]))return!1;return!0}function fn(t,e){let n=t?xm(t):void 0,r=e?xm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!TC(t[i],e[i]))return!1;return!0}function xm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function TC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function DC(t){return t.length>0?t[t.length-1]:null}function Nr(t){return fp(t)?t:Ea(t)?Se(Promise.resolve(t)):G(t)}var AF={exact:CC,subset:SC},bC={exact:RF,subset:NF,ignored:()=>!0};function gC(t,e,n){return AF[n.paths](t.root,e.root,n.matrixParams)&&bC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function RF(t,e){return fn(t,e)}function CC(t,e,n){if(!Ii(t.segments,e.segments)||!sd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!CC(t.children[r],e.children[r],n))return!1;return!0}function NF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>TC(t[n],e[n]))}function SC(t,e,n){return AC(t,e,e.segments,n)}function AC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ii(i,n)||e.hasChildren()||!sd(i,n,r))}else if(t.segments.length===n.length){if(!Ii(t.segments,n)||!sd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!SC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ii(t.segments,i)||!sd(t.segments,i,r)||!t.children[X]?!1:AC(t.children[X],e,o,r)}}function sd(t,e,n){return e.every((r,i)=>bC[n](t[i].parameters,r.parameters))}var gn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ti(this.queryParams),this._queryParamMap}toString(){return xF.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ad(this)}},Ar=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ti(this.parameters),this._parameterMap}toString(){return NC(this)}};function MF(t,e){return Ii(t,e)&&t.every((n,r)=>fn(n.parameters,e[r].parameters))}function Ii(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function PF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var Ya=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new Di,providedIn:"root"})}return t})(),Di=class{parse(e){let n=new Om(e);return new gn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${La(e.root,!0)}`,r=LF(e.queryParams),i=typeof e.fragment=="string"?`#${kF(e.fragment)}`:"";return`${n}${r}${i}`}},xF=new Di;function ad(t){return t.segments.map(e=>NC(e)).join("/")}function La(t,e){if(!t.hasChildren())return ad(t);if(e){let n=t.children[X]?La(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=PF(t,(r,i)=>i===X?[La(t.children[X],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${ad(t)}/${n[0]}`:`${ad(t)}/(${n.join("//")})`}}function RC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(t){return RC(t).replace(/%3B/gi,";")}function kF(t){return encodeURI(t)}function km(t){return RC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cd(t){return decodeURIComponent(t)}function mC(t){return cd(t.replace(/\+/g,"%20"))}function NC(t){return`${km(t.path)}${OF(t.parameters)}`}function OF(t){return Object.entries(t).map(([e,n])=>`;${km(e)}=${km(n)}`).join("")}function LF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${id(n)}=${id(i)}`).join("&"):`${id(n)}=${id(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var FF=/^[^\/()?;#]+/;function Am(t){let e=t.match(FF);return e?e[0]:""}var VF=/^[^\/()?;=#]+/;function jF(t){let e=t.match(VF);return e?e[0]:""}var UF=/^[^=?&#]+/;function BF(t){let e=t.match(UF);return e?e[0]:""}var $F=/^[^&#]+/;function HF(t){let e=t.match($F);return e?e[0]:""}var Om=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new me(e,n)),r}parseSegment(){let e=Am(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Ar(cd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=jF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Am(this.remaining);i&&(r=i,this.capture(r))}e[cd(n)]=cd(r)}parseQueryParam(e){let n=BF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=HF(this.remaining);s&&(r=s,this.capture(r))}let i=mC(n),o=mC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Am(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[X]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function MC(t){return t.segments.length>0?new me([],{[X]:t}):t}function PC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=PC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return zF(n)}function zF(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new me(t.segments.concat(e.segments),e.children)}return t}function Rr(t){return t instanceof gn}function xC(t,e,n=null,r=null){let i=kC(t);return OC(i,e,n,r)}function kC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=MC(r);return e??i}function OC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Rm(i,i,i,n,r);let o=qF(e);if(o.toRoot())return Rm(i,i,new me([],{}),n,r);let s=WF(o,i,t),a=s.processChildren?Va(s.segmentGroup,s.index,o.commands):FC(s.segmentGroup,s.index,o.commands);return Rm(i,s.segmentGroup,a,n,r)}function ld(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ua(t){return typeof t=="object"&&t!=null&&t.outlets}function Rm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=LC(t,e,n);let a=MC(PC(s));return new gn(a,o,i)}function LC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=LC(o,e,n)}),new me(t.segments,r)}var dd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ld(r[0]))throw new j(4003,!1);let i=r.find(Ua);if(i&&i!==DC(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dd(n,e,r)}var Bo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function WF(t,e,n){if(t.isAbsolute)return new Bo(e,!0,0);if(!n)return new Bo(e,!1,NaN);if(n.parent===null)return new Bo(n,!0,0);let r=ld(t.commands[0])?0:1,i=n.segments.length-1+r;return GF(n,i,t.numberOfDoubleDots)}function GF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Bo(r,!1,i-o)}function KF(t){return Ua(t[0])?t[0].outlets:{[X]:t}}function FC(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return Va(t,e,n);let r=QF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new me(t.segments.slice(r.pathIndex),t.children),Va(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?Lm(t,e,n):r.match?Va(t,0,i):Lm(t,e,n)}function Va(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=KF(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=Va(t.children[X],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=FC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function QF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ua(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!vC(u,l,s))return o;r+=2}else{if(!vC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ua(o)){let u=YF(o.outlets);return new me(r,u)}if(i===0&&ld(n[0])){let u=t.segments[e];r.push(new Ar(u.path,yC(n[0]))),i++;continue}let s=Ua(o)?o.outlets[X]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ld(a)?(r.push(new Ar(s,yC(a))),i+=2):(r.push(new Ar(s,{})),i++)}return new me(r,{})}function YF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Lm(new me([],{}),0,r))}),e}function yC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function vC(t,e,n){return t==n.path&&fn(e,n.parameters)}var ud="imperative",Ge=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ge||{}),xt=class{id;url;constructor(e,n){this.id=e,this.url=n}},bi=class extends xt{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mn=class extends xt{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ct=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ct||{}),Ba=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ba||{}),pn=class extends xt{reason;code;type=Ge.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gn=class extends xt{reason;code;type=Ge.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ho=class extends xt{error;target;type=Ge.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$a=class extends xt{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hd=class extends xt{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fd=class extends xt{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pd=class extends xt{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gd=class extends xt{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},md=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yd=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vd=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_d=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Id=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ha=class{},zo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function ZF(t,e){return t.providers&&!t._injector&&(t._injector=Ll(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Zt(t){return t.outlet||X}function JF(t,e){let n=t.filter(r=>Zt(r)===e);return n.push(...t.filter(r=>Zt(r)!==e)),n}function Za(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var wd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Za(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Go(this.rootInjector)}},Go=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new wd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(K(et))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Td=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Fm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Fm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Vm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vm(e,this._root).map(n=>n.value)}};function Fm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Fm(t,n);if(r)return r}return null}function Vm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Vm(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Uo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var za=class extends Td{snapshot;constructor(e,n){super(e),this.snapshot=n,Wm(this,e)}toString(){return this.snapshot.toString()}};function VC(t){let e=XF(t),n=new Je([new Ar("",{})]),r=new Je({}),i=new Je({}),o=new Je({}),s=new Je(""),a=new Kn(n,r,o,s,i,X,t,e.root);return a.snapshot=e.root,new za(new Pt(a,[]),e)}function XF(t){let e={},n={},r={},i="",o=new wi([],e,r,i,n,X,t,null,{});return new qa("",new Pt(o,[]))}var Kn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[Qa]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Ti(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Ti(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Dd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&UC(i)&&(r.resolve[Qa]=i.title),r}var wi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qa]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ti(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ti(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},qa=class extends Td{url;constructor(e,n){super(n),this.url=e,Wm(this,n)}toString(){return jC(this._root)}};function Wm(t,e){e.value._routerState=t,e.children.forEach(n=>Wm(t,n))}function jC(t){let e=t.children.length>0?` { ${t.children.map(jC).join(", ")} } `:"";return`${t.value}${e}`}function Nm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fn(e.params,n.params)||t.paramsSubject.next(n.params),SF(e.url,n.url)||t.urlSubject.next(n.url),fn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function jm(t,e){let n=fn(t.params,e.params)&&MF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||jm(t.parent,e.parent))}function UC(t){return typeof t.title=="string"||t.title===null}var BC=new B(""),Gm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new It;deactivateEvents=new It;attachEvents=new It;detachEvents=new It;routerOutletData=sD(void 0);parentContexts=x(Go);location=x(_a);changeDetector=x(Vl);inputBinder=x(Ad,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Um(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_i({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ma]})}return t})(),Um=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Kn?this.route:e===Go?this.childContexts:e===BC?this.outletData:this.parent.get(e,n)}},Ad=new B("");var Km=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=YD({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&om(0,"router-outlet")},dependencies:[Gm],encapsulation:2})}return t})();function Qm(t){let e=t.children&&t.children.map(Qm),n=e?ge(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=Km),n}function eV(t,e,n){let r=Wa(t,e._root,n?n._root:void 0);return new za(r,e)}function Wa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=tV(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wa(t,a)),s}}let r=nV(e.value),i=e.children.map(o=>Wa(t,o));return new Pt(r,i)}}function tV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wa(t,r,i);return Wa(t,r)})}function nV(t){return new Kn(new Je(t.url),new Je(t.params),new Je(t.queryParams),new Je(t.fragment),new Je(t.data),t.outlet,t.component,t)}var qo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},$C="ngNavigationCancelingError";function bd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Rr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HC(!1,Ct.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function HC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[$C]=!0,n.cancellationCode=e,n}function rV(t){return zC(t)&&Rr(t.url)}function zC(t){return!!t&&t[$C]}var iV=(t,e,n,r)=>ne(i=>(new Bm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Bm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Nm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Uo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Uo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Id(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _d(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Nm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Nm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Cd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$o=class{component;route;constructor(e,n){this.component=e,this.route=n}};function oV(t,e,n){let r=t._root,i=e?e._root:null;return Fa(r,i,n,[r.value])}function sV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ko(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!tT(t)?t:e.get(t):r}function Fa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Uo(e);return t.children.forEach(s=>{aV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ja(a,n.getContext(s),i)),i}function aV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=cV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Cd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fa(t,e,a?a.children:null,r,i):Fa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $o(a.outlet.component,s))}else s&&ja(e,a,i),i.canActivateChecks.push(new Cd(r)),o.component?Fa(t,null,a?a.children:null,r,i):Fa(t,null,n,r,i);return i}function cV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ii(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(t.url,e.url)||!fn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jm(t,e)||!fn(t.queryParams,e.queryParams);case"paramsChange":default:return!jm(t,e)}}function ja(t,e,n){let r=Uo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ja(s,e.children.getContext(o),n):ja(s,null,n):ja(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $o(e.outlet.component,i)):n.canDeactivateChecks.push(new $o(null,i)):n.canDeactivateChecks.push(new $o(null,i))}function Ja(t){return typeof t=="function"}function uV(t){return typeof t=="boolean"}function lV(t){return t&&Ja(t.canLoad)}function dV(t){return t&&Ja(t.canActivate)}function hV(t){return t&&Ja(t.canActivateChild)}function fV(t){return t&&Ja(t.canDeactivate)}function pV(t){return t&&Ja(t.canMatch)}function qC(t){return t instanceof Mn||t?.name==="EmptyError"}var od=Symbol("INITIAL_VALUE");function Wo(){return Nt(t=>Lu(t.map(e=>e.pipe(Pn(1),mp(od)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===od)return od;if(n===!1||gV(n))return n}return!0}),Rt(e=>e!==od),Pn(1)))}function gV(t){return Rr(t)||t instanceof qo}function mV(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(ge(L({},n),{guardsResult:!0})):yV(s,r,i,t).pipe($e(a=>a&&uV(a)?vV(r,o,t,e):G(a)),ne(a=>ge(L({},n),{guardsResult:a})))})}function yV(t,e,n,r){return Se(t).pipe($e(i=>TV(i.component,i.route,n,e,r)),xn(i=>i!==!0,!0))}function vV(t,e,n,r){return Se(e).pipe(_r(i=>lo(EV(i.route.parent,r),_V(i.route,r),wV(t,i.path,n),IV(t,i.route,n))),xn(i=>i!==!0,!0))}function _V(t,e){return t!==null&&e&&e(new Ed(t)),G(!0)}function EV(t,e){return t!==null&&e&&e(new vd(t)),G(!0)}function IV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>Fu(()=>{let s=Za(e)??n,a=Ko(o,s),u=dV(a)?a.canActivate(e,t):tt(s,()=>a(e,t));return Nr(u).pipe(xn())}));return G(i).pipe(Wo())}function wV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>sV(s)).filter(s=>s!==null).map(s=>Fu(()=>{let a=s.guards.map(u=>{let l=Za(s.node)??n,h=Ko(u,l),p=hV(h)?h.canActivateChild(r,t):tt(l,()=>h(r,t));return Nr(p).pipe(xn())});return G(a).pipe(Wo())}));return G(o).pipe(Wo())}function TV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=Za(e)??i,l=Ko(a,u),h=fV(l)?l.canDeactivate(t,e,n,r):tt(u,()=>l(t,e,n,r));return Nr(h).pipe(xn())});return G(s).pipe(Wo())}function DV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=Ko(s,t),u=lV(a)?a.canLoad(e,n):tt(t,()=>a(e,n));return Nr(u)});return G(o).pipe(Wo(),WC(r))}function WC(t){return sp(Xe(e=>{if(typeof e!="boolean")throw bd(t,e)}),ne(e=>e===!0))}function bV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=Ko(s,t),u=pV(a)?a.canMatch(e,n):tt(t,()=>a(e,n));return Nr(u)});return G(o).pipe(Wo(),WC(r))}var Ga=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ka=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function jo(t){return uo(new Ga(t))}function CV(t){return uo(new j(4e3,!1))}function SV(t){return uo(HC(!1,Ct.GuardRejected))}var $m=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[X])return CV(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:m,data:D,title:N}=i,R=tt(o,()=>a({params:m,data:D,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:N}));if(R instanceof gn)throw new Ka(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ka(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new gn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Hm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AV(t,e,n,r,i){let o=GC(t,e,n);return o.matched?(r=ZF(e,r),bV(r,e,n,i).pipe(ne(s=>s===!0?o:L({},Hm)))):G(o)}function GC(t,e,n){if(e.path==="**")return RV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Hm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wC)(n,t,e);if(!i)return L({},Hm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function RV(t){return{matched:!0,parameters:t.length>0?DC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function _C(t,e,n,r){return n.length>0&&PV(t,n,r)?{segmentGroup:new me(e,MV(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&xV(t,n,r)?{segmentGroup:new me(t.segments,NV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function NV(t,e,n,r){let i={};for(let o of n)if(Rd(t,e,o)&&!r[Zt(o)]){let s=new me([],{});i[Zt(o)]=s}return L(L({},r),i)}function MV(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&Zt(r)!==X){let i=new me([],{});n[Zt(r)]=i}return n}function PV(t,e,n){return n.some(r=>Rd(t,e,r)&&Zt(r)!==X)}function xV(t,e,n){return n.some(r=>Rd(t,e,r))}function Rd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function kV(t,e,n){return e.length===0&&!t.children[n]}var zm=class{};function OV(t,e,n,r,i,o,s="emptyOnly"){return new qm(t,e,n,r,i,s,o).recognize()}var LV=31,qm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new $m(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=_C(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:n,rootSnapshot:r})=>{let i=new Pt(r,n),o=new qa("",i),s=xC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new wi([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,n).pipe(ne(r=>({children:r,rootSnapshot:n})),vr(r=>{if(r instanceof Ka)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ga?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof Pt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Se(o).pipe(_r(s=>{let a=r.children[s],u=JF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),gp((s,a)=>(s.push(...a),s)),Er(null),pp(),$e(s=>{if(s===null)return jo(r);let a=KC(s);return FV(a),G(a)}))}processSegment(e,n,r,i,o,s,a){return Se(n).pipe(_r(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(vr(l=>{if(l instanceof Ga)return G(null);throw l}))),xn(u=>!!u),vr(u=>{if(qC(u))return kV(r,i,o)?G(new zm):jo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Zt(r)!==s&&(s===X||!Rd(i,o,r))?jo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):jo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=GC(n,i,o);if(!u)return jo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LV&&(this.allowRedirects=!1));let m=new wi(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,EC(i),Zt(i),i.component??i._loadedComponent??null,i,IC(i)),D=Dd(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(D.params),m.data=Object.freeze(D.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,N).pipe($e(R=>this.processSegment(e,r,n,R.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=AV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Nt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:m}=u,D=new wi(y,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,EC(r),Zt(r),r.component??r._loadedComponent??null,r,IC(r)),N=Dd(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=_C(n,y,m,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,D).pipe(ne(U=>new Pt(D,U)));if(l.length===0&&O.length===0)return G(new Pt(D,[]));let H=Zt(r)===o;return this.processSegment(h,l,R,O,H?X:o,!0,D).pipe(ne(U=>new Pt(D,U instanceof Pt?[U]:[])))}))):jo(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):DV(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(Xe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):SV(n))):G({routes:[],injector:e})}};function FV(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function VV(t){let e=t.value.routeConfig;return e&&e.path===""}function KC(t){let e=[],n=new Set;for(let r of t){if(!VV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=KC(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function EC(t){return t.data||{}}function IC(t){return t.resolve||{}}function jV(t,e,n,r,i,o){return $e(s=>OV(t,e,n,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:u})=>ge(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function UV(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of QC(u))s.add(l);let a=0;return Se(s).pipe(_r(u=>o.has(u)?BV(u,r,t,e):(u.data=Dd(u,u.parent,t).resolve,G(void 0))),Xe(()=>a++),ho(1),$e(u=>a===s.size?G(n):vt))})}function QC(t){let e=t.children.map(n=>QC(n)).flat();return[t,...e]}function BV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!UC(i)&&(o[Qa]=i.title),$V(o,t,e,r).pipe(ne(s=>(t._resolvedData=s,t.data=Dd(t,t.parent,n).resolve,null)))}function $V(t,e,n,r){let i=xm(t);if(i.length===0)return G({});let o={};return Se(i).pipe($e(s=>HV(t[s],e,n,r).pipe(xn(),Xe(a=>{if(a instanceof qo)throw bd(new Di,a);o[s]=a}))),ho(1),ne(()=>o),vr(s=>qC(s)?vt:uo(s)))}function HV(t,e,n,r){let i=Za(e)??r,o=Ko(t,i),s=o.resolve?o.resolve(e,n):tt(i,()=>o(e,n));return Nr(s)}function Mm(t){return Nt(e=>{let n=t(e);return n?Se(n).pipe(ne(()=>e)):G(e)})}var Ym=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(n){return n.data[Qa]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(YC),providedIn:"root"})}return t})(),YC=(()=>{class t extends Ym{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(K(pC))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xa=new B("",{providedIn:"root",factory:()=>({})}),ec=new B(""),ZC=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(gb);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Nr(n.loadComponent()).pipe(ne(XC),Xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Xr(()=>{this.componentLoaders.delete(n)})),i=new oo(r,()=>new He).pipe(io());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=JC(r,this.compiler,n,this.onLoadEndListener).pipe(Xr(()=>{this.childrenLoaders.delete(r)})),s=new oo(o,()=>new He).pipe(io());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function JC(t,e,n,r){return Nr(t.loadChildren()).pipe(ne(XC),$e(i=>i instanceof nm||Array.isArray(i)?G(i):Se(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ec,[],{optional:!0,self:!0}).flat()),{routes:s.map(Qm),injector:o}}))}function zV(t){return t&&typeof t=="object"&&"default"in t}function XC(t){return zV(t)?t.default:t}var Nd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(qV),providedIn:"root"})}return t})(),qV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eS=new B("");var tS=new B(""),nS=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new He;transitionAbortSubject=new He;configLoader=x(ZC);environmentInjector=x(et);destroyRef=x(Tr);urlSerializer=x(Ya);rootContexts=x(Go);location=x(Oo);inputBindingEnabled=x(Ad,{optional:!0})!==null;titleStrategy=x(Ym);options=x(Xa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Nd);createViewTransition=x(eS,{optional:!0});navigationErrorHandler=x(tS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new md(i)),r=i=>this.events.next(new yd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ge(L({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new Je(null),this.transitions.pipe(Rt(r=>r!==null),Nt(r=>{let i=!1,o=!1;return G(r).pipe(Nt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ct.SupersededByNewNavigation),vt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ge(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Gn(s.id,this.urlSerializer.serialize(s.rawUrl),l,Ba.IgnoredSameUrlNavigation)),s.resolve(!1),vt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return G(s).pipe(Nt(l=>(this.events.next(new bi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?vt:Promise.resolve(l))),jV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ge(L({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new $a(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:y,extras:m}=s,D=new bi(l,this.urlSerializer.serialize(h),p,y);this.events.next(D);let N=VC(this.rootComponentType).snapshot;return this.currentTransition=r=ge(L({},s),{targetSnapshot:N,urlAfterRedirects:h,extras:ge(L({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,G(r)}else{let l="";return this.events.next(new Gn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Ba.IgnoredByUrlHandlingStrategy)),s.resolve(!1),vt}}),Xe(s=>{let a=new hd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ne(s=>(this.currentTransition=r=ge(L({},s),{guards:oV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),mV(this.environmentInjector,s=>this.events.next(s)),Xe(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw bd(this.urlSerializer,s.guardsResult);let a=new fd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Rt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ct.GuardRejected),!1)),Mm(s=>{if(s.guards.canActivateChecks.length!==0)return G(s).pipe(Xe(a=>{let u=new pd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Nt(a=>{let u=!1;return G(a).pipe(UV(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Ct.NoDataFromResolver)}}))}),Xe(a=>{let u=new gd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Mm(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Xe(h=>{u.component=h}),ne(()=>{})));for(let h of u.children)l.push(...a(h));return l};return Lu(a(s.targetSnapshot.root)).pipe(Er(null),Pn(1))}),Mm(()=>this.afterPreactivation()),Nt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Se(u).pipe(ne(()=>r)):G(r)}),ne(s=>{let a=eV(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ge(L({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Xe(()=>{this.events.next(new Ha)}),iV(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Pn(1),Xe({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),yp(this.transitionAbortSubject.pipe(Xe(s=>{throw s}))),Xr(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Ct.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(s=>{if(this.destroyed)return r.resolve(!1),vt;if(o=!0,zC(s))this.events.next(new pn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),rV(s)?this.events.next(new zo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ho(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof qo){let{message:l,cancellationCode:h}=bd(this.urlSerializer,u);this.events.next(new pn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new zo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return vt}))}))}cancelNavigationTransition(n,r,i){let o=new pn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WV(t){return t!==ud}var rS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(GV),providedIn:"root"})}return t})(),Sd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},GV=(()=>{class t extends Sd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ng(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iS=(()=>{class t{urlSerializer=x(Ya);options=x(Xa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(Oo);urlHandlingStrategy=x(Nd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof gn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=VC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(KV),providedIn:"root"})}return t})(),KV=(()=>{class t extends iS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof bi?this.updateStateMemento():n instanceof Gn?this.commitTransition(r):n instanceof $a?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ha?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof pn&&(n.code===Ct.GuardRejected||n.code===Ct.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ho?this.restoreHistory(r,!0):n instanceof mn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ng(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zm(t,e){t.events.pipe(Rt(n=>n instanceof mn||n instanceof pn||n instanceof Ho||n instanceof Gn),ne(n=>n instanceof mn||n instanceof Gn?0:(n instanceof pn?n.code===Ct.Redirect||n.code===Ct.SupersededByNewNavigation:!1)?2:1),Rt(n=>n!==2),Pn(1)).subscribe(()=>{e()})}var QV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tc=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(nb);stateManager=x(iS);options=x(Xa,{optional:!0})||{};pendingTasks=x(Un);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(nS);urlSerializer=x(Ya);location=x(Oo);urlHandlingStrategy=x(Nd);_events=new He;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(rS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(ec,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Ad,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ne;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pn&&r.code!==Ct.Redirect&&r.code!==Ct.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mn)this.navigated=!0;else if(r instanceof zo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||WV(i.source)},s);this.scheduleNavigation(a,ud,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}JV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ud,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Qm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=kC(y)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return OC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Rr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ud,null,r)}navigate(n,r={skipLocationChange:!1}){return ZV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},QV):r===!1?i=L({},YV):i=r,Rr(n))return gC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return gC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return Zm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function JV(t){return!(t instanceof Ha)&&!(t instanceof zo)}var oS=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new He;constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof mn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Rr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:ED(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Rr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(qe(tc),qe(Kn),Mg("tabindex"),qe(Ol),qe(va),qe(ko))};static \u0275dir=_i({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&sm("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&im("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",jl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",jl],replaceUrl:[2,"replaceUrl","replaceUrl",jl],routerLink:"routerLink"},features:[ma]})}return t})();var e2=new B("");function t2(t,...e){return Fn([{provide:ec,multi:!0,useValue:t},[],{provide:Kn,useFactory:n2,deps:[tc]},{provide:rm,multi:!0,useFactory:r2},e.map(n=>n.\u0275providers)])}function n2(t){return t.routerState.root}function r2(){let t=x(pt);return e=>{let n=t.get(fi);if(e!==n.components[0])return;let r=t.get(tc),i=t.get(i2);t.get(o2)===1&&r.initialNavigation(),t.get(s2,null,te.Optional)?.setUpPreloading(),t.get(e2,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var i2=new B("",{factory:()=>new He}),o2=new B("",{providedIn:"root",factory:()=>1});var s2=new B("");var sS=()=>{};var uS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},a2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Md={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(n[h],n[p],n[y],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Xm;let y=o<<2|a>>4;if(r.push(y),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Xm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},c2=function(t){let e=uS(t);return Md.encodeByteArray(e,!0)},rc=function(t){return c2(t).replace(/\./g,"")},Pd=function(t){try{return Md.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ty(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var u2=()=>ty().__FIREBASE_DEFAULTS__,l2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Pd(t[1]);return e&&JSON.parse(e)},xd=()=>{try{return sS()||u2()||l2()||d2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ny=t=>{var e,n;return(n=(e=xd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lS=t=>{let e=ny(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ry=()=>{var t;return(t=xd())===null||t===void 0?void 0:t.config},iy=t=>{var e;return(e=xd())===null||e===void 0?void 0:e[`_${t}`]};var Ci=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Mr(t){return t.endsWith(".cloudworkstations.dev")}function kd(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function dS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rc(JSON.stringify(n)),rc(JSON.stringify(s)),""].join(".")}var nc={};function h2(){let t={prod:[],emulator:[]};for(let e of Object.keys(nc))nc[e]?t.emulator.push(e):t.prod.push(e);return t}function f2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var aS=!1;function Od(t,e){if(typeof window>"u"||typeof document>"u"||!Mr(window.location.host)||nc[t]===e||nc[t]||aS)return;nc[t]=e;function n(y){return`__firebase__banner__${y}`}let r="__firebase__banner",o=h2().prod.length>0;function s(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,m){y.setAttribute("width","24"),y.setAttribute("id",m),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function l(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{aS=!0,s()},y}function h(y,m){y.setAttribute("id",m),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=f2(r),m=n("text"),D=document.getElementById(m)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),H=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let U=y.element;a(U),h(R,N);let de=l();u(H,O),U.append(H,D,R,de),document.body.appendChild(U)}o?(D.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function p2(){var t;let e=(t=xd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mS(){let t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yS(){return!p2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ic(){try{return typeof indexedDB=="object"}catch{return!1}}function vS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var g2="FirebaseError",kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=g2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}},Jt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?m2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new kt(i,a,r)}};function m2(t,e){return t.replace(y2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var y2=/\{\$([^}]+)}/g;function _S(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(cS(o)&&cS(s)){if(!yn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function cS(t){return t!==null&&typeof t=="object"}function Qo(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Zo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ES(t,e){let n=new ey(t,e);return n.subscribe.bind(n)}var ey=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");v2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jm),i.error===void 0&&(i.error=Jm),i.complete===void 0&&(i.complete=Jm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function v2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jm(){}var mK=4*60*60*1e3;function Oe(t){return t&&t._delegate?t._delegate:t}var gt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Si="[DEFAULT]";var oy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ci;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E2(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _2(t){return t===Si?void 0:t}function E2(t){return t.instantiationMode==="EAGER"}var Ld=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new oy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var I2=[],oe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(oe||{}),w2={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},T2=oe.INFO,D2={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},b2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=D2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},vn=class{constructor(e){this.name=e,this._logLevel=T2,this._logHandler=b2,this._userLogHandler=null,I2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var C2=(t,e)=>e.some(n=>t instanceof n),IS,wS;function S2(){return IS||(IS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A2(){return wS||(wS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var TS=new WeakMap,ay=new WeakMap,DS=new WeakMap,sy=new WeakMap,uy=new WeakMap;function R2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(_n(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&TS.set(n,t)}).catch(()=>{}),uy.set(e,t),e}function N2(t){if(ay.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ay.set(t,e)}var cy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bS(t){cy=t(cy)}function M2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Fd(this),e,...n);return DS.set(r,e.sort?e.sort():[e]),_n(r)}:A2().includes(t)?function(...e){return t.apply(Fd(this),e),_n(TS.get(this))}:function(...e){return _n(t.apply(Fd(this),e))}}function P2(t){return typeof t=="function"?M2(t):(t instanceof IDBTransaction&&N2(t),C2(t,S2())?new Proxy(t,cy):t)}function _n(t){if(t instanceof IDBRequest)return R2(t);if(sy.has(t))return sy.get(t);let e=P2(t);return e!==t&&(sy.set(t,e),uy.set(e,t)),e}var Fd=t=>uy.get(t);function SS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=_n(s);return r&&s.addEventListener("upgradeneeded",u=>{r(_n(s.result),u.oldVersion,u.newVersion,_n(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var x2=["get","getKey","getAll","getAllKeys","count"],k2=["put","add","delete","clear"],ly=new Map;function CS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=k2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||x2.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return ly.set(e,o),o}bS(t=>ge(L({},t),{get:(e,n,r)=>CS(e,n)||t.get(e,n,r),has:(e,n)=>!!CS(e,n)||t.has(e,n)}));var hy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(O2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function O2(t){let e=t.getComponent();return e?.type==="VERSION"}var fy="@firebase/app",AS="0.13.1";var Qn=new vn("@firebase/app"),L2="@firebase/app-compat",F2="@firebase/analytics-compat",V2="@firebase/analytics",j2="@firebase/app-check-compat",U2="@firebase/app-check",B2="@firebase/auth",$2="@firebase/auth-compat",H2="@firebase/database",z2="@firebase/data-connect",q2="@firebase/database-compat",W2="@firebase/functions",G2="@firebase/functions-compat",K2="@firebase/installations",Q2="@firebase/installations-compat",Y2="@firebase/messaging",Z2="@firebase/messaging-compat",J2="@firebase/performance",X2="@firebase/performance-compat",ej="@firebase/remote-config",tj="@firebase/remote-config-compat",nj="@firebase/storage",rj="@firebase/storage-compat",ij="@firebase/firestore",oj="@firebase/ai",sj="@firebase/firestore-compat",aj="firebase",cj="11.9.0";var py="[DEFAULT]",uj={[fy]:"fire-core",[L2]:"fire-core-compat",[V2]:"fire-analytics",[F2]:"fire-analytics-compat",[U2]:"fire-app-check",[j2]:"fire-app-check-compat",[B2]:"fire-auth",[$2]:"fire-auth-compat",[H2]:"fire-rtdb",[z2]:"fire-data-connect",[q2]:"fire-rtdb-compat",[W2]:"fire-fn",[G2]:"fire-fn-compat",[K2]:"fire-iid",[Q2]:"fire-iid-compat",[Y2]:"fire-fcm",[Z2]:"fire-fcm-compat",[J2]:"fire-perf",[X2]:"fire-perf-compat",[ej]:"fire-rc",[tj]:"fire-rc-compat",[nj]:"fire-gcs",[rj]:"fire-gcs-compat",[ij]:"fire-fst",[sj]:"fire-fst-compat",[oj]:"fire-vertex","fire-js":"fire-js",[aj]:"fire-js-all"};var oc=new Map,lj=new Map,gy=new Map;function RS(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xt(t){let e=t.name;if(gy.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;gy.set(e,t);for(let n of oc.values())RS(n,t);for(let n of lj.values())RS(n,t);return!0}function Jo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mt(t){return t==null?!1:t.settings!==void 0}var dj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new Jt("app","Firebase",dj);var my=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}};var xr=cj;function _y(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:py,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Pr.create("bad-app-name",{appName:String(i)});if(n||(n=ry()),!n)throw Pr.create("no-options");let o=oc.get(i);if(o){if(yn(n,o.options)&&yn(r,o.config))return o;throw Pr.create("duplicate-app",{appName:i})}let s=new Ld(i);for(let u of gy.values())s.addComponent(u);let a=new my(n,r,s);return oc.set(i,a),a}function Ai(t=py){let e=oc.get(t);if(!e&&t===py&&ry())return _y();if(!e)throw Pr.create("no-app",{appName:t});return e}function Vd(){return Array.from(oc.values())}function Le(t,e,n){var r;let i=(r=uj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}Xt(new gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var hj="firebase-heartbeat-database",fj=1,sc="firebase-heartbeat-store",dy=null;function xS(){return dy||(dy=SS(hj,fj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),dy}function pj(t){return _(this,null,function*(){try{let n=(yield xS()).transaction(sc),r=yield n.objectStore(sc).get(kS(t));return yield n.done,r}catch(e){if(e instanceof kt)Qn.warn(e.message);else{let n=Pr.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(n.message)}}})}function NS(t,e){return _(this,null,function*(){try{let r=(yield xS()).transaction(sc,"readwrite");yield r.objectStore(sc).put(e,kS(t)),yield r.done}catch(n){if(n instanceof kt)Qn.warn(n.message);else{let r=Pr.create("idb-set",{originalErrorMessage:n?.message});Qn.warn(r.message)}}})}function kS(t){return`${t.name}!${t.options.appId}`}var gj=1024,mj=30,yy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new vy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=MS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>mj){let s=vj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=MS(),{heartbeatsToSend:r,unsentEntries:i}=yj(this._heartbeatsCache.heartbeats),o=rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Qn.warn(n),""}})}};function MS(){return new Date().toISOString().substring(0,10)}function yj(t,e=gj){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),PS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var vy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return ic()?vS().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield pj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function PS(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}function vj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function _j(t){Xt(new gt("platform-logger",e=>new hy(e),"PRIVATE")),Xt(new gt("heartbeat",e=>new yy(e),"PRIVATE")),Le(fy,AS,t),Le(fy,AS,"esm2017"),Le("fire-js","")}_j("");var Ej="firebase",Ij="11.9.1";Le(Ej,Ij,"app");function YS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZS=YS,JS=new Jt("auth","Firebase",YS());var zd=new vn("@firebase/auth");function wj(t,...e){zd.logLevel<=oe.WARN&&zd.warn(`Auth (${xr}): ${t}`,...e)}function Ud(t,...e){zd.logLevel<=oe.ERROR&&zd.error(`Auth (${xr}): ${t}`,...e)}function $t(t,...e){throw By(t,...e)}function en(t,...e){return By(t,...e)}function Uy(t,e,n){let r=Object.assign(Object.assign({},ZS()),{[e]:n});return new Jt("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return Uy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tj(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$t(t,"argument-error"),Uy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function By(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JS.create(t,...e)}function W(t,e,...n){if(!t)throw By(e,...n)}function Yn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ud(e),new Error(e)}function Xn(t,e){t||Yn(e)}function qd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XS(){return OS()==="http:"||OS()==="https:"}function OS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Dj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XS()||pS()||"connection"in navigator)?navigator.onLine:!0}function bj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ri=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=hS()||gS()}get(){return Dj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $y(t,e){Xn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Wd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Sj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Aj=new Ri(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function tr(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return e0(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Qo(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:y},l);return fS()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Mr(t.emulatorConfig.host)&&(m.credentials="include"),Wd.fetch()(yield t0(t,t.config.apiHost,n,p),m)}))})}function e0(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Cj),e);try{let i=new wy(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw jd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw jd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw jd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw jd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Uy(t,h,l);$t(t,h)}}catch(i){if(i instanceof kt)throw i;$t(t,"network-request-failed",{message:String(i)})}})}function gc(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield tr(t,e,n,r,i);return"mfaPendingCredential"in l&&$t(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function t0(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?$y(t.config,i):`${t.config.apiScheme}://${i}`;return Sj.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Rj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),Aj.get())})}};function jd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=en(t,e,r);return i.customData._tokenResponse=n,i}function LS(t){return t!==void 0&&t.enterprise!==void 0}var Ty=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Rj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Nj(t,e){return _(this,null,function*(){return tr(t,"GET","/v2/recaptchaConfig",er(t,e))})}function Mj(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:delete",e)})}function Gd(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:lookup",e)})}function cc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Hy(t,e=!1){return _(this,null,function*(){let n=Oe(t),r=yield n.getIdToken(e),i=zy(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cc(Ey(i.auth_time)),issuedAtTime:cc(Ey(i.iat)),expirationTime:cc(Ey(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ey(t){return Number(t)*1e3}function zy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ud("JWT malformed, contained fewer than 3 sections"),null;try{let i=Pd(n);return i?JSON.parse(i):(Ud("Failed to decode base64 JWT payload"),null)}catch(i){return Ud("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FS(t){let e=zy(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lc(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof kt&&Pj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Pj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Dy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Kd(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield lc(t,Gd(n,{idToken:r}));W(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?n0(o.providerUserInfo):[],a=xj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function qy(t){return _(this,null,function*(){let e=Oe(t);yield Kd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function xj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function n0(t){return t.map(e=>{var{providerId:n}=e,r=wu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function kj(t,e){return _(this,null,function*(){let n=yield e0(t,{},()=>_(null,null,function*(){let r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield t0(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Mr(t.emulatorConfig.host)&&(u.credentials="include"),Wd.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Oj(t,e){return _(this,null,function*(){return tr(t,"POST","/v2/accounts:revokeToken",er(t,e))})}var uc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=FS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield kj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Yn("not implemented")}};function kr(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Or=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=wu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield lc(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Hy(this,e)}reload(){return qy(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Kd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(mt(this.auth.app))return Promise.reject(Jn(this.auth));let e=yield this.getIdToken();return yield lc(this,Mj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:de,isAnonymous:Ue,providerData:ie,stsTokenManager:T}=n;W(U&&T,e,"internal-error");let v=uc.fromJSON(this.name,T);W(typeof U=="string",e,"internal-error"),kr(p,e.name),kr(y,e.name),W(typeof de=="boolean",e,"internal-error"),W(typeof Ue=="boolean",e,"internal-error"),kr(m,e.name),kr(D,e.name),kr(N,e.name),kr(R,e.name),kr(O,e.name),kr(H,e.name);let I=new t({uid:U,auth:e,email:y,emailVerified:de,displayName:p,isAnonymous:Ue,photoURL:D,phoneNumber:m,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:H});return ie&&Array.isArray(ie)&&(I.providerData=ie.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new uc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Kd(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?n0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new uc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var VS=new Map;function Zn(t){Xn(t instanceof Function,"Expected a class definition");let e=VS.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VS.set(t,e),e)}var Lj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),by=Lj;function Bd(t,e,n){return`firebase:${t}:${e}:${n}`}var Qd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Bd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Bd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Gd(this.auth,{idToken:e}).catch(()=>{});return n?Or._fromGetAccountInfoResponse(this.auth,n,e):null}return Or._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Zn(by),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Zn(by),s=Bd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let y=yield Gd(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield Or._fromGetAccountInfoResponse(e,y,h)}else p=Or._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function jS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c0(e))return"Blackberry";if(u0(e))return"Webos";if(i0(e))return"Safari";if((e.includes("chrome/")||o0(e))&&!e.includes("edge/"))return"Chrome";if(a0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function r0(t=Ke()){return/firefox\//i.test(t)}function i0(t=Ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o0(t=Ke()){return/crios\//i.test(t)}function s0(t=Ke()){return/iemobile/i.test(t)}function a0(t=Ke()){return/android/i.test(t)}function c0(t=Ke()){return/blackberry/i.test(t)}function u0(t=Ke()){return/webos/i.test(t)}function Wy(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Fj(t=Ke()){var e;return Wy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vj(){return mS()&&document.documentMode===10}function l0(t=Ke()){return Wy(t)||a0(t)||u0(t)||c0(t)||/windows phone/i.test(t)||s0(t)}function d0(t,e=[]){let n;switch(t){case"Browser":n=jS(Ke());break;case"Worker":n=`${jS(Ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}var Cy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jj(n){return _(this,arguments,function*(t,e={}){return tr(t,"GET","/v2/passwordPolicy",er(t,e))})}var Uj=6,Sy=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Uj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ay=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yd(this),this.idTokenSubscription=new Yd(this),this.beforeStateQueue=new Cy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Qd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Gd(this,{idToken:e}),r=yield Or._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(mt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Kd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=bj()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(mt(this.app))return Promise.reject(Jn(this));let n=e?Oe(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return mt(this.app)?Promise.reject(Jn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return mt(this.app)?Promise.reject(Jn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Zn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield jj(this),n=new Sy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Oj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Zn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield Qd.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&wj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Lr(t){return Oe(t)}var Yd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ES(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var oh={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bj(t){oh=t}function h0(t){return oh.loadJS(t)}function $j(){return oh.recaptchaEnterpriseScript}function Hj(){return oh.gapiScript}function f0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Ry=class{constructor(){this.enterprise=new Ny}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Ny=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var zj="recaptcha-enterprise",p0="NO_RECAPTCHA",My=class{constructor(e){this.type=zj,this.auth=Lr(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){Nj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ty(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;LS(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(p0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ry().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&LS(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=$j();u.length!==0&&(u+=a),h0(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function ac(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new My(t),s;if(i)s=p0;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Py(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield ac(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield ac(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield ac(t,e,n);return r(t,a).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield ac(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield ac(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function Gy(t,e){let n=Jo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(yn(o,e??{}))return i;$t(i,"already-initialized")}return n.initialize({options:e})}function qj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ky(t,e,n){let r=Lr(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=g0(e),{host:s,port:a}=Wj(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(yn(l,r.config.emulator)&&yn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Mr(s)?(kd(`${o}//${s}${u}`),Od("Auth",!0)):i||Gj()}function g0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wj(t){let e=g0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:US(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:US(s)}}}function US(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Gj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var es=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}};function Kj(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:signUp",e)})}function Qj(t,e){return _(this,null,function*(){return gc(t,"POST","/v1/accounts:signInWithPassword",er(t,e))})}function Yj(t,e){return _(this,null,function*(){return gc(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))})}function Zj(t,e){return _(this,null,function*(){return gc(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))})}var hc=class t extends es{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Py(e,n,"signInWithPassword",Qj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Yj(e,{email:this._email,oobCode:this._password});default:$t(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Py(e,r,"signUpPassword",Kj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Zj(e,{idToken:n,email:this._email,oobCode:this._password});default:$t(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Xo(t,e){return _(this,null,function*(){return gc(t,"POST","/v1/accounts:signInWithIdp",er(t,e))})}var Jj="http://localhost",Zd=class t extends es{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$t("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=wu(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){let e={requestUri:Jj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}};function Xj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eU(t){let e=Yo(Zo(t)).link,n=e?Yo(Zo(e)).deep_link_id:null,r=Yo(Zo(t)).deep_link_id;return(r?Yo(Zo(r)).link:null)||r||n||e||t}var Jd=class t{constructor(e){var n,r,i,o,s,a;let u=Yo(Zo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Xj((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=eU(e);try{return new t(n)}catch{return null}}};var m0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return hc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Jd.parseLink(r);return W(i,"argument-error"),hc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),fc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Xd=class extends fc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var tU=(()=>{class t extends Xd{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Zd._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function nU(t,e){return _(this,null,function*(){return gc(t,"POST","/v1/accounts:signUp",er(t,e))})}var ts=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Or._fromIdTokenResponse(e,r,i),s=BS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=BS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function BS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var xy=class t extends kt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function y0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xy._fromErrorAndOperation(t,o,e,r):o})}function rU(t,e,n=!1){return _(this,null,function*(){let r=yield lc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ts._forOperation(t,"link",r)})}function iU(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(mt(r.app))return Promise.reject(Jn(r));let i="reauthenticate";try{let o=yield lc(t,y0(r,i,e,t),n);W(o.idToken,r,"internal-error");let s=zy(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(t.uid===a,r,"user-mismatch"),ts._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&$t(r,"user-mismatch"),o}})}function v0(t,e,n=!1){return _(this,null,function*(){if(mt(t.app))return Promise.reject(Jn(t));let r="signIn",i=yield y0(t,r,e),o=yield ts._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Qy(t,e){return _(this,null,function*(){return v0(Lr(t),e)})}function _0(t){return _(this,null,function*(){let e=Lr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function E0(t,e,n){return _(this,null,function*(){if(mt(t.app))return Promise.reject(Jn(t));let r=Lr(t),s=yield Py(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nU,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_0(t),u}),a=yield ts._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function I0(t,e,n){return mt(t.app)?Promise.reject(Jn(t)):Qy(Oe(t),m0.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&_0(t),r}))}function oU(t,e){return _(this,null,function*(){return tr(t,"POST","/v1/accounts:createAuthUri",er(t,e))})}function w0(t,e){return _(this,null,function*(){let n=XS()?qd():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=yield oU(Oe(t),r);return i||[]})}function sh(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function Yy(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function ah(t,e,n,r){return Oe(t).onAuthStateChanged(e,n,r)}function Zy(t){return Oe(t).signOut()}var eh="__sak";var th=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var sU=1e3,aU=10,cU=(()=>{class t extends th{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Vj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,aU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},sU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield pr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield pr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield pr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),T0=cU;var uU=(()=>{class t extends th{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Jy=uU;function lU(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var dU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield lU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Xy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ky=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=Xy("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function En(){return window}function hU(t){En().location.href=t}function D0(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}function fU(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function pU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gU(){return D0()?self:null}var b0="firebaseLocalStorageDb",mU=1,nh="firebaseLocalStorage",C0="fbase_key",Ni=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ch(t,e){return t.transaction([nh],e?"readwrite":"readonly").objectStore(nh)}function yU(){let t=indexedDB.deleteDatabase(b0);return new Ni(t).toPromise()}function Oy(){let t=indexedDB.open(b0,mU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(nh,{keyPath:C0})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(nh)?e(r):(r.close(),yield yU(),e(yield Oy()))}))})}function $S(t,e,n){return _(this,null,function*(){let r=ch(t,!0).put({[C0]:e,value:n});return new Ni(r).toPromise()})}function vU(t,e){return _(this,null,function*(){let n=ch(t,!1).get(e),r=yield new Ni(n).toPromise();return r===void 0?null:r.value})}function HS(t,e){let n=ch(t,!0).delete(e);return new Ni(n).toPromise()}var _U=800,EU=3,IU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Oy(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>EU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return D0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=dU._getInstance(gU()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield fU(),!this.activeServiceWorker)return;this.sender=new ky(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||pU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Oy();return yield $S(n,eh,"1"),yield HS(n,eh),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>$S(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>vU(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>HS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=ch(o,!1).getAll();return new Ni(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),_U)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),S0=IU;var GK=f0("rcb"),KK=new Ri(3e4,6e4);function A0(t,e){return e?Zn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pc=class extends es{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function wU(t){return v0(t.auth,new pc(t),t.bypassAuthState)}function TU(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),iU(n,new pc(t),t.bypassAuthState)}function DU(t){return _(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),rU(n,new pc(t),t.bypassAuthState)})}var rh=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wU;case"linkViaPopup":case"linkViaRedirect":return DU;case"reauthViaPopup":case"reauthViaRedirect":return TU;default:$t(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bU=new Ri(2e3,1e4);function ev(t,e,n){return _(this,null,function*(){if(mt(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));let r=Lr(t);Tj(t,e,fc);let i=A0(r,n);return new CU(r,"signInViaPopup",e,i).executeNotNull()})}var CU=(()=>{class t extends rh{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return _(this,null,function*(){let n=yield this.execute();return W(n,this.auth,"internal-error"),n})}onExecution(){return _(this,null,function*(){Xn(this.filter.length===1,"Popup operations only handle one event");let n=Xy();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,bU.get())};n()}}t.currentPopupAction=null;return t})(),SU="pendingRedirect",$d=new Map,Ly=class t extends rh{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=$d.get(this.auth._key());if(!e){try{let r=(yield AU(this.resolver,this.auth))?yield pr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$d.set(this.auth._key(),e)}return this.bypassAuthState||$d.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return pr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function AU(t,e){return _(this,null,function*(){let n=MU(e),r=NU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function RU(t,e){$d.set(t._key(),e)}function NU(t){return Zn(t._redirectPersistence)}function MU(t){return Bd(SU,t.config.apiKey,t.name)}function PU(t,e,n=!1){return _(this,null,function*(){if(mt(t.app))return Promise.reject(Jn(t));let r=Lr(t),i=A0(r,e),s=yield new Ly(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var xU=10*60*1e3,Fy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xU&&this.cachedEventUids.clear(),this.cachedEventUids.has(zS(e))}saveEventToCache(e){this.cachedEventUids.add(zS(e)),this.lastProcessedEventTime=Date.now()}};function zS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function kU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R0(t);default:return!1}}function OU(n){return _(this,arguments,function*(t,e={}){return tr(t,"GET","/v1/projects",e)})}var LU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FU=/^https?/;function VU(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield OU(t);for(let n of e)try{if(jU(n))return}catch{}$t(t,"unauthorized-domain")})}function jU(t){let e=qd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!FU.test(n))return!1;if(LU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var UU=new Ri(3e4,6e4);function qS(){let t=En().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BU(t){return new Promise((e,n)=>{var r,i,o;function s(){qS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qS(),n(en(t,"network-request-failed"))},timeout:UU.get()})}if(!((i=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=En().gapi)===null||o===void 0)&&o.load)s();else{let a=f0("iframefcb");return En()[a]=()=>{gapi.load?s():n(en(t,"network-request-failed"))},h0(`${Hj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Hd=null,e})}var Hd=null;function $U(t){return Hd=Hd||BU(t),Hd}var HU=new Ri(5e3,15e3),zU="__/auth/iframe",qU="emulator/auth/iframe",WU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KU(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?$y(e,qU):`https://${t.config.authDomain}/${zU}`,r={apiKey:e.apiKey,appName:t.name,v:xr},i=GU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qo(r).slice(1)}`}function QU(t){return _(this,null,function*(){let e=yield $U(t),n=En().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:KU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WU,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=en(t,"network-request-failed"),a=En().setTimeout(()=>{o(s)},HU.get());function u(){En().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var YU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZU=500,JU=600,XU="_blank",eB="http://localhost",ih=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function tB(t,e,n,r=ZU,i=JU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},YU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ke().toLowerCase();n&&(a=o0(l)?XU:n),r0(l)&&(e=e||eB,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,D])=>`${y}${m}=${D},`,"");if(Fj(l)&&a!=="_self")return nB(e||"",a),new ih(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new ih(p)}function nB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rB="__/auth/handler",iB="emulator/auth/handler",oB=encodeURIComponent("fac");function WS(t,e,n,r,i,o){return _(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(e instanceof fc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",_S(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Xd){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${oB}=${encodeURIComponent(u)}`:"";return`${sB(t)}?${Qo(a).slice(1)}${l}`})}function sB({config:t}){return t.emulator?$y(t,iB):`https://${t.authDomain}/${rB}`}var Iy="webStorageSupport",Vy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jy,this._completeRedirectFn=PU,this._overrideRedirectResult=RU}_openPopup(e,n,r,i){return _(this,null,function*(){var o;Xn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield WS(e,n,r,qd(),i);return tB(e,s,Xy())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield WS(e,n,r,qd(),i);return hU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Xn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield QU(e),r=new Fy(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Iy,{type:Iy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Iy];s!==void 0&&n(!!s),$t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return l0()||i0()||Wy()}},N0=Vy;var GS="@firebase/auth",KS="1.10.7";var jy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function aB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(t){Xt(new gt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d0(t)},l=new Ay(r,i,o,u);return qj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xt(new gt("auth-internal",e=>{let n=Lr(e.getProvider("auth").getImmediate());return(r=>new jy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(GS,KS,aB(t)),Le(GS,KS,"esm2017")}var uB=5*60,lB=iy("authIdTokenMaxAge")||uB,QS=null,dB=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lB)return;let i=n?.token;QS!==i&&(QS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function M0(t=Ai()){let e=Jo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Gy(t,{popupRedirectResolver:N0,persistence:[S0,T0,Jy]}),r=iy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=dB(o.toString());Yy(n,s,()=>s(n.currentUser)),sh(n,a=>s(a))}}let i=ny("auth");return i&&Ky(n,`http://${i}`),n}function hB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Bj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=en("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",hB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");function tv(t){t===void 0&&(Eg(tv),t=x(pt));let e=t.get(Cl);return n=>new ee(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var rs=new fa("ANGULARFIRE2_VERSION");function nv(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var lh=(t,e)=>{let n=e?[e]:Vd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ns=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(ns||{}),x0=am()&&typeof Zone<"u"?ns.WARN:ns.SILENT;var uh=class{zone;delegate;constructor(e,n=hp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},is=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=x(ve);this.outsideAngular=n.runOutsideAngular(()=>new uh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new uh(typeof Zone>"u"?void 0:Zone.current,dp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),k0=!1;function ZB(t,e){!k0&&(x0>ns.SILENT||am())&&(k0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),x0>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function JB(t){let e=x(ve,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Mi(t){let e=x(ve,{optional:!0});return e?e.run(()=>t()):t()}var XB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),tt(n,()=>Mi(()=>t.apply(void 0,r)))),Pi=(t,e,n)=>(n||=e?ns.WARN:ns.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=x(is),s=x(Cl),a=x(et)}catch{return ZB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Mi(()=>s.add())),i[l]=XB(i[l],r,a));let u=JB(()=>t.apply(this,i));return e?u instanceof ee?u.pipe(yr(o.outsideAngular),mr(o.insideAngular),tv(a)):u instanceof Promise?Mi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(y=>tt(a,()=>Mi(()=>h(y))),y=>tt(a,()=>Mi(()=>p(y)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Mi(()=>u):u instanceof ee?u.pipe(yr(o.outsideAngular),mr(o.insideAngular)):Mi(()=>u)});var xi=class{constructor(e){return e}},mc=class{constructor(){return Vd()}};function e$(t){return t&&t.length===1?t[0]:new xi(Ai())}var rv=new B("angularfire2._apps"),t$={provide:xi,useFactory:e$,deps:[[new gi,rv]]},n$={provide:mc,deps:[[new gi,rv]]};function r$(t){return(e,n)=>{let r=n.get(vi);Le("angularfire",rs.full,"core"),Le("angularfire",rs.full,"app"),Le("angular",pb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new xi(i)}}function YQ(t,...e){return Fn([t$,n$,{provide:rv,useFactory:r$(t),multi:!0,deps:[ve,pt,is,...e]}])}var ZQ=Pi(_y,!0);var i$=new Map,o$={activated:!1,tokenObservers:[]},s$={initialized:!1,enabled:!1};function tn(t){return i$.get(t)||Object.assign({},o$)}function V0(){return s$}var a$="https://content-firebaseappcheck.googleapis.com/v1";var c$="exchangeDebugToken",O0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},sY=24*60*60*1e3;var sv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Ci,this.pending.promise.catch(n=>{}),yield u$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ci,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function u$(t){return new Promise(e=>{setTimeout(e,t)})}var l$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Fr=new Jt("appCheck","AppCheck",l$);function j0(t){if(!tn(t).activated)throw Fr.create("use-before-activation",{appName:t.name})}function U0(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(m){throw Fr.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Fr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Fr.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Fr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function B0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${a$}/projects/${n}/apps/${r}:${c$}?key=${i}`,body:{debug_token:e}}}var d$="firebase-app-check-database",h$=1,av="firebase-app-check-store";var dh=null;function f$(){return dh||(dh=new Promise((t,e)=>{try{let n=indexedDB.open(d$,h$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Fr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(av,{keyPath:"compositeKey"})}}}catch(n){e(Fr.create("storage-open",{originalErrorMessage:n?.message}))}}),dh)}function p$(t,e){return g$(m$(t),e)}function g$(t,e){return _(this,null,function*(){let r=(yield f$()).transaction(av,"readwrite"),o=r.objectStore(av).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Fr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function m$(t){return`${t.options.appId}-${t.name}`}var yc=new vn("@firebase/app-check");function iv(t,e){return ic()?p$(t,e).catch(n=>{yc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function $0(){return V0().enabled}function H0(){return _(this,null,function*(){let t=V0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var y$={error:"UNKNOWN_ERROR"};function v$(t){return Md.encodeString(JSON.stringify(t),!1)}function cv(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;j0(r);let i=tn(r),o=i.token,s;if(o&&!vc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(vc(l)?o=l:yield iv(r,void 0))}if(!e&&o&&vc(o))return{token:o.token};let a=!1;if($0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=U0(B0(r,yield H0()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield iv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?yc.warn(l.message):n&&yc.error(l),ov(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?yc.warn(l.message):n&&yc.error(l),s=l}let u;return o?s?vc(o)?u={token:o.token,internalError:s}:u=ov(s):(u={token:o.token},i.token=o,yield iv(r,o)):u=ov(s),a&&w$(r,u),u})}function _$(t){return _(this,null,function*(){let e=t.app;j0(e);let{provider:n}=tn(e);if($0()){let r=yield H0(),{token:i}=yield U0(B0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function E$(t,e,n,r){let{app:i}=t,o=tn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&vc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),L0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>L0(t))}function z0(t,e){let n=tn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function L0(t){let{app:e}=t,n=tn(e),r=n.tokenRefresher;r||(r=I$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function I$(t){let{app:e}=t;return new sv(()=>_(null,null,function*(){let n=tn(e),r;if(n.token?r=yield cv(t,!0):r=yield cv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=tn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},O0.RETRIAL_MIN_WAIT,O0.RETRIAL_MAX_WAIT)}function w$(t,e){let n=tn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function vc(t){return t.expireTimeMillis-Date.now()>0}function ov(t){return{token:v$(y$),error:t}}var uv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=tn(this.app);for(let n of e)z0(this.app,n.next);return Promise.resolve()}};function T$(t,e){return new uv(t,e)}function D$(t){return{getToken:e=>cv(t,e),getLimitedUseToken:()=>_$(t),addTokenListener:e=>E$(t,"INTERNAL",e),removeTokenListener:e=>z0(t.app,e)}}var b$="@firebase/app-check",C$="0.10.0";var S$="app-check",F0="app-check-internal";function A$(){Xt(new gt(S$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return T$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(F0).initialize()})),Xt(new gt(F0,t=>{let e=t.getProvider("app-check").getImmediate();return D$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Le(b$,C$)}A$();var R$="app-check";var hh=class{constructor(){return lh(R$)}};var N$=["localhost","0.0.0.0","127.0.0.1"],_Y=typeof window<"u"&&N$.includes(window.location.hostname);function q0(t){return new ee(function(e){var n=ah(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var W0="auth",_c=class{constructor(e){return e}},lv=class{constructor(){return lh(W0)}};var dv=new B("angularfire2.auth-instances");function M$(t,e){let n=nv(W0,t,e);return n&&new _c(n)}function P$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new _c(r)}}var x$={provide:lv,deps:[[new gi,dv]]},k$={provide:_c,useFactory:M$,deps:[[new gi,dv],xi]};function OY(t,...e){return Le("angularfire",rs.full,"auth"),Fn([k$,x$,{provide:dv,useFactory:P$(t),multi:!0,deps:[ve,pt,is,mc,[new gi,hh],...e]}])}var LY=Pi(q0,!0);var FY=Pi(ev,!0,2);var VY=Pi(Zy,!0,2);var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K0={};var nr,hv;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,b,S){for(var E=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)E[Sn-2]=arguments[Sn];return v.prototype[b].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],E=v+(S^I&(b^S))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[2]+606105819&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[6]+2821735955&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[10]+4294925233&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[14]+2792965006&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^S&(I^b))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[11]+643717713&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[15]+3634488961&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[3]+4107603335&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[7]+1735328473&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^S)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[11]+1839030562&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[7]+4139469664&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[3]+3572445317&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[15]+530742520&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~S))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[14]+2878612391&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[10]+4293915773&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[6]+2734768916&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[2]+718787259&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(w[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,w),b=0;break}}else for(;S<v;)if(w[b++]=T[S++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;w&&S==v||(I[b]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return R(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),E=parseInt(T.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),y=u(1),m=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var b=de(I,v).g;I=O(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,D(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=O(this,T),N(T)?-1:D(T)?0:1};function R(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(y)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,b=0;b<=v;b++){var S=w+(this.i(b)&65535)+(T.i(b)&65535),E=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=E>>>16,S&=65535,E&=65535,I[b]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(R(v))}t.j=function(T){if(D(this)||D(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var S=this.i(w)>>>16,E=this.i(w)&65535,Sn=T.i(b)>>>16,Rs=T.i(b)&65535;I[2*w+2*b]+=E*Rs,H(I,2*w+2*b),I[2*w+2*b+1]+=S*Rs,H(I,2*w+2*b+1),I[2*w+2*b+1]+=E*Sn,H(I,2*w+2*b+1),I[2*w+2*b+2]+=S*Sn,H(I,2*w+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function H(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function U(T,v){this.g=T,this.h=v}function de(T,v){if(D(v))throw Error("division by zero");if(D(T))return new U(p,p);if(N(T))return v=de(R(T),v),new U(R(v.g),R(v.h));if(N(v))return v=de(T,R(v)),new U(R(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=y,w=v;0>=w.l(T);)I=Ue(I),w=Ue(w);var b=ie(I,1),S=ie(w,1);for(w=ie(w,2),I=ie(I,2);!D(w);){var E=S.add(w);0>=E.l(T)&&(b=b.add(I),S=E),w=ie(w,1),I=ie(I,1)}return v=O(T,b.j(v)),new U(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(v);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(v);D(S)&&(S=y),b=b.add(S),T=O(T,E)}return new U(b,T)}t.A=function(T){return de(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function Ue(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function ie(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,b=[],S=0;S<w;S++)b[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hv=K0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,nr=K0.Integer=s}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var fv,O$,os,pv,Ec,ph,gv,mv,yv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return d.prototype[C].apply(g,k)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let k=0;k<A;k++)c[C+k]=g[k]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function U(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function de(c){return de[" "](c),c}de[" "]=function(){};var Ue=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function ie(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=pf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sn{constructor(){this.h=this.g=null}add(d,f){let g=Rs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Rs=new O(()=>new gN,c=>c.reset());class gN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ns,Ms=!1,pf=new Sn,NE=()=>{let c=a.Promise.resolve(void 0);Ns=()=>{c.then(mN)}};var mN=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=Rs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ms=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var yN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ps(c,d){if(rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ue){e:{try{de(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:vN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ps.aa.h.call(this)}}D(Ps,rt);var vN={2:"touch",3:"pen",4:"mouse"};Ps.prototype.h=function(){Ps.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xs="closure_listenable_"+(1e6*Math.random()|0),_N=0;function EN(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++_N,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=mf(c,d,g,C);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new EN(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function gf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&($c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function mf(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var yf="closure_lm_"+(1e6*Math.random()|0),vf={};function ME(c,d,f,g,C){if(g&&g.once)return xE(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)ME(c,d[A],f,g,C);return null}return f=wf(f),c&&c[xs]?c.K(d,f,l(g)?!!g.capture:!!g,C):PE(c,d,f,!1,g,C)}function PE(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,Ee=Ef(c);if(Ee||(c[yf]=Ee=new Hc(c)),f=Ee.add(d,f,g,k,A),f.proxy)return f;if(g=IN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)yN||(C=k),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(OE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function IN(){function c(f){return d.call(c.src,c.listener,f)}let d=wN;return c}function xE(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)xE(c,d[A],f,g,C);return null}return f=wf(f),c&&c[xs]?c.L(d,f,l(g)?!!g.capture:!!g,C):PE(c,d,f,!0,g,C)}function kE(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)kE(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=wf(f),c&&c[xs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=mf(A,f,g,C),-1<f&&($c(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ef(c))&&(d=c.g[d.toString()],c=-1,d&&(c=mf(d,f,g,C)),(f=-1<c?d[c]:null)&&_f(f))}function _f(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[xs])gf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(OE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ef(d))?(gf(f,c),f.h==0&&(f.src=null,d[yf]=null)):$c(c)}}}function OE(c){return c in vf?vf[c]:vf[c]="on"+c}function wN(c,d){if(c.da)c=!0;else{d=new Ps(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&_f(c),c=f.call(g,d)}return c}function Ef(c){return c=c[yf],c instanceof Hc?c:null}var If="__closure_events_fn_"+(1e9*Math.random()>>>0);function wf(c){return typeof c=="function"?c:(c[If]||(c[If]=function(d){return c.handleEvent(d)}),c[If])}function it(){lr.call(this),this.i=new Hc(this),this.M=this,this.F=null}D(it,lr),it.prototype[xs]=!0,it.prototype.removeEventListener=function(c,d,f,g){kE(this,c,d,f,g)};function lt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new rt(d,c);else if(d instanceof rt)d.target=d.target||c;else{var C=d;d=new rt(g,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];C=zc(k,g,!0,d)&&C}if(k=d.g=c,C=zc(k,g,!0,d)&&C,C=zc(k,g,!1,d)&&C,f)for(A=0;A<f.length;A++)k=d.g=f[A],C=zc(k,g,!1,d)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)$c(f[g]);delete c.g[d],c.h--}}this.F=null},it.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},it.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Ee=k.listener,Ze=k.ha||k.src;k.fa&&gf(c.i,k),C=Ee.call(Ze,g)!==!1&&C}}return C&&!g.defaultPrevented}function LE(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function FE(c){c.g=LE(()=>{c.g=null,c.i&&(c.i=!1,FE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class TN extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:FE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(c){lr.call(this),this.h=c,this.g={}}D(ks,lr);var VE=[];function jE(c){ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&_f(d)},c),c.g={}}ks.prototype.N=function(){ks.aa.N.call(this),jE(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tf=a.JSON.stringify,DN=a.JSON.parse,bN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Df(){}Df.prototype.h=null;function UE(c){return c.h||(c.h=c.i())}function BE(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bf(){rt.call(this,"d")}D(bf,rt);function Cf(){rt.call(this,"c")}D(Cf,rt);var qr={},$E=null;function qc(){return $E=$E||new it}qr.La="serverreachability";function HE(c){rt.call(this,qr.La,c)}D(HE,rt);function Ls(c){let d=qc();lt(d,new HE(d))}qr.STAT_EVENT="statevent";function zE(c,d){rt.call(this,qr.STAT_EVENT,c),this.stat=d}D(zE,rt);function dt(c){let d=qc();lt(d,new zE(d,c))}qr.Ma="timingevent";function qE(c,d){rt.call(this,qr.Ma,c),this.size=d}D(qE,rt);function Fs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Vs(){this.g=!0}Vs.prototype.xa=function(){this.g=!1};function CN(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var k="",Ee=A.split("&"),Ze=0;Ze<Ee.length;Ze++){var pe=Ee[Ze].split("=");if(1<pe.length){var ot=pe[0];pe=pe[1];var st=ot.split("_");k=2<=st.length&&st[1]=="type"?k+(ot+"="+pe+"&"):k+(ot+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function SN(c,d,f,g,C,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+k})}function Ki(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+RN(c,f)+(g?" "+g:"")})}function AN(c,d){c.info(function(){return"TIMEOUT: "+d})}Vs.prototype.info=function(){};function RN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return Tf(f)}catch{return d}}var Wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},WE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sf;function Gc(){}D(Gc,Df),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},Sf=new Gc;function dr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new GE}function GE(){this.i=null,this.g="",this.h=!1}var KE={},Af={};function Rf(c,d,f){c.L=1,c.v=Zc(An(d)),c.m=f,c.P=!0,QE(c,null)}function QE(c,d){c.F=Date.now(),Kc(c),c.A=An(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),uI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new GE,c.g=SI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new TN(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(VE[0]=C.toString()),C=VE);for(var A=0;A<C.length;A++){var k=ME(f,C[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ls(),CN(c.i,c.u,c.A,c.l,c.R,c.m)}dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Rn(c)==3?d.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{let st=Rn(this.g);var d=this.g.Ba();let Zi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||mI(this.g)))){this.J||st!=4||d==7||(d==8||0>=Zi?Ls(3):Ls(2)),Nf(this);var f=this.g.Z();this.X=f;t:if(YE(this)){var g=mI(this.g);c="";var C=g.length,A=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),js(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,SN(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ze=this.g;if((Ee=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ee)){var pe=Ee;break t}}pe=null}if(f=pe)Ki(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mf(this,f);else{this.o=!1,this.s=3,dt(12),Wr(this),js(this);break e}}if(this.P){f=!0;let zt;for(;!this.J&&this.C<k.length;)if(zt=NN(this,k),zt==Af){st==4&&(this.s=4,dt(14),f=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==KE){this.s=4,dt(15),Ki(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Ki(this.i,this.l,zt,null),Mf(this,zt);if(YE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||k.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)Ki(this.i,this.l,k,"[Invalid Chunked Response]"),Wr(this),js(this);else if(0<k.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Ff(ot),ot.M=!0,dt(11))}}else Ki(this.i,this.l,k,null),Mf(this,k);st==4&&Wr(this),this.o&&!this.J&&(st==4?TI(this.j,this):(this.o=!1,Kc(this)))}else GN(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Wr(this),js(this)}}}catch{}finally{}};function YE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function NN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Af:(f=Number(d.substring(f,g)),isNaN(f)?KE:(g+=1,g+f>d.length?Af:(d=d.slice(g,g+f),c.C=g+f,d)))}dr.prototype.cancel=function(){this.J=!0,Wr(this)};function Kc(c){c.S=Date.now()+c.I,ZE(c,c.I)}function ZE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fs(y(c.ba,c),d)}function Nf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(AN(this.i,this.A),this.L!=2&&(Ls(),dt(17)),Wr(this),this.s=2,js(this)):ZE(this,this.S-c)};function js(c){c.j.G==0||c.J||TI(c.j,c)}function Wr(c){Nf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,jE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Mf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Pf(f.h,c))){if(!c.K&&Pf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nu(f),eu(f);else break e;Lf(f),dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fs(y(f.Za,f),6e3));if(1>=eI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Kr(f,11)}else if((c.K||f.g==c)&&nu(f),!H(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let ot=pe[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let st=pe[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));let Zi=pe[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(g=1.5*Zi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let zt=c.g;if(zt){let iu=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var A=g.h;A.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(xf(A,A.h),A.h=null))}if(g.D){let Vf=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Vf&&(g.ya=Vf,be(g.I,g.D,Vf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=CI(g,g.J?g.ia:null,g.W),k.K){tI(g.h,k);var Ee=k,Ze=g.L;Ze&&(Ee.I=Ze),Ee.B&&(Nf(Ee),Kc(Ee)),g.g=k}else II(g);0<f.i.length&&tu(f)}else pe[0]!="stop"&&pe[0]!="close"||Kr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Kr(f,7):Of(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Ls(4)}catch{}}var MN=class{constructor(c,d){this.g=c,this.map=d}};function JE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function XE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function eI(c){return c.h?1:c.g?c.g.size:0}function Pf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function xf(c,d){c.g?c.g.add(d):c.h=d}function tI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}JE.prototype.cancel=function(){if(this.i=nI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function nI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function PN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function xN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function rI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=xN(c),g=PN(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var iI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Gr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Gr){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new $s;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),oI(this,f),this.m=c.m}else c&&(d=String(c).match(iI))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=Us(d[2]||""),this.g=Us(d[3]||"",!0),Yc(this,d[4]),this.l=Us(d[5]||"",!0),oI(this,d[6]||"",!0),this.m=Us(d[7]||"")):(this.h=!1,this.i=new $s(null,this.h))}Gr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Bs(d,sI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Bs(d,sI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Bs(f,f.charAt(0)=="/"?FN:LN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Bs(f,jN)),c.join("")};function An(c){return new Gr(c)}function Qc(c,d,f){c.j=f?Us(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function oI(c,d,f){d instanceof $s?(c.i=d,UN(c.i,c.h)):(f||(d=Bs(d,VN)),c.i=new $s(d,c.h))}function be(c,d,f){c.i.set(d,f)}function Zc(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Us(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Bs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,ON),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ON(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sI=/[#\/\?@]/g,LN=/[#\?:]/g,FN=/[#\?]/g,VN=/[#\?@]/g,jN=/#/g;function $s(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function hr(c){c.g||(c.g=new Map,c.h=0,c.i&&kN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=$s.prototype,t.add=function(c,d){hr(this),this.i=null,c=Qi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function aI(c,d){hr(c),d=Qi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function cI(c,d){return hr(c),d=Qi(c,d),c.g.has(d)}t.forEach=function(c,d){hr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){hr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){hr(this);let d=[];if(typeof c=="string")cI(this,c)&&(d=d.concat(this.g.get(Qi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return hr(this),this.i=null,c=Qi(this,c),cI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function uI(c,d,f){aI(c,d),0<f.length&&(c.i=null,c.g.set(Qi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var C=A;k[g]!==""&&(C+="="+encodeURIComponent(String(k[g]))),c.push(C)}}return this.i=c.join("&")};function Qi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function UN(c,d){d&&!c.j&&(hr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(aI(this,g),uI(this,C,f))},c)),c.j=d}function BN(c,d){let f=new Vs;if(a.Image){let g=new Image;g.onload=m(fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(fr,f,"TestLoadImage: error",!1,d,g),g.onabort=m(fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(fr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function $N(c,d){let f=new Vs,g=new AbortController,C=setTimeout(()=>{g.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),fr(f,"TestPingServer: error",!1,d)})}function fr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function HN(){this.g=new bN}function zN(c,d,f){let g=f||"";try{rI(c,function(C,A){let k=C;l(C)&&(k=Tf(C)),d.push(g+A+"="+encodeURIComponent(k))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Hs(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Hs,Df),Hs.prototype.g=function(){return new Jc(this.l,this.j)},Hs.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){it.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Jc,it),t=Jc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,qs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zs(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?zs(this):qs(this),this.readyState==3&&lI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,zs(this))},t.Qa=function(c){this.g&&(this.response=c,zs(this))},t.ga=function(){this.g&&zs(this)};function zs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function qs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dI(c){let d="";return ie(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function kf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=dI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):be(c,d,f))}function Re(c){it.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Re,it);var qN=/^https?$/i,WN=["POST","PUT"];t=Re.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sf.g(),this.v=this.o?UE(this.o):UE(Sf),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){hI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(WN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){hI(this,A)}};function hI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,fI(c),Xc(c)}function fI(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,lt(this,"complete"),lt(this,"abort"),Xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pI(this):this.bb())},t.bb=function(){pI(this)};function pI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Rn(c)!=4||c.Z()!=2)){if(c.u&&Rn(c)==4)LE(c.Ea,0,c);else if(lt(c,"readystatechange"),Rn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var C=String(c.D).match(iI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!qN.test(C?C.toLowerCase():"")}f=g}if(f)lt(c,"complete"),lt(c,"success");else{c.m=6;try{var A=2<Rn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",fI(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){gI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||lt(c,"ready");try{f.onreadystatechange=g}catch{}}}function gI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Rn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),DN(d)}};function mI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GN(c){let d={};c=(c.g&&2<=Rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(H(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function yI(c){this.Aa=0,this.i=[],this.j=new Vs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,c),this.cb=Ws("retryDelaySeedMs",1e4,c),this.Wa=Ws("forwardChannelMaxRetries",2,c),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new JE(c&&c.concurrentRequestLimit),this.Da=new HN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){dt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=CI(this,null,this.W),tu(this)};function Of(c){if(vI(c),c.G==3){var d=c.U++,f=An(c.I);if(be(f,"SID",c.K),be(f,"RID",d),be(f,"TYPE","terminate"),Gs(c,f),d=new dr(c,c.j,d),d.L=2,d.v=Zc(An(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=SI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}bI(c)}function eu(c){c.g&&(Ff(c),c.g.cancel(),c.g=null)}function vI(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!XE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ns||NE(),Ms||(Ns(),Ms=!0),pf.add(d,c),c.B=0}}function KN(c,d){return eI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fs(y(c.Ga,c,d),DI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new dr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=EI(this,C,d),f=An(this.I),be(f,"RID",c),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),Gs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(dI(A)))+"&"+d:this.m&&kf(f,this.m,A)),xf(this.h,C),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),C.T=!0,Rf(C,f,null)):Rf(C,f,d),this.G=2}}else this.G==3&&(c?_I(this,c):this.i.length==0||XE(this.h)||_I(this))};function _I(c,d){var f;d?f=d.l:f=c.U++;let g=An(c.I);be(g,"SID",c.K),be(g,"RID",f),be(g,"AID",c.T),Gs(c,g),c.m&&c.o&&kf(g,c.m,c.o),f=new dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=EI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xf(c.h,f),Rf(f,g,d)}function Gs(c,d){c.H&&ie(c.H,function(f,g){be(d,g,f)}),c.l&&rI({},function(f,g){be(d,g,f)})}function EI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=C[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ee=!0;for(let Ze=0;Ze<f;Ze++){let pe=C[Ze].g,ot=C[Ze].map;if(pe-=A,0>pe)A=Math.max(0,C[Ze].g-100),Ee=!1;else try{zN(ot,k,"req"+pe+"_")}catch{g&&g(ot)}}if(Ee){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function II(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ns||NE(),Ms||(Ns(),Ms=!0),pf.add(d,c),c.v=0}}function Lf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fs(y(c.Fa,c),DI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,wI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fs(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),eu(this),wI(this))};function Ff(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function wI(c){c.g=new dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=An(c.qa);be(d,"RID","rpc"),be(d,"SID",c.K),be(d,"AID",c.T),be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(d,"TO",c.ja),be(d,"TYPE","xmlhttp"),Gs(c,d),c.m&&c.o&&kf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Zc(An(d)),f.m=null,f.P=!0,QE(f,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),Lf(this),dt(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function TI(c,d){var f=null;if(c.g==d){nu(c),Ff(c),c.g=null;var g=2}else if(Pf(c.h,d))f=d.D,tI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=qc(),lt(g,new qE(g,f)),tu(c)}else II(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&KN(c,d)||g==2&&Lf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Kr(c,5);break;case 4:Kr(c,10);break;case 3:Kr(c,6);break;default:Kr(c,2)}}}function DI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Kr(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let C=!g;g=new Gr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Zc(g),C?BN(g.toString(),f):$N(g.toString(),f)}else dt(2);c.G=0,c.l&&c.l.sa(d),bI(c),vI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function bI(c){if(c.G=0,c.ka=[],c.l){let d=nI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function CI(c,d,f){var g=f instanceof Gr?An(f):new Gr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Gr(null);g&&Qc(A,g),d&&(A.g=d),C&&Yc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&be(g,f,d),be(g,"VER",c.la),Gs(c,g),g}function SI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Re(new Hs({eb:f})):new Re(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function AI(){}t=AI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,d){return new St(c,d)};function St(c,d){it.call(this),this.g=new yI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Yi(this)}D(St,it),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){Of(this.g)},St.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Tf(c),c=f);d.i.push(new MN(d.Ya++,c)),d.G==3&&tu(d)},St.prototype.N=function(){this.g.l=null,delete this.j,Of(this.g),delete this.g,St.aa.N.call(this)};function RI(c){bf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(RI,bf);function NI(){Cf.call(this),this.status=1}D(NI,Cf);function Yi(c){this.g=c}D(Yi,AI),Yi.prototype.ua=function(){lt(this.g,"a")},Yi.prototype.ta=function(c){lt(this.g,new RI(c))},Yi.prototype.sa=function(c){lt(this.g,new NI)},Yi.prototype.ra=function(){lt(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,yv=rr.createWebChannelTransport=function(){return new ru},mv=rr.getStatEventTarget=function(){return qc()},gv=rr.Event=qr,ph=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,Ec=rr.ErrorCode=Wc,WE.COMPLETE="complete",pv=rr.EventType=WE,BE.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",it.prototype.listen=it.prototype.K,os=rr.WebChannel=BE,O$=rr.FetchXmlHttpFactory=Hs,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,fv=rr.XhrIo=Re}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});var Q0="@firebase/firestore",Y0="4.7.17";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var bs="11.9.0";var Vi=new vn("@firebase/firestore");function ss(){return Vi.logLevel}function V(t,...e){if(Vi.logLevel<=oe.DEBUG){let n=e.map(aE);Vi.debug(`Firestore (${bs}): ${t}`,...n)}}function ir(t,...e){if(Vi.logLevel<=oe.ERROR){let n=e.map(aE);Vi.error(`Firestore (${bs}): ${t}`,...n)}}function fs(t,...e){if(Vi.logLevel<=oe.WARN){let n=e.map(aE);Vi.warn(`Firestore (${bs}): ${t}`,...n)}}function aE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$A(t,r,n)}function $A(t,e,n){let r=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||$A(e,i,r)}function Q(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ih=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}},Tv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Dv=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Ih(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Qe(e)}},bv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Cv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new bv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function L$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function HA(){return new TextEncoder}var Th=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=L$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function Av(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return re(r,i);{let o=HA(),s=F$(o.encode(Z0(t,n)),o.encode(Z0(e,n)));return s!==0?s:re(r,i)}}n+=r>65535?2:1}return re(t.length,e.length)}function Z0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function F$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function ps(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var J0=-62135596800,X0=1e6,nt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*X0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J0)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X0}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-J0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new nt(0,0))}static max(){return new t(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var eA="__name__",Dh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Av(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}},Ae=class t extends Dh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},V$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ot=class t extends Dh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return V$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eA}static keyField(){return new t([eA])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ae.fromString(e))}static fromName(e){return new t(Ae.fromString(e).popFirst(5))}static empty(){return new t(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ae(e.slice()))}};var Cc=-1,Rv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Rv.UNKNOWN_ID=-1;function j$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ji(i,z.empty(),e)}function U$(t){return new ji(t.readTime,t.key,Cc)}var ji=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),z.empty(),Cc)}static max(){return new t(J.max(),z.empty(),Cc)}};function B$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var $$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Cs(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==$$)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function H$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ss(t){return t.name==="IndexedDbTransactionError"}var cE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),uE=-1;function of(t){return t==null}function Sc(t){return t===0&&1/t==-1/0}function z$(t){return typeof t=="number"&&Number.isInteger(t)&&!Sc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zA="";function q$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tA(e)),e=W$(t.get(n),e);return tA(e)}function W$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case zA:n+="";break;default:n+=o}}return n}function tA(t){return t+zA+""}var G$="remoteDocuments",qA="owner";var WA="mutationQueues";var GA="mutations";var KA="documentMutations",K$="remoteDocumentsV14";var QA="remoteDocumentGlobal";var YA="targets";var ZA="targetDocuments";var JA="targetGlobal",XA="collectionParents";var eR="clientMetadata";var tR="bundles";var nR="namedQueries";var Q$="indexConfiguration";var Y$="indexState";var Z$="indexEntries";var rR="documentOverlays";var J$="globals";var X$=[WA,GA,KA,G$,YA,qA,JA,ZA,eR,QA,XA,tR,nR],XY=[...X$,rR],eH=[WA,GA,KA,K$,YA,qA,JA,ZA,eR,QA,XA,tR,nR,rR],tH=eH,nH=[...tH,Q$,Y$,Z$];var eZ=[...nH,J$];function nA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||Tn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ls(this.root,e,this.comparator,!0)}},ls=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Tn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bh(this.data.getIterator())}getIteratorFrom(e){return new bh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},bh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var In=class t{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ye(Ot.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ps(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ch=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ut=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ch("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var rH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ye(!!t,39018),typeof t=="string"){let e=0,n=rH.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}var oR="server_timestamp",sR="__type__",aR="__previous_value__",cR="__local_write_time__";function lE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sR])===null||n===void 0?void 0:n.stringValue)===oR}function sf(t){let e=t.mapValue.fields[aR];return lE(e)?sf(e):e}function Ac(t){let e=or(t.mapValue.fields[cR].timestampValue);return new nt(e.seconds,e.nanos)}var Mv=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Sh="(default)",Ah=class t{constructor(e,n){this.projectId=e,this.database=n||Sh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var dE="__type__",uR="__max__",gh={mapValue:{fields:{__type__:{stringValue:uR}}}},hE="__vector__",gs="value";function Ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lE(t)?4:dR(t)?9007199254740991:lR(t)?10:11:q(28295,{value:t})}function Cn(t,e){if(t===e)return!0;let n=Ur(t);if(n!==Ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ac(t).isEqual(Ac(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return sr(i.bytesValue).isEqual(sr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?Sc(s)===Sc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(nA(s)!==nA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Cn(s[u],a[u])))return!1;return!0}(t,e);default:return q(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function ms(t,e){if(t===e)return 0;let n=Ur(t),r=Ur(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return rA(t.timestampValue,e.timestampValue);case 4:return rA(Ac(t),Ac(e));case 5:return Av(t.stringValue,e.stringValue);case 6:return function(o,s){let a=sr(o),u=sr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ce(o.latitude),Ce(s.latitude));return a!==0?a:re(Ce(o.longitude),Ce(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iA(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},m=(a=p[gs])===null||a===void 0?void 0:a.arrayValue,D=(u=y[gs])===null||u===void 0?void 0:u.arrayValue,N=re(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:iA(m,D)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===gh.mapValue&&s===gh.mapValue)return 0;if(o===gh.mapValue)return 1;if(s===gh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=Av(u[p],h[p]);if(y!==0)return y;let m=ms(a[u[p]],l[h[p]]);if(m!==0)return m}return re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw q(23264,{Pe:n})}}function rA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=or(t),r=or(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function iA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ms(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function ys(t){return Pv(t)}function Pv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Pv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Pv(n.fields[s])}`;return i+"}"}(t.mapValue):q(61005,{value:t})}function vh(t){switch(Ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=sf(t);return e?16+vh(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+vh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Wi(r.fields,(o,s)=>{i+=o.length+vh(s)}),i}(t.mapValue);default:throw q(13486,{value:t})}}function oA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xv(t){return!!t&&"integerValue"in t}function fE(t){return!!t&&"arrayValue"in t}function sA(t){return!!t&&"nullValue"in t}function aA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _h(t){return!!t&&"mapValue"in t}function lR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[dE])===null||n===void 0?void 0:n.stringValue)===hE}function wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uR}var nZ={mapValue:{fields:{[dE]:{stringValue:hE},[gs]:{arrayValue:{}}}}};var nn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=Ot.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=wc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());_h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(wc(this.value))}};function hR(t){let e=[];return Wi(t.fields,(n,r)=>{let i=new Ot([n]);if(_h(r)){let o=hR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new In(e)}var rn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var vs=class{constructor(e,n){this.position=e,this.inclusive=n}};function cA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),n.key):r=ms(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}var Ui=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function iH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Rh=class{},je=class t extends Rh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ov(e,n,r):n==="array-contains"?new Vv(e,r):n==="in"?new jv(e,r):n==="not-in"?new Uv(e,r):n==="array-contains-any"?new Bv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Lv(e,r):new Fv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ms(n,this.value)):n!==null&&Ur(this.value)===Ur(n)&&this.matchesComparison(ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},on=class t extends Rh{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return fR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function fR(t){return t.op==="and"}function pR(t){return oH(t)&&fR(t)}function oH(t){for(let e of t.filters)if(e instanceof on)return!1;return!0}function kv(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+ys(t.value);if(pR(t))return t.filters.map(e=>kv(e)).join(",");{let e=t.filters.map(n=>kv(n)).join(",");return`${t.op}(${e})`}}function gR(t,e){return t instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&Cn(r.value,i.value)}(t,e):t instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gR(s,i.filters[a]),!0):!1}(t,e):void q(19439)}function mR(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${ys(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(mR).join(" ,")+"}"}(t):"Filter"}var Ov=class extends je{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},Lv=class extends je{constructor(e,n){super(e,"in",n),this.keys=yR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Fv=class extends je{constructor(e,n){super(e,"not-in",n),this.keys=yR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function yR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var Vv=class extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return fE(n)&&Rc(n.arrayValue,this.value)}},jv=class extends je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Rc(this.value.arrayValue,n)}},Uv=class extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rc(this.value.arrayValue,n)}},Bv=class extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!fE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var $v=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function lA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new $v(t,e,n,r,i,o,s)}function pE(t){let e=Q(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ys(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ys(r)).join(",")),e.Ie=n}return e.Ie}function gE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uA(t.startAt,e.startAt)&&uA(t.endAt,e.endAt)}function Hv(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Br=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function sH(t,e,n,r,i,o,s,a){return new Br(t,e,n,r,i,o,s,a)}function af(t){return new Br(t)}function dA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vR(t){return t.collectionGroup!==null}function Tc(t){let e=Q(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(Ot.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Ui(o,r))}),n.has(Ot.keyField().canonicalString())||e.Ee.push(new Ui(Ot.keyField(),r))}return e.Ee}function Dn(t){let e=Q(t);return e.de||(e.de=aH(e,Tc(t))),e.de}function aH(t,e){if(t.limitType==="F")return lA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ui(i.field,o)});let n=t.endAt?new vs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vs(t.startAt.position,t.startAt.inclusive):null;return lA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zv(t,e){let n=t.filters.concat([e]);return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nh(t,e,n){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cf(t,e){return gE(Dn(t),Dn(e))&&t.limitType===e.limitType}function _R(t){return`${pE(Dn(t))}|lt:${t.limitType}`}function as(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mR(i)).join(", ")}]`),of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ys(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ys(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function uf(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Tc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=cA(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Tc(r),i)||r.endAt&&!function(s,a,u){let l=cA(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Tc(r),i))}(t,e)}function cH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ER(t){return(e,n)=>{let r=!1;for(let i of Tc(t)){let o=uH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uH(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ms(u,l):q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var ar=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iR(this.inner)}size(){return this.innerSize}};var lH=new Me(z.comparator);function cr(){return lH}var IR=new Me(z.comparator);function Ic(...t){let e=IR;for(let n of t)e=e.insert(n.key,n);return e}function wR(t){let e=IR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return Dc()}function TR(){return Dc()}function Dc(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}var dH=new Me(z.comparator),hH=new Ye(z.comparator);function ue(...t){let e=hH;for(let n of t)e=e.add(n);return e}var fH=new Ye(re);function pH(){return fH}function mE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function DR(t){return{integerValue:""+t}}function gH(t,e){return z$(e)?DR(e):mE(t,e)}var _s=class{constructor(){this._=void 0}};function mH(t,e,n){return t instanceof Es?function(i,o){let s={fields:{[sR]:{stringValue:oR},[cR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lE(o)&&(o=sf(o)),o&&(s.fields[aR]=o),{mapValue:s}}(n,e):t instanceof Bi?CR(t,e):t instanceof $i?SR(t,e):function(i,o){let s=bR(i,o),a=hA(s)+hA(i.Re);return xv(s)&&xv(i.Re)?DR(a):mE(i.serializer,a)}(t,e)}function yH(t,e,n){return t instanceof Bi?CR(t,e):t instanceof $i?SR(t,e):n}function bR(t,e){return t instanceof Is?function(r){return xv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Es=class extends _s{},Bi=class extends _s{constructor(e){super(),this.elements=e}};function CR(t,e){let n=AR(e);for(let r of t.elements)n.some(i=>Cn(i,r))||n.push(r);return{arrayValue:{values:n}}}var $i=class extends _s{constructor(e){super(),this.elements=e}};function SR(t,e){let n=AR(e);for(let r of t.elements)n=n.filter(i=>!Cn(i,r));return{arrayValue:{values:n}}}var Is=class extends _s{constructor(e,n){super(),this.serializer=e,this.Re=n}};function hA(t){return Ce(t.integerValue||t.doubleValue)}function AR(t){return fE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bi&&i instanceof Bi||r instanceof $i&&i instanceof $i?ps(r.elements,i.elements,Cn):r instanceof Is&&i instanceof Is?Cn(r.Re,i.Re):r instanceof Es&&i instanceof Es}(t.transform,e.transform)}var qv=class{constructor(e,n){this.version=e,this.transformResults=n}},Fi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ws=class{};function RR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mh(t.key,Fi.none()):new Hi(t.key,t.data,Fi.none());{let n=t.data,r=nn.empty(),i=new Ye(Ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ur(t.key,r,new In(i.toArray()),Fi.none())}}function _H(t,e,n){t instanceof Hi?function(i,o,s){let a=i.value.clone(),u=pA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(i,o,s){if(!Eh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=pA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(NR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function bc(t,e,n,r){return t instanceof Hi?function(o,s,a,u){if(!Eh(o.precondition,s))return a;let l=o.value.clone(),h=gA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ur?function(o,s,a,u){if(!Eh(o.precondition,s))return a;let l=gA(o.fieldTransforms,u,s),h=s.data;return h.setAll(NR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Eh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function EH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=bR(r.transform,i||null);o!=null&&(n===null&&(n=nn.empty()),n.set(r.field,o))}return n||null}function fA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ps(r,i,(o,s)=>vH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Hi=class extends ws{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ur=class extends ws{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function NR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function pA(t,e,n){let r=new Map;ye(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,yH(s,a,n[i]))}return r}function gA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,mH(o,s,e))}return r}var Mh=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wv=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Gv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&_H(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=TR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=RR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ps(this.mutations,e.mutations,(n,r)=>fA(n,r))&&ps(this.baseMutations,e.baseMutations,(n,r)=>fA(n,r))}},Kv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return dH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Qv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Yv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,fe;function IH(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function MR(t){if(t===void 0)return ir("GRPC error has no .code"),M.UNKNOWN;switch(t){case Fe.OK:return M.OK;case Fe.CANCELLED:return M.CANCELLED;case Fe.UNKNOWN:return M.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return M.INTERNAL;case Fe.UNAVAILABLE:return M.UNAVAILABLE;case Fe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Fe.NOT_FOUND:return M.NOT_FOUND;case Fe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Fe.ABORTED:return M.ABORTED;case Fe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Fe.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(fe=Fe||(Fe={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var mA=null;var wH=new nr([4294967295,4294967295],0);function yA(t){let e=HA().encode(t),n=new hv;return n.update(e),new Uint8Array(n.digest())}function vA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new nr([n,r],0),new nr([i,o],0)]}var Zv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oi(`Invalid padding: ${n}`);if(r<0)throw new Oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=nr.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(nr.fromNumber(r)));return i.compare(wH)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=yA(e),[r,i]=vA(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let n=yA(e),[r,i]=vA(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ph=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new Me(re),cr(),ue())}},Nc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var ds=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},xh=class{constructor(e,n){this.targetId=e,this.Ce=n}},kh=class{constructor(e,n,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Oh=class{constructor(){this.Fe=0,this.Me=_A(),this.xe=ut.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ue(),n=ue(),r=ue();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Nc(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=_A()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Jv=class{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=mh(),this.Ye=mh(),this.Ze=new Me(re)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(Hv(o))if(r===0){let s=new z(o.path);this.tt(n,s,rn.newNoDocument(s,J.min()))}else ye(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}mA?.ht(function(h,p,y,m,D){var N,R,O,H,U,de;let Ue={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ie=p.unchangedNames;return ie&&(Ue.bloomFilter={applied:D===0,hashCount:(N=ie?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(H=(O=(R=ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&H!==void 0?H:0,padding:(de=(U=ie?.bits)===null||U===void 0?void 0:U.padding)!==null&&de!==void 0?de:0,mightContain:T=>{var v;return(v=m?.mightContain(T))!==null&&v!==void 0&&v}}),Ue}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=sr(r).toUint8Array()}catch(u){if(u instanceof Ch)return fs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Zv(s,i,o)}catch(u){return fs(u instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&Hv(a.target)){let u=new z(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,rn.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=ue();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Ph(e,n,this.Ze,this.He,r);return this.He=cr(),this.Je=mh(),this.Ye=mh(),this.Ze=new Me(re),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Oh,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ye(re),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ye(re),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Oh),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function mh(){return new Me(z.comparator)}function _A(){return new Me(z.comparator)}var TH={asc:"ASCENDING",desc:"DESCENDING"},DH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bH={and:"AND",or:"OR"},Xv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function e_(t,e){return t.useProto3Json||of(e)?e:{value:e}}function Lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CH(t,e){return Lh(t,e.toTimestamp())}function bn(t){return ye(!!t,49232),J.fromTimestamp(function(n){let r=or(n);return new nt(r.seconds,r.nanos)}(t))}function yE(t,e){return t_(t,e).canonicalString()}function t_(t,e){let n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xR(t){let e=Ae.fromString(t);return ye(VR(e),10190,{key:e.toString()}),e}function n_(t,e){return yE(t.databaseId,e.path)}function vv(t,e){let n=xR(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(OR(n))}function kR(t,e){return yE(t.databaseId,e)}function SH(t){let e=xR(t);return e.length===4?Ae.emptyPath():OR(e)}function r_(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OR(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function EA(t,e,n){return{name:n_(t,e),fields:n.value.mapValue.fields}}function AH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ye(h===void 0||typeof h=="string",58123),ut.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:MR(l.code);return new F(h,l.message||"")}(s);n=new kh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vv(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):J.min(),a=new nn({mapValue:{fields:r.document.fields}}),u=rn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ds(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vv(t,r.document),o=r.readTime?bn(r.readTime):J.min(),s=rn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ds([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vv(t,r.document),o=r.removedTargetIds||[];n=new ds([],o,i,null)}else{if(!("filter"in e))return q(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Yv(i,o),a=r.targetId;n=new xh(a,s)}}return n}function RH(t,e){let n;if(e instanceof Hi)n={update:EA(t,e.key,e.value)};else if(e instanceof Mh)n={delete:n_(t,e.key)};else if(e instanceof ur)n={update:EA(t,e.key,e.data),updateMask:VH(e.fieldMask)};else{if(!(e instanceof Wv))return q(16599,{ft:e.type});n={verify:n_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Es)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $i)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)}(t,e.precondition)),n}function NH(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?bn(i.updateTime):bn(o);return s.isEqual(J.min())&&(s=bn(o)),new qv(s,i.transformResults||[])}(n,e))):[]}function MH(t,e){return{documents:[kR(t,e.path)]}}function PH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kR(t,i);let o=function(l){if(l.length!==0)return FR(on.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:cs(y.field),direction:OH(y.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=e_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function xH(t){let e=SH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ye(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let y=LR(p);return y instanceof on&&pR(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(D){return new Ui(us(D.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,of(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new vs(m,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new vs(m,y)}(n.endAt)),sH(e,i,s,o,a,"F",u,l)}function kH(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=us(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=us(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=us(n.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=us(n.unaryFilter.field);return je.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}}(t):t.fieldFilter!==void 0?function(n){return je.create(us(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>LR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}}(n.compositeFilter.op))}(t):q(30097,{filter:t})}function OH(t){return TH[t]}function LH(t){return DH[t]}function FH(t){return bH[t]}function cs(t){return{fieldPath:t.canonicalString()}}function us(t){return Ot.fromServerFormat(t.fieldPath)}function FR(t){return t instanceof je?function(n){if(n.op==="=="){if(aA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(sA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(sA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:LH(n.op),value:n.value}}}(t):t instanceof on?function(n){let r=n.getFilters().map(i=>FR(i));return r.length===1?r[0]:{compositeFilter:{op:FH(n.op),filters:r}}}(t):q(54877,{filter:t})}function VH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Mc=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),a=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var i_=class{constructor(e){this.wt=e}};function jH(t){let e=xH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nh(e,e.limit,"L"):e}var Fh=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),Sc(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=or(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(sr(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?dR(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):lR(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):q(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=gs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(Ce(a)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),z.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};Fh.Wt=new Fh;var o_=class{constructor(){this.Cn=new s_}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(ji.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},s_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ae.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ae.comparator)).toArray()}};var rZ=new Uint8Array(0);var IA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jR=41943040,Ht=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(jR,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);var Pc=class t{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new t(0)}static lr(){return new t(-1)}};var wA="LruGarbageCollector",UH=1048576;function TA([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var a_=class{constructor(e){this.Er=e,this.buffer=new Ye(TA),this.dr=0}Ar(){return++this.dr}Rr(e){let n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();TA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},c_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){V(wA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ss(n)?V(wA,"Ignoring IndexedDB error during garbage collection: ",n):yield Cs(n)}yield this.mr(3e5)}))}},u_=class{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(cE.le);let r=new a_(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(IA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ss()<=oe.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function BH(t,e){return new u_(t,e)}var l_=class{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var d_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var h_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bc(r.mutation,i,In.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ic();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=cr(),s=Dc(),a=function(){return Dc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ur)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),bc(h.mutation,l,h.mutation.getFieldMask(),nt.now())):s.set(l.key,In.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new d_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Dc(),i=new Me((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||In.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=TR();h.forEach(y=>{if(!o.has(y)){let m=RR(n.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(ki()),a=Cc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:wR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=Ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ic();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,y){return new Br(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,rn.newInvalidDocument(h)))});let a=Ic();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&bc(h.mutation,l,In.empty(),nt.now()),uf(n,l)&&(a=a.insert(u,l))}),a})}};var f_=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return P.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:jH(i.bundledQuery),readTime:bn(i.readTime)}}(n)),P.resolve()}};var p_=class{constructor(){this.overlays=new Me(z.comparator),this.Qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ki();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=ki(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ki(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ki(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Qv(n,r));let o=this.Qr.get(n);o===void 0&&(o=ue(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}};var g_=class{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var xc=class{constructor(){this.$r=new Ye(Ve.Ur),this.Kr=new Ye(Ve.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ve(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){let n=new z(new Ae([])),r=new Ve(n,e),i=new Ve(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let n=new z(new Ae([])),r=new Ve(n,e),i=new Ve(n,e+1),o=ue();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ve(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return z.comparator(e.key,n.key)||re(e.Zr,n.Zr)}static Wr(e,n){return re(e.Zr,n.Zr)||z.comparator(e.key,n.key)}};var m_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ye(Ve.Ur)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Gv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new Ve(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ti(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?uE:this.nr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(re);return n.forEach(i=>{let o=new Ve(i,0),s=new Ve(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Ve(new z(o),0),a=new Ye(re);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),P.resolve(this.ni(a))}ni(e){let n=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(n.mutations,i=>{let o=new Ve(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){let r=new Ve(n,0),i=this.Xr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var y_=class{constructor(e){this.ii=e,this.docs=function(){return new Me(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr(),s=n.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||B$(U$(h),r)<=0||(i.has(h.key)||uf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}si(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new v_(this)}getSize(e){return P.resolve(this.size)}},v_=class extends l_{constructor(e){super(),this.Br=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}};var __=class{constructor(e){this.persistence=e,this.oi=new ar(n=>pE(n),gE),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this._i=0,this.ai=new xc,this.targetCount=0,this.ui=Pc.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),P.resolve()}Tr(e){this.oi.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ui=new Pc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Tr(n),P.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.oi.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ai.Yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ai.containsKey(n))}};var Vh=class{constructor(e,n){this.ci={},this.overlays={},this.li=new cE(0),this.hi=!1,this.hi=!0,this.Pi=new g_,this.referenceDelegate=e(this),this.Ti=new __(this),this.indexManager=new o_,this.remoteDocumentCache=function(i){return new y_(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new i_(n),this.Ei=new f_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new p_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new m_(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new E_(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}},E_=class extends Nv{constructor(e){super(),this.currentSequenceNumber=e}},I_=class t{constructor(e){this.persistence=e,this.Vi=new xc,this.mi=null}static fi(e){return new t(e)}get gi(){if(this.mi)return this.mi;throw q(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{let i=z.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return P.or([()=>P.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}},jh=class t{constructor(e,n){this.persistence=e,this.yi=new ar(r=>q$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BH(this,n)}static fi(e,n){return new t(e,n)}di(){}Ai(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){let n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return P.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vh(e.data.value)),n}Dr(e,n,r){return P.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.yi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var w_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=ue(),i=ue();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var T_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var D_=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return yS()?8:H$(Ke())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new T_;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,n,s,a.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(ss()<=oe.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",as(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(ss()<=oe.DEBUG&&V("QueryEngine","Query:",as(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(ss()<=oe.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",as(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):P.resolve())}ws(e,n){if(dA(n))return P.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nh(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(n,a);return this.Cs(n,l,s,u.readTime)?this.ws(e,Nh(n,null,"F")):this.Fs(e,l,n,u)}))})))}bs(e,n,r,i){return dA(n)||i.isEqual(J.min())?P.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(n,o);return this.Cs(n,s,r,i)?P.resolve(null):(ss()<=oe.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),as(n)),this.Fs(e,s,n,j$(i,Cc)).next(a=>a))})}vs(e,n){let r=new Ye(ER(e));return n.forEach((i,o)=>{uf(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ss()<=oe.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",as(n)),this.ys.getDocumentsMatchingQuery(e,n,ji.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var vE="LocalStore",$H=3e8,b_=class{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Me(re),this.Os=new ar(o=>pE(o),gE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h_(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}};function HH(t,e,n,r){return new b_(t,e,n,r)}function UR(t,e){return _(this,null,function*(){let n=Q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function zH(t,e){let n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),m=P.resolve();return y.forEach(D=>{m=m.next(()=>h.getEntry(u,D)).next(N=>{let R=l.docVersions.get(D);ye(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BR(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function qH(t,e){let n=Q(t),r=e.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(ut.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=$H?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(y,m,h)&&a.push(n.Ti.updateTargetData(o,m))});let u=cr(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(WH(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(J.min())){let h=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.xs=i,o))}function WH(t,e,n){let r=ue(),i=ue();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(vE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function GH(t,e){let n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=uE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KH(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new Mc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}function C_(t,e,n){return _(this,null,function*(){let r=Q(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ss(s))throw s;V(vE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function DA(t,e,n){let r=Q(t),i=J.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Q(u),y=p.Os.get(h);return y!==void 0?P.resolve(p.xs.get(y)):p.Ti.getTargetData(l,h)}(r,s,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:ue())).next(a=>(QH(r,cH(e),a),{documents:a,$s:o})))}function QH(t,e,n){let r=t.Ns.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}var Uh=class{constructor(){this.activeTargetIds=pH()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var S_=class{constructor(){this.xo=new Uh,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Uh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var A_=class{No(e){}shutdown(){}};var bA="ConnectivityMonitor",Bh=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){V(bA,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){V(bA,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yh=null;function R_(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}var _v="RestConnection",YH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},N_=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Sh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){let s=R_(),a=this.jo(e,n.toUriEncodedString());V(_v,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(a),h=Mr(l);return this.Jo(e,a,u,r,h).then(p=>(V(_v,`Received RPC '${e}' ${s}: `,p),p),p=>{throw fs(_v,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){let r=YH[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}};var M_=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ct="WebChannelConnection",P_=class extends N_{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=R_();return new Promise((a,u)=>{let l=new fv;l.setWithCredentials(!0),l.listenOnce(pv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ec.NO_ERROR:let p=l.getResponseJson();V(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ec.TIMEOUT:V(ct,`RPC '${e}' ${s} timed out`),u(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:let y=l.getStatus();if(V(ct,`RPC '${e}' ${s} failed with status:`,y,"response text:",l.getResponseText()),y>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let D=m?.error;if(D&&D.status&&D.message){let N=function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(D.status);u(new F(N,D.message))}else u(new F(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{V(ct,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}I_(e,n,r){let i=R_(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yv(),a=mv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.E_(p);let y=!1,m=!1,D=new M_({Zo:R=>{m?V(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(V(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),V(ct,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),N=(R,O,H)=>{R.listen(O,U=>{try{H(U)}catch(de){setTimeout(()=>{throw de},0)}})};return N(p,os.EventType.OPEN,()=>{m||(V(ct,`RPC '${e}' stream ${i} transport opened.`),D.__())}),N(p,os.EventType.CLOSE,()=>{m||(m=!0,V(ct,`RPC '${e}' stream ${i} transport closed`),D.u_(),this.d_(p))}),N(p,os.EventType.ERROR,R=>{m||(m=!0,fs(ct,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.u_(new F(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,os.EventType.MESSAGE,R=>{var O;if(!m){let H=R.data[0];ye(!!H,16349);let U=H,de=U?.error||((O=U[0])===null||O===void 0?void 0:O.error);if(de){V(ct,`RPC '${e}' stream ${i} received error:`,de);let Ue=de.status,ie=function(I){let w=Fe[I];if(w!==void 0)return MR(w)}(Ue),T=de.message;ie===void 0&&(ie=M.INTERNAL,T="Unknown error status: "+Ue+" with message "+de.message),m=!0,D.u_(new F(ie,T)),p.close()}else V(ct,`RPC '${e}' stream ${i} received:`,H),D.c_(H)}}),N(a,gv.STAT_EVENT,R=>{R.stat===ph.PROXY?V(ct,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ph.NOPROXY&&V(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.a_()},0),D}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}};function Ev(){return typeof document<"u"?document:null}function lf(t){return new Xv(t,!0)}var $h=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var CA="PersistentStream",Hh=class{constructor(e,n,r,i,o,s,a,u){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new $h(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return _(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return _(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,n){return _(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(n)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){let r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>_(this,null,function*(){this.state=0,this.start()}))}j_(e){return V(CA,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(V(CA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},x_=class extends Hh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let n=AH(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?bn(s.readTime):J.min()}(e);return this.listener.Y_(n,r)}Z_(e){let n={};n.database=r_(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Hv(u)?{documents:MH(o,u)}:{query:PH(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=PR(o,s.resumeToken);let l=e_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Lh(o,s.snapshotVersion.toTimestamp());let l=e_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=kH(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){let n={};n.database=r_(this.serializer),n.removeTarget=e,this.Q_(n)}},k_=class extends Hh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let n=NH(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.ra(r,n)}ia(){let e={};e.database=r_(this.serializer),this.Q_(e)}ta(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>RH(this.serializer,r))};this.Q_(n)}};var O_=class{},L_=class extends O_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,t_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,t_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},F_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ir(n),this.ua=!1):V("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var zi="RemoteStore",V_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Gi(this)&&(V(zi,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=Q(u);l.da.add(4),yield Uc(l),l.Va.set("Unknown"),l.da.delete(4),yield df(l)})}(this))}))}),this.Va=new F_(r,i)}};function df(t){return _(this,null,function*(){if(Gi(t))for(let e of t.Aa)yield e(!0)})}function Uc(t){return _(this,null,function*(){for(let e of t.Aa)yield e(!1)})}function $R(t,e){let n=Q(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),wE(n)?IE(n):As(n).N_()&&EE(n,e))}function _E(t,e){let n=Q(t),r=As(n);n.Ea.delete(e),r.N_()&&HR(n,e),n.Ea.size===0&&(r.N_()?r.k_():Gi(n)&&n.Va.set("Unknown"))}function EE(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}As(t).Z_(e)}function HR(t,e){t.ma.Ke(e),As(t).X_(e)}function IE(t){t.ma=new Jv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),As(t).start(),t.Va.ca()}function wE(t){return Gi(t)&&!As(t).O_()&&t.Ea.size>0}function Gi(t){return Q(t).da.size===0}function zR(t){t.ma=void 0}function ZH(t){return _(this,null,function*(){t.Va.set("Online")})}function JH(t){return _(this,null,function*(){t.Ea.forEach((e,n)=>{EE(t,e)})})}function XH(t,e){return _(this,null,function*(){zR(t),wE(t)?(t.Va.Pa(e),IE(t)):t.Va.set("Unknown")})}function e4(t,e,n){return _(this,null,function*(){if(t.Va.set("Online"),e instanceof kh&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ea.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))})}(t,e)}catch(r){V(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zh(t,r)}else if(e instanceof ds?t.ma.Xe(e):e instanceof xh?t.ma.ot(e):t.ma.nt(e),!n.isEqual(J.min()))try{let r=yield BR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.ma.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ea.get(u);if(!h)return;o.Ea.set(u,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),HR(o,u);let p=new Mc(h.target,u,l,h.sequenceNumber);EE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V(zi,"Failed to raise snapshot:",r),yield zh(t,r)}})}function zh(t,e,n){return _(this,null,function*(){if(!Ss(e))throw e;t.da.add(1),yield Uc(t),t.Va.set("Offline"),n||(n=()=>BR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){V(zi,"Retrying IndexedDB access"),yield n(),t.da.delete(1),yield df(t)}))})}function qR(t,e){return e().catch(n=>zh(t,n,e))}function hf(t){return _(this,null,function*(){let e=Q(t),n=$r(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:uE;for(;t4(e);)try{let i=yield GH(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,n4(e,i)}catch(i){yield zh(e,i)}WR(e)&&GR(e)})}function t4(t){return Gi(t)&&t.Ia.length<10}function n4(t,e){t.Ia.push(e);let n=$r(t);n.N_()&&n.ea&&n.ta(e.mutations)}function WR(t){return Gi(t)&&!$r(t).O_()&&t.Ia.length>0}function GR(t){$r(t).start()}function r4(t){return _(this,null,function*(){$r(t).ia()})}function i4(t){return _(this,null,function*(){let e=$r(t);for(let n of t.Ia)e.ta(n.mutations)})}function o4(t,e,n){return _(this,null,function*(){let r=t.Ia.shift(),i=Kv.from(r,e,n);yield qR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield hf(t)})}function s4(t,e){return _(this,null,function*(){e&&$r(t).ea&&(yield function(r,i){return _(this,null,function*(){if(function(s){return IH(s)&&s!==M.ABORTED}(i.code)){let o=r.Ia.shift();$r(r).L_(),yield qR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield hf(r)}})}(t,e)),WR(t)&&GR(t)})}function SA(t,e){return _(this,null,function*(){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),V(zi,"RemoteStore received new credentials");let r=Gi(n);n.da.add(3),yield Uc(n),r&&n.Va.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),yield df(n)})}function a4(t,e){return _(this,null,function*(){let n=Q(t);e?(n.da.delete(2),yield df(n)):e||(n.da.add(2),yield Uc(n),n.Va.set("Unknown"))})}function As(t){return t.fa||(t.fa=function(n,r,i){let o=Q(n);return o.oa(),new x_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:ZH.bind(null,t),n_:JH.bind(null,t),i_:XH.bind(null,t),Y_:e4.bind(null,t)}),t.Aa.push(e=>_(null,null,function*(){e?(t.fa.L_(),wE(t)?IE(t):t.Va.set("Unknown")):(yield t.fa.stop(),zR(t))}))),t.fa}function $r(t){return t.ga||(t.ga=function(n,r,i){let o=Q(n);return o.oa(),new k_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:r4.bind(null,t),i_:s4.bind(null,t),na:i4.bind(null,t),ra:o4.bind(null,t)}),t.Aa.push(e=>_(null,null,function*(){e?(t.ga.L_(),yield hf(t)):(yield t.ga.stop(),t.Ia.length>0&&(V(zi,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))}))),t.ga}var j_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function TE(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Ss(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var qh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=Ic(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Wh=class{constructor(){this.pa=new Me(z.comparator)}track(e){let n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):q(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){let e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ts=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,qh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var U_=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},B_=class{constructor(){this.queries=AA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Q(n),o=i.queries;i.queries=AA(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function AA(){return new ar(t=>_R(t),cf)}function KR(t,e){return _(this,null,function*(){let n=Q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new U_,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield n.onListen(i,!0);break;case 1:o.ba=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=TE(s,`Initialization of query '${as(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&DE(n)})}function QR(t,e){return _(this,null,function*(){let n=Q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function c4(t,e){let n=Q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&DE(n)}function u4(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function DE(t){t.Ca.forEach(e=>{e.next()})}var $_,RA;(RA=$_||($_={})).xa="default",RA.Cache="cache";var Gh=class{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;let r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;let n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==$_.Cache}};var Kh=class{constructor(e){this.key=e}},Qh=class{constructor(e){this.key=e}},H_=class{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ue(),this.mutatedKeys=ue(),this.Za=ER(e),this.Xa=new qh(this.Za)}get eu(){return this.Ha}tu(e,n){let r=n?n.nu:new Wh,i=n?n.Xa:this.Xa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=uf(this.query,p)?p:null,D=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),R=!1;y&&m?y.data.isEqual(m.data)?D!==N&&(r.track({type:3,doc:m}),R=!0):this.ru(y,m)||(r.track({type:2,doc:m}),R=!0,(u&&this.Za(m,u)>0||l&&this.Za(m,l)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),R=!0):y&&!m&&(r.track({type:1,doc:y}),R=!0,(u||l)&&(a=!0)),R&&(m?(s=s.add(m),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(m,D){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Vt:R})}};return N(m)-N(D)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let a=n&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new Ts(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Wh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=ue(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Qh(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Kh(r))}),n}au(e){this.Ha=e.$s,this.Ya=ue();let n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ts.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},bE="SyncEngine",z_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},q_=class{constructor(e){this.key=e,this.cu=!1}},W_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new ar(a=>_R(a),cf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Me(z.comparator),this.Eu=new Map,this.du=new xc,this.Au={},this.Ru=new Map,this.Vu=Pc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function l4(t,e,n=!0){return _(this,null,function*(){let r=tN(t),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield YR(r,e,n,!0),i})}function d4(t,e){return _(this,null,function*(){let n=tN(t);yield YR(n,e,!0,!1)})}function YR(t,e,n,r){return _(this,null,function*(){let i=yield KH(t.localStore,Dn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield h4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&$R(t.remoteStore,i),a})}function h4(t,e,n,r,i){return _(this,null,function*(){t.fu=(p,y,m)=>function(N,R,O,H){return _(this,null,function*(){let U=R.view.tu(O);U.Cs&&(U=yield DA(N.localStore,R.query,!1).then(({documents:T})=>R.view.tu(T,U)));let de=H&&H.targetChanges.get(R.targetId),Ue=H&&H.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(U,N.isPrimaryClient,de,Ue);return MA(N,R.targetId,ie.ou),ie.snapshot})}(t,p,y,m);let o=yield DA(t.localStore,e,!0),s=new H_(e,o.$s),a=s.tu(o.documents),u=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);MA(t,n,l.ou);let h=new z_(e,n,s);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),l.snapshot})}function f4(t,e,n){return _(this,null,function*(){let r=Q(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!cf(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield C_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_E(r.remoteStore,i.targetId),G_(r,i.targetId)}).catch(Cs))):(G_(r,i.targetId),yield C_(r.localStore,i.targetId,!0))})}function p4(t,e){return _(this,null,function*(){let n=Q(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_E(n.remoteStore,r.targetId))})}function g4(t,e,n){return _(this,null,function*(){let r=w4(t);try{let i=yield function(s,a){let u=Q(s),l=nt.now(),h=a.reduce((m,D)=>m.add(D.key),ue()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let D=cr(),N=ue();return u.Bs.getEntries(m,h).next(R=>{D=R,D.forEach((O,H)=>{H.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,D)).next(R=>{p=R;let O=[];for(let H of a){let U=EH(H,p.get(H.key).overlayedDocument);U!=null&&O.push(new ur(H.key,U,hR(U.value.mapValue),Fi.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,O,a)}).next(R=>{y=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,R.batchId,O)})}).then(()=>({batchId:y.batchId,changes:wR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Au[s.currentUser.toKey()];l||(l=new Me(re)),l=l.insert(a,u),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Bc(r,i.changes),yield hf(r.remoteStore)}catch(i){let o=TE(i,"Failed to persist write");n.reject(o)}})}function ZR(t,e){return _(this,null,function*(){let n=Q(t);try{let r=yield qH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?ye(s.cu,14607):i.removedDocuments.size>0&&(ye(s.cu,42227),s.cu=!1))}),yield Bc(n,r,e)}catch(r){yield Cs(r)}})}function NA(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.hu.forEach((o,s)=>{let a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Q(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.Sa)y.Fa(a)&&(l=!0)}),l&&DE(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function m4(t,e,n){return _(this,null,function*(){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me(z.comparator);s=s.insert(o,rn.newNoDocument(o,J.min()));let a=ue().add(o),u=new Ph(J.min(),new Map,new Me(re),s,a);yield ZR(r,u),r.Iu=r.Iu.remove(o),r.Eu.delete(e),CE(r)}else yield C_(r.localStore,e,!1).then(()=>G_(r,e,n)).catch(Cs)})}function y4(t,e){return _(this,null,function*(){let n=Q(t),r=e.batch.batchId;try{let i=yield zH(n.localStore,e);XR(n,r,null),JR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Bc(n,i)}catch(i){yield Cs(i)}})}function v4(t,e,n){return _(this,null,function*(){let r=Q(t);try{let i=yield function(s,a){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ye(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);XR(r,e,n),JR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Bc(r,i)}catch(i){yield Cs(i)}})}function JR(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function XR(t,e,n){let r=Q(t),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function G_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||eN(t,r)})}function eN(t,e){t.Tu.delete(e.path.canonicalString());let n=t.Iu.get(e);n!==null&&(_E(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),CE(t))}function MA(t,e,n){for(let r of n)r instanceof Kh?(t.du.addReference(r.key,e),_4(t,r)):r instanceof Qh?(V(bE,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||eN(t,r.key)):q(19791,{pu:r})}function _4(t,e){let n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(V(bE,"New document in limbo: "+n),t.Tu.add(r),CE(t))}function CE(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){let e=t.Tu.values().next().value;t.Tu.delete(e);let n=new z(Ae.fromString(e)),r=t.Vu.next();t.Eu.set(r,new q_(n)),t.Iu=t.Iu.insert(n,r),$R(t.remoteStore,new Mc(Dn(af(n.path)),r,"TargetPurposeLimboResolution",cE.le))}}function Bc(t,e,n){return _(this,null,function*(){let r=Q(t),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,u)=>{s.push(r.fu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=w_.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(u,l){return _(this,null,function*(){let h=Q(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,y=>P.forEach(y.ds,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>P.forEach(y.As,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!Ss(p))throw p;V(vE,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.xs.get(y),D=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(D);h.xs=h.xs.insert(y,N)}}})}(r.localStore,o))})}function E4(t,e){return _(this,null,function*(){let n=Q(t);if(!n.currentUser.isEqual(e)){V(bE,"User change. New user:",e.toKey());let r=yield UR(n.localStore,e);n.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(u=>{u.reject(new F(M.CANCELLED,s))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bc(n,r.ks)}})}function I4(t,e){let n=Q(t),r=n.Eu.get(e);if(r&&r.cu)return ue().add(r.key);{let i=ue(),o=n.Pu.get(e);if(!o)return i;for(let s of o){let a=n.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function tN(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m4.bind(null,e),e.lu.Y_=c4.bind(null,e.eventManager),e.lu.gu=u4.bind(null,e.eventManager),e}function w4(t){let e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v4.bind(null,e),e}var nN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=lf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Su(n),yield this.persistence.start(),this.localStore=this.Du(n),this.gcScheduler=this.vu(n,this.localStore),this.indexBackfillerScheduler=this.Cu(n,this.localStore)})}vu(n,r){return null}Cu(n,r){return null}Du(n){return HH(this.persistence,new D_,n.initialUser,this.serializer)}Su(n){return new Vh(I_.fi,this.serializer)}bu(n){return new S_}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),K_=class extends nN{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ye(this.persistence.referenceDelegate instanceof jh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new c_(r,e.asyncQueue,n)}Su(e){let n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Vh(r=>jh.fi(r,n),this.serializer)}};var T4=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=E4.bind(null,this.syncEngine),yield a4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new B_}()}createDatastore(n){let r=lf(n.databaseInfo.databaseId),i=function(s){return new P_(s)}(n.databaseInfo);return function(s,a,u,l){return new L_(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new V_(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>NA(this.syncEngine,r,0),function(){return Bh.C()?new Bh:new A_}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let y=new W_(o,s,a,u,l,h);return p&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(o){return _(this,null,function*(){let s=Q(o);V(zi,"RemoteStore shutting down."),s.da.add(5),yield Uc(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Yh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Hr="FirestoreClient",Q_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Th.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){V(Hr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(Hr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=TE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Iv(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V(Hr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield UR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function PA(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield D4(t);V(Hr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>SA(e.remoteStore,i)),t._onlineComponents=e})}function D4(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(Hr,"Using user provided OfflineComponentProvider");try{yield Iv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),yield Iv(t,new nN)}}else V(Hr,"Using default OfflineComponentProvider"),yield Iv(t,new K_(void 0));return t._offlineComponents})}function rN(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(Hr,"Using user provided OnlineComponentProvider"),yield PA(t,t._uninitializedComponentsProvider._online)):(V(Hr,"Using default OnlineComponentProvider"),yield PA(t,new T4))),t._onlineComponents})}function b4(t){return rN(t).then(e=>e.syncEngine)}function Y_(t){return _(this,null,function*(){let e=yield rN(t),n=e.eventManager;return n.onListen=l4.bind(null,e.syncEngine),n.onUnlisten=f4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p4.bind(null,e.syncEngine),n})}function C4(t,e,n={}){let r=new wn;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return function(o,s,a,u,l){let h=new Yh({next:y=>{h.xu(),s.enqueueAndForget(()=>QR(o,p));let m=y.docs.has(a);!m&&y.fromCache?l.reject(new F(M.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&y.fromCache&&u&&u.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new Gh(af(a.path),h,{includeMetadataChanges:!0,Qa:!0});return KR(o,p)}(yield Y_(t),t.asyncQueue,e,n,r)})),r.promise}function iN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var xA=new Map;function oN(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S4(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kA(t){if(!z.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OA(t){if(z.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ff(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function Vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ff(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function A4(t,e){if(e<=0)throw new F(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var sN="firestore.googleapis.com",LA=!0,Zh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sN,this.ssl=LA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:LA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UH)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ds=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wv;switch(r.type){case"firstParty":return new Cv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=xA.get(n);r&&(V("ComponentProvider","Removing Datastore"),xA.delete(n),r.terminate())}(this),Promise.resolve()}};function R4(t,e,n,r={}){var i;t=Vr(t,Ds);let o=Mr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(kd(`https://${u}`),Od("Firestore",!0)),s.host!==sN&&s.host!==u&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!yn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Qe.MOCK_USER;else{h=dS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Qe(y)}t._authCredentials=new Tv(new Ih(h,p))}}var zr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},yt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},jr=class t extends zr{constructor(e,n,r){super(e,n,af(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function iZ(t,e,...n){if(t=Oe(t),oN("collection","path",e),t instanceof Ds){let r=Ae.fromString(e,...n);return OA(r),new jr(t,null,r)}{if(!(t instanceof yt||t instanceof jr))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return OA(r),new jr(t.firestore,null,r)}}function oZ(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=Th.newId()),oN("doc","path",e),t instanceof Ds){let r=Ae.fromString(e,...n);return kA(r),new yt(t,null,new z(r))}{if(!(t instanceof yt||t instanceof jr))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return kA(r),new yt(t.firestore,t instanceof jr?t.converter:null,new z(r))}}var FA="AsyncQueue",Jh=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new $h(this,"async_queue_retry"),this.rc=()=>{let r=Ev();r&&V(FA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let n=Ev();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let n=Ev();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let n=new wn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return _(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Ss(e))throw e;V(FA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ir("INTERNAL UNHANDLED ERROR: ",VA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);let i=j_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&q(47125,{cc:VA(this.Xu)})}verifyOperationInProgress(){}lc(){return _(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let n=this.Zu.indexOf(e);this.Zu.splice(n,1)}};function VA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function jA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var qi=class extends Ds{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jh(e),this._firestoreClient=void 0,yield e}})}};function sZ(t,e){let n=typeof t=="object"?t:Ai(),r=typeof t=="string"?t:e||Sh,i=Jo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=lS("firestore");o&&R4(i,...o)}return i}function SE(t){if(t._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||N4(t),t._firestoreClient}function N4(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new Mv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Q_(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var kc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ut.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Oc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xh=class{constructor(e){this._methodName=e}};var Lc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Fc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var M4=/^__.*__$/,Z_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hi(e,this.data,n,this.fieldTransforms)}};function aN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ic:t})}}var J_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ef(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(aN(this.Ic)&&M4.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},X_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lf(e)}bc(e,n,r,i=!1){return new J_({Ic:e,methodName:n,wc:r,path:Ot.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cN(t){let e=t._freezeSettings(),n=lf(t._databaseId);return new X_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function P4(t,e,n,r,i,o={}){let s=t.bc(o.merge||o.mergeFields?2:0,e,n,i);dN("Data must be an object, but it was:",s,r);let a=uN(r,s),u,l;if(o.merge)u=new In(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=k4(e,p,n);if(!s.contains(y))throw new F(M.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);L4(h,y)||h.push(y)}u=new In(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Z_(new nn(a),u,l)}function x4(t,e,n,r=!1){return AE(n,t.bc(r?4:3,e))}function AE(t,e){if(lN(t=Oe(t)))return dN("Unsupported field value:",e,t),uN(t,e);if(t instanceof Xh)return function(r,i){if(!aN(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=AE(a,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=nt.fromDate(r);return{timestampValue:Lh(i.serializer,o)}}if(r instanceof nt){let o=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lh(i.serializer,o)}}if(r instanceof Lc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kc)return{bytesValue:PR(i.serializer,r._byteString)};if(r instanceof yt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fc)return function(s,a){return{mapValue:{fields:{[dE]:{stringValue:hE},[gs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return mE(a.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${ff(r)}`)}(t,e)}function uN(t,e){let n={};return iR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,i)=>{let o=AE(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function lN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Lc||t instanceof kc||t instanceof yt||t instanceof Xh||t instanceof Fc)}function dN(t,e,n){if(!lN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ff(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function k4(t,e,n){if((e=Oe(e))instanceof Oc)return e._internalPath;if(typeof e=="string")return hN(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}var O4=new RegExp("[~\\*/\\[\\]]");function hN(t,e,n){if(e.search(O4)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oc(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ef(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,a+t+u)}function L4(t,e){return t.some(n=>n.isEqual(e))}var tf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(RE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},eE=class extends tf{data(){return super.data()}};function RE(t,e){return typeof e=="string"?hN(t,e):e instanceof Oc?e._internalPath:e._delegate._internalPath}function F4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vc=class{},jc=class extends Vc{};function aZ(t,e,...n){let r=[];e instanceof Vc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof nE).length,a=o.filter(u=>u instanceof tE).length;if(s>1||s>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var tE=class t extends jc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return fN(e._query,n),new zr(e.firestore,e.converter,zv(e._query,n))}_parse(e){let n=cN(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){BA(p,h);let D=[];for(let N of p)D.push(UA(u,o,N));y={arrayValue:{values:D}}}else y=UA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||BA(p,h),y=x4(a,s,p,h==="in"||h==="not-in");return je.create(l,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var nE=class t extends Vc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)fN(s,u),s=zv(s,u)}(e._query,n),new zr(e.firestore,e.converter,zv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var rE=class t extends jc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ui(o,s)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Br(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function cZ(t,e="asc"){let n=e,r=RE("orderBy",t);return rE._create(r,n)}var iE=class t extends jc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new zr(e.firestore,e.converter,Nh(e._query,this._limit,this._limitType))}};function uZ(t){return A4("limit",t),iE._create("limit",t,"F")}function UA(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vR(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ae.fromString(n));if(!z.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oA(t,new z(r))}if(n instanceof yt)return oA(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function BA(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fN(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var oE=class{convertValue(e,n="none"){switch(Ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[gs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new Fc(o)}convertGeoPoint(e){return new Lc(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=sf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){let n=or(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ae.fromString(e);ye(VR(r),9688,{name:e});let i=new Ah(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(n)||ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function V4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nf=class extends tf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new hs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(RE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},hs=class extends nf{data(e={}){return super.data(e)}},sE=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Li(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hs(this._firestore,this._userDataWriter,r.key,r,new Li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new hs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Li(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new hs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Li(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:j4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function j4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function lZ(t){t=Vr(t,yt);let e=Vr(t.firestore,qi);return C4(SE(e),t._key).then(n=>pN(e,t,n))}var rf=class extends oE{constructor(e){super(),this.firestore=e}convertBytes(e){return new kc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function dZ(t,e,n){t=Vr(t,yt);let r=Vr(t.firestore,qi),i=V4(t.converter,e,n);return U4(r,[P4(cN(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fi.none())])}function hZ(t,...e){var n,r,i;t=Oe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||jA(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(jA(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof yt)l=Vr(t.firestore,qi),h=af(t._key.path),u={next:p=>{e[s]&&e[s](pN(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Vr(t,zr);l=Vr(p.firestore,qi),h=p._query;let y=new rf(l);u={next:m=>{e[s]&&e[s](new sE(l,y,p,m))},error:e[s+1],complete:e[s+2]},F4(t._query)}return function(y,m,D,N){let R=new Yh(N),O=new Gh(m,R,D);return y.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return KR(yield Y_(y),O)})),()=>{R.xu(),y.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return QR(yield Y_(y),O)}))}}(SE(l),h,a,u)}function U4(t,e){return function(r,i){let o=new wn;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return g4(yield b4(r),i,o)})),o.promise}(SE(t),e)}function pN(t,e,n){let r=n.docs.get(e._key),i=new rf(t);return new nf(t,i,e._key,r,new Li(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){bs=i})(xr),Xt(new gt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new qi(new Dv(r.getProvider("auth-internal")),new Sv(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ah(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Le(Q0,Y0,e),Le(Q0,Y0,"esm2017")})();var yZ={production:!1,firebaseConfig:{apiKey:"AIzaSyDikPuo8FKl3QnBbuxB39HCexZhTbli4oo",authDomain:"finanzas-dashboard-9a0e6.firebaseapp.com",projectId:"finanzas-dashboard-9a0e6",storageBucket:"finanzas-dashboard-9a0e6.firebasestorage.app",messagingSenderId:"1044784431774",appId:"1:1044784431774:web:7ecab65cb4aa53d302718f"}};export{L as a,ge as b,B4 as c,$4 as d,_ as e,ee as f,He as g,Se as h,ne as i,MM as j,j as k,Xw as l,$ as m,Ao as n,B as o,x as p,gi as q,Fn as r,ma as s,Ng as t,pt as u,It as v,ve as w,sD as x,va as y,yx as z,Lx as A,g5 as B,Ol as C,qe as D,YD as E,xo as F,_i as G,zO as H,JO as I,Ea as J,p1 as K,g1 as L,m1 as M,cb as N,ub as O,om as P,A1 as Q,R1 as R,sm as S,b5 as T,C5 as U,U1 as V,lb as W,B1 as X,S5 as Y,A5 as Z,R5 as _,N5 as $,M5 as aa,_b as ba,lL as ca,Eb as da,Hn as ea,NL as fa,ML as ga,kL as ha,qb as ia,QL as ja,DF as ka,bF as la,Gm as ma,tc as na,oS as oa,t2 as pa,_y as qa,Le as ra,rs as sa,nv as ta,lh as ua,is as va,Pi as wa,xi as xa,mc as ya,YQ as za,ZQ as Aa,hh as Ba,tU as Ca,E0 as Da,I0 as Ea,w0 as Fa,M0 as Ga,_c as Ha,lv as Ia,OY as Ja,LY as Ka,FY as La,VY as Ma,iZ as Na,oZ as Oa,sZ as Pa,aZ as Qa,cZ as Ra,uZ as Sa,lZ as Ta,dZ as Ua,hZ as Va,yZ as Wa};
